# Recovered Tomb World (Habitable Planet)
recovered_tomb_world_category = {
	desc = "recovered_tomb_world_category_desc"
	picture = GFX_evt_ship_in_orbit
	level = 3
	#risk = 0
	
	should_ai_and_humans_use = yes
	
	spawn_chance = {		
		modifier = {
			add = 4
			habitable_planet = yes
			NOR = {
				is_planet_class = pc_ocean
				is_planet_class = pc_mangrove
				is_planet_class = pc_desertislands
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
				is_planet_class = pc_irradiated
				any_pop = { always = yes }
				has_modifier = "titanic_life"
				has_modifier = "natural_beauty"
				has_modifier = "atmospheric_aphrodisiac"
				has_modifier = "atmospheric_hallucinogen"
				has_modifier = "lush_planet"
				has_modifier = "irradiated_planet"
				has_modifier = "living_sea"
				has_modifier = "phaseshifted"
				# Third Party Mods
				has_modifier = "young_world"
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_modifier = "bleak_planet"
				# Third Party Mods
				has_modifier = "death_world"
				has_modifier = "ancient_cities"
				has_modifier = "dump_world"
			}
		}
	}
	
	on_success = {
		1 = {
			anomaly_event = anomalymod.1
			max_once = no
		}
	}
}

EXPANDED_WORMHOLE_CAT = {
	desc = "EXPANDED_WORMHOLE_CAT_DESC"
	picture = "GFX_evt_black_hole"
	level = 6
	
	spawn_chance = {
		modifier = {
			add = 2
			is_star = yes
			is_star_class = sc_black_hole
		}
	}
	
	on_success = {
		1 = anomalymod.2
		1 = anomalymod.3
		1 = anomalymod.4
	}
}

EXPANDED_MINING_CAT = {
	desc = "EXPANDED_MINING_CAT_DESC"
	picture = "GFX_evt_cold_barren"
	level = 3
	
	spawn_chance = {
		modifier = {
			add = 2
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
			}
		}
	}
	
	on_success = {
		1 = anomalymod.5
		1 = anomalymod.6
		1 = anomalymod.7
	}
}

EXPANDED_FRIENDLY_ANIMALS_CAT = {
	desc = "EXPANDED_FRIENDLY_ANIMALS_CAT_DESC"
	picture = "GFX_evt_alien_nature"
	level = 2
	
	spawn_chance = {
		modifier = {
			add = 3
			habitable_planet = yes
			NOR = {
				has_modifier = bleak_planet
				has_modifier = titanic_life
				has_modifier = dangerous_wildlife
				has_modifier = death_world
				has_modifier = young_world
			}
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_gaia
				has_modifier = natural_beauty
			}
		}
	}
	
	on_success = {
		1 = anomalymod.8
	}
}

EXPANDED_STRANGE_SOIL_CAT = {
	desc = "EXPANDED_STRANGE_SOIL_CAT_DESC"
	picture = "GFX_evt_ship_in_orbit"
	level = 4
	
	spawn_chance = {
		modifier = {
			add = 3
			habitable_planet = yes
			NOR = {
				has_modifier = lush_planet
				has_modifier = bleak_planet
			}
		}
	}
	
	on_success = {
		1 = anomalymod.9
		1 = anomalymod.10
		1 = anomalymod.11
		1 = {
			modifier = {
				factor = 0
				from = {
					is_moon = yes
				}
			}
			modifier = {
				factor = 0
				from = {
					NAND = {
						has_moon = yes
						any_moon = {
							uninhabitable_regular_planet = yes
						}
					}
				}
			}
			anomaly_event = anomalymod.12
		}
	}
}

EXPANDED_PRZYBYLSKI_STAR_CAT = {
	desc = "EXPANDED_PRZYBYLSKI_STAR_CAT_DESC"
	picture = "GFX_evt_ship_in_orbit_2"
	level = 7
	
	spawn_chance = {
		modifier = {
			add = 1
			is_planet_class = pc_a_star
		}
	}
	
	null_spawn_chance = 0.70 # 30% chance to spawn
	
	on_success = {
		1 = anomalymod.13
	}
}

EXPANDED_DISSECTED_GATEWAY_CAT = {
	desc = "EXPANDED_DISSECTED_GATEWAY_CAT_DESC"
	picture = "GFX_evt_space_station"
	level = 5
	
	spawn_chance = {
		modifier = { #Normal chance to spawn if player has completed chain
			add = 1
			uninhabitable_regular_planet = yes
			OR = {
				has_global_flag = l_cluster_opened
				from.owner = {
					has_completed_event_chain_counter = {
						event_chain = l_cluster_chain
						counter = clues
					}
				}
			}
		}
		modifier = { #Higher chance to spawn if player has ongoing chain
			add = 5
			uninhabitable_regular_planet = yes
			from.owner = {
				has_event_chain = "l_cluster_chain"
			}
		}
		modifier = { #Will not spawn if the player has neither completed nor currently has the ongoing chain
			factor = 0
			has_distar = no
			NOT = { has_global_flag = l_cluster_opened }
			from.owner = {
				NOR = {
					has_event_chain = "l_cluster_chain"
					has_completed_event_chain_counter = {
						event_chain = l_cluster_chain
						counter = clues
					}
				}
			}
		}
	}

	max_once_global = no
	max_once = yes
	
	on_success = {
		1 =	{
			anomaly_event = anomalymod.15
		}
	}
}

EXPANDED_AKX_SUNLESS_SEA_CAT = {
	desc = "EXPANDED_AKX_SUNLESS_SEA_CAT_DESC"
	picture = "GFX_evt_city_ruins"
	level = 8
	
	spawn_chance = {
		modifier = {
			add = 25
			is_planet_class = pc_nuked
			solar_system = {
				NOR = {
					is_star_class = sc_black_hole
					is_star_class = sc_neutron_star
					is_star_class = sc_pulsar
					is_star_class = sc_magnetar
					has_star_flag = ruined_sentry_system
					has_star_flag = hostile_system
					has_star_flag = superflare_system
					has_star_flag = old_foes_system
					has_star_flag = ruined_empire
					has_star_flag = nuked_sol
				}
			}
			from.owner = {
				has_country_flag = worm_events_available
			}
		}
	}
	
	on_spawn = {
		add_deposit = d_deep_sinkhole
	}
	
	max_once_global = yes
	
	on_success = {
		1 = countryexpanded.200
	}
}