
mem_dpe_become_protectorate = {
	hidden_effect = { #Taken from event primitive.16 with slight alterations
		event_target:mem_dpe_primitive_civ = {
			remove_country_flag = early_space_age
			set_country_flag = primitives_can_into_space
			set_country_type = default
			change_country_flag = random
			if = {
				limit = { is_species_class = MAM }
				set_graphical_culture = mammalian_01
			}
			if = {
				limit = { is_species_class = REP }
				set_graphical_culture = reptilian_01
			}
			if = {
				limit = { is_species_class = AVI }
				set_graphical_culture = avian_01
			}
			if = {
				limit = { is_species_class = ART }
				set_graphical_culture = arthropoid_01
			}
			if = {
				limit = { is_species_class = MOL }
				set_graphical_culture = molluscoid_01
			}
			if = {
				limit = { is_species_class = FUN }
				set_graphical_culture = fungoid_01
			}
			if = {
				limit = { is_species_class = PLANT }
				set_graphical_culture = plantoid_01
			}		
			change_government = {
				authority = random
				civics = random
			}
			set_name = random

			add_minerals = 1000 # enough for a spaceport and then some
			add_energy = 500
			add_influence = 300
			capital_scope = {
				every_tile = {
					limit = {
						has_blocker = yes
						NOR = {
							has_blocker = tb_decrepit_dwellings
							has_blocker = tb_failing_infrastructure
						}
					}
					remove_blocker = yes
				}
				while = {
					limit = { 
						num_pops < 8
						any_tile = {
							has_grown_pop = no
							has_growing_pop = no
							has_blocker = no
						}
					}
					random_tile = {
						limit = {
							has_grown_pop = no
							has_growing_pop = no
							has_blocker = no
						}
						create_pop = {
							species = owner
						}
					}
				}
				random_tile = {
					limit = {
						has_grown_pop = yes
						OR = {
							has_building = "building_primitive_farm"
							has_building = "building_primitive_factory"
							has_building = no
						}
					}
					clear_deposits = yes
					add_deposit = d_energy_deposit
					set_building = "building_capital_2"
				}
				while = {
					count = 2
					random_tile = {
						limit = {
							has_grown_pop = yes
							OR = {
								has_building = "building_primitive_farm"
								has_building = "building_primitive_factory"
								has_building = no
							}
						}
						clear_deposits = yes
						add_deposit = d_mineral_deposit
						set_building = "building_mining_network_1"
					}
				}
				while = {
					count = 2
					random_tile = {
						limit = {
							has_grown_pop = yes
							OR = {
								has_building = "building_primitive_farm"
								has_building = "building_primitive_factory"
								has_building = no
							}
						}
						clear_deposits = yes
						add_deposit = d_farmland_deposit
						set_building = "building_hydroponics_farm_1"
					}
				}
				while = {
					count = 3
					random_tile = {
						limit = {
							has_grown_pop = yes
							OR = {
								has_building = "building_primitive_farm"
								has_building = "building_primitive_factory"
								has_building = no
							}
						}
						clear_deposits = yes
						add_deposit = d_energy_deposit
						set_building = "building_power_plant_1"
					}
				}
				remove_all_armies = yes
				solar_system = {
					starbase = {
						set_owner = event_target:mem_dpe_primitive_civ
					}
				}		
			}
			random_owned_ship = {
				limit = { is_ship_size = primitive_space_station }
				fleet = { destroy_fleet = THIS }
			}
			if = {
				limit = {
					root = { has_valid_civic = "civic_inwards_perfection" }
				}
				set_subject_of = {
					who = root
					subject_type = tributary
				}
			}			
			else = {
				set_subject_of = {
					who = root
					subject_type = protectorate
				}						
			}
		}
	}
}