generate_primitives_on_planet = {
	create_primitive_species = yes
	create_primitive_empire = yes
	setup_primitive_planet = yes
	#create_primitive_armies = yes ### Done via Pop job now
}

generate_early_primitives_on_planet = {
	create_primitive_species = yes
	create_early_primitive_empire = yes
	setup_primitive_planet = yes
	#create_primitive_armies = yes ### Done via Pop job now
}

generate_late_primitives_on_planet = {
	create_primitive_species = yes
	create_late_primitive_empire = yes
	setup_primitive_planet = yes
	#create_primitive_armies = yes ### Done via Pop job now
}

create_primitive_species = {
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		homeworld = THIS
		traits = {
			trait = random_traits
		}
	}
}

create_early_primitive_empire = {
	create_country = {
		name = random
		authority = random
		civics = {
			civic = civic_landed_nobility
			civic = civic_flat_world_theory
		}
		species = last_created
		ethos = random
		flag = {
			icon = {
				category = "special"
				file = "primitive.dds"
			}
			background= {
				category = "backgrounds"
				file = "new_dawn.dds"
			}
			colors={
				"turquoise"
				"green"
				"null"
				"null"
			}
		}
		origin = "origin_enlightened" # Should only be visible if they become spacefaring
		type = primitive
	}
	last_created_country = {
		set_graphical_culture = preindustrial_01
		random_list = {
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_1
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_7
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_1 } } save_global_event_target_as = prim_med_1 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_7 } } save_global_event_target_as = prim_med_7 }			
				set_country_flag = stone_age 
				set_primitive_age = stone_age
				change_government = {
					authority = random
					civics = {
						civic = civic_secret_of_fire
						civic = civic_the_wheel
					}
				}
			}
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_2
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_8
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_2 } } save_global_event_target_as = prim_med_2 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_8 } } save_global_event_target_as = prim_med_8 }			
				set_country_flag = bronze_age 
				set_primitive_age = bronze_age
				change_government = {
					authority = random
					civics = {
						civic = civic_secret_of_fire
						civic = civic_the_wheel
					}
				}
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"green"
						"dark_green"
						"null"
						"null"
					}
				}
			}
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_3
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_9
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_3 } } save_global_event_target_as = prim_med_3 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_9 } } save_global_event_target_as = prim_med_9 }			
				set_country_flag = iron_age 
				set_primitive_age = iron_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"purple"
						"dark_purple"
						"null"
						"null"
					}
				}
			}
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_4
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_10
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_4 } } save_global_event_target_as = prim_med_4 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_10 } } save_global_event_target_as = prim_med_10 }			
				set_country_flag = late_medieval_age 
				set_primitive_age = late_medieval_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"light_blue"
						"blue"
						"null"
						"null"
					}
				}
			}
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_5
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_11
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_5 } } save_global_event_target_as = prim_med_5 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_11 } } save_global_event_target_as = prim_med_11 }			
				set_country_flag = renaissance_age 
				set_primitive_age = renaissance_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"pink"
						"burgundy"
						"null"
						"null"
					}
				}
			}
			20 = {
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_6
			    }
			    modifier = {
			       factor = 0.5
				   exists = event_target:prim_med_12
			    }				
				if = { limit = { NOT = { exists = event_target:prim_med_6 } } save_global_event_target_as = prim_med_6 }
				else_if = { limit = { NOT = { exists = event_target:prim_med_12 } } save_global_event_target_as = prim_med_12 }			
				set_country_flag = steam_age 
				set_primitive_age = steam_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"orange"
						"red"
						"null"
						"null"
					}
				}
			}
		}
	}	
}

create_late_primitive_empire = {
	create_country = {
		name = random
		authority = random
		civics = {
			civic = civic_increasing_urbanization
			civic = civic_atmospheric_pollution
		}
		species = last_created
		ethos = random
		flag = {
			icon = {
				category = "spherical"
				file = "flag_spherical_22.dds"
			}
			background= {
				category = "backgrounds"
				file = "new_dawn.dds"
			}
			colors={
				"turquoise"
				"green"
				"null"
				"null"
			}
		}
		origin = "origin_enlightened" # Should only be visible if they become spacefaring
		type = primitive
	}
	last_created_country = {
		set_graphical_culture = industrial_01
		random_list = {
			25 = {
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_1
			    }
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_5
			    }				
				if = { limit = { NOT = { exists = event_target:prim_ind_1 } } save_global_event_target_as = prim_ind_1 }
				else_if = { limit = { NOT = { exists = event_target:prim_ind_5 } } save_global_event_target_as = prim_ind_5 }
				set_country_flag = industrial_age 
				set_primitive_age = industrial_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"beige"
						"yellow"
						"null"
						"null"
					}
				}
			}
			25 = { 
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_2
			    }
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_6
			    }				
				if = { limit = { NOT = { exists = event_target:prim_ind_2 } } save_global_event_target_as = prim_ind_2 }
				else_if = { limit = { NOT = { exists = event_target:prim_ind_6 } } save_global_event_target_as = prim_ind_6 }			
				set_country_flag = machine_age
				set_primitive_age = machine_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"yellow"
						"orange"
						"null"
						"null"
					}
				}
			}
			25 = { 
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_3
			    }
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_7
			    }				
				if = { limit = { NOT = { exists = event_target:prim_ind_3 } } save_global_event_target_as = prim_ind_3 }
				else_if = { limit = { NOT = { exists = event_target:prim_ind_7 } } save_global_event_target_as = prim_ind_7 }			
				set_country_flag = atomic_age 
				set_primitive_age = atomic_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"beige"
						"brown"
						"null"
						"null"
					}
				}
			}
			25 = { 
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_4
			    }
			    modifier = {
			       factor = 0.6
				   exists = event_target:prim_ind_8
			    }				
				if = { limit = { NOT = { exists = event_target:prim_ind_4 } } save_global_event_target_as = prim_ind_4 }
				else_if = { limit = { NOT = { exists = event_target:prim_ind_8 } } save_global_event_target_as = prim_ind_8 }			
				set_country_flag = early_space_age 
				set_primitive_age = early_space_age
				change_country_flag = {
					icon = {
						category = "special"
						file = "primitive.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"grey"
						"dark_grey"
						"null"
						"null"
					}
				}
			}
		}
	}	
}


create_primitive_empire = {
	random_list = {
		# Industrial Civilization
		35 = {
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_ind_1
			}	
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_ind_2
			}
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_ind_3
			}		
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_ind_4
			}				
			create_late_primitive_empire = yes
		}
		# Medieval Civilization
		65 = {
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_1
			}
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_2
			}	
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_3
			}	
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_4
			}
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_5
			}
		    modifier = {
			    factor = 0.8
				exists = event_target:prim_med_6
			}			
			create_early_primitive_empire = yes
		}
	}
}

setup_primitive_planet = {
	set_owner = last_created_country
	set_capital = yes
	
	last_created_country = {
		if = {
			limit = { has_country_flag = stone_age }
			prev = {
				while = {
					count = 4
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_crude_huts
				remove_building = building_colony_shelter
			}
		}					
		if = {
			limit = { has_country_flag = bronze_age }
			prev = {
				while = {
					count = 6
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = iron_age }
			prev = {
				while = {
					count = 9
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings				
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = late_medieval_age }
			prev = {
				while = {
					count = 10
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_basic_houses
				add_building = building_primitive_dwellings
				add_building = building_basic_castle
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = renaissance_age }
			prev = {
				while = {
					count = 12
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_basic_houses
				add_building = building_basic_houses
				add_building = building_basic_castle
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = steam_age }
			prev = {
				while = {
					count = 16
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_urban_dwellings
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_advanced_castle
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = industrial_age }
			prev = {
				while = {
					count = 21
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_advanced_castle
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = machine_age }
			prev = {
				while = {
					count = 23
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_industrial_castle
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = atomic_age }
			prev = {
				while = {
					count = 24
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_industrial_castle
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = early_space_age }
			prev = {
				while = {
					count = 27
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}		
	}
	
	if = {
		limit = {
			last_created_country = {
				OR = {
					has_country_flag = machine_age
					has_country_flag = atomic_age
					has_country_flag = early_space_age				
				}
			}
		}
		create_primitive_blockers = yes
	}
}

#Use in primitive country scope. set_primitive_age_effect = { primitive_age = stone_age }
set_primitive_age_effect = {
	hidden_effect = {
		remove_country_flag = stone_age
		remove_country_flag = bronze_age
		remove_country_flag = iron_age
		remove_country_flag = late_medieval_age
		remove_country_flag = renaissance_age
		remove_country_flag = steam_age
		remove_country_flag = industrial_age
		remove_country_flag = machine_age
		remove_country_flag = atomic_age
		remove_country_flag = early_space_age
		set_primitive_age = $primitive_age$
		set_country_flag = $primitive_age$
		switch = {
			trigger = has_country_flag
			stone_age = {
				change_government = {
					civics = {
						civic = civic_secret_of_fire
						civic = civic_the_wheel
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 4
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 4
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 4
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 4
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}					
					else_if = {
						limit = { num_pops < 4 }
						while = {
							limit = {
								num_pops < 4
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_crude_huts
				}
			}
			bronze_age = {
				change_government = {
					civics = {
						civic = civic_secret_of_fire
						civic = civic_the_wheel
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 6
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 6
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 7
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 7
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 8
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 8
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}					
					else_if = {
						limit = { num_pops < 6 }
						while = {
							limit = {
								num_pops < 6
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_dwellings
					add_building = building_stone_palace
				}
			}
			iron_age = {
				change_government = {
					civics = {
						civic = civic_landed_nobility
						civic = civic_flat_world_theory
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 9
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 9
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 10
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 10
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 11
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 11
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 9 }
						while = {
							limit = {
								num_pops < 9
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_dwellings
					add_building = building_primitive_dwellings					
					add_building = building_stone_palace
				}
			}
			late_medieval_age = {
				change_government = {
					civics = {
						civic = civic_landed_nobility
						civic = civic_flat_world_theory
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 10
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 10
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 11
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 11
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 12
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 12
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 10 }
						while = {
							limit = {
								num_pops < 10
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_basic_houses
					add_building = building_primitive_dwellings
					add_building = building_basic_castle
				}
			}
			renaissance_age = {
				change_government = {
					civics = {
						civic = civic_landed_nobility
						civic = civic_flat_world_theory
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 12
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 12
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 13
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 13
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 14
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 14
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 12 }
						while = {
							limit = {
								num_pops < 12
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_basic_houses
					add_building = building_basic_houses
					add_building = building_basic_castle
				}
			}
			steam_age = {
				change_government = {
					civics = {
						civic = civic_landed_nobility
						civic = civic_flat_world_theory
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 16
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 16
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 17
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 17
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 18
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 18
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 16 }
						while = {
							limit = {
								num_pops < 16
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_urban_dwellings
					add_building = building_primitive_factory
					add_building = building_primitive_mine
					add_building = building_advanced_castle
				}
			}
			industrial_age = {
				change_government = {
					civics = {
						civic = civic_increasing_urbanization
						civic = civic_atmospheric_pollution
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 21
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 21
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 22
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 22
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 23
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 23
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 21 }
						while = {
							limit = {
								num_pops < 21
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_farm
					add_building = building_primitive_factory
					add_building = building_primitive_mine
					add_building = building_primitive_power_plant
					add_building = building_advanced_castle
					add_building = building_urban_dwellings
				}
			}
			machine_age = {
				change_government = {
					civics = {
						civic = civic_increasing_urbanization
						civic = civic_atmospheric_pollution
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 23
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 23
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 24
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 24
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 25
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 25
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 23 }
						while = {
							limit = {
								num_pops < 23
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_farm
					add_building = building_primitive_factory
					add_building = building_primitive_mine
					add_building = building_primitive_power_plant
					add_building = building_industrial_castle
					add_building = building_urban_dwellings
					add_deposit = d_decrepit_dwellings
					add_deposit = d_failing_infrastructure
				}
			}
			atomic_age = {
				change_government = {
					civics = {
						civic = civic_increasing_urbanization
						civic = civic_atmospheric_pollution
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 24
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 24
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 25
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 25
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 26
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 26
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 24 }
						while = {
							limit = {
								num_pops < 24
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_farm
					add_building = building_primitive_factory
					add_building = building_primitive_mine
					add_building = building_primitive_power_plant
					add_building = building_industrial_castle
					add_building = building_urban_dwellings
					add_deposit = d_decrepit_dwellings
					add_deposit = d_failing_infrastructure
				}
			}
			early_space_age = {
				change_government = {
					civics = {
						civic = civic_increasing_urbanization
						civic = civic_atmospheric_pollution
					}
				}
				capital_scope = {
					if = {
						limit = {
							num_pops > 27
							years_passed < 30
						}
						while = {
							limit = {
								num_pops > 27
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 28
							years_passed < 60
						}
						while = {
							limit = {
								num_pops > 28
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = {
							num_pops > 29
							years_passed > 59
						}
						while = {
							limit = {
								num_pops > 29
							}
							random_owned_pop = {
								kill_pop = yes
							}
						}
					}
					else_if = {
						limit = { num_pops < 27 }
						while = {
							limit = {
								num_pops < 27
							}
							create_pop = {
								species = owner_main_species
							}
						}
					}
					remove_all_primitive_buildings = yes
					add_building = building_primitive_farm
					add_building = building_primitive_factory
					add_building = building_primitive_mine
					add_building = building_primitive_power_plant
					add_building = building_primitive_capital
					add_building = building_urban_dwellings
					add_deposit = d_decrepit_dwellings
					add_deposit = d_failing_infrastructure
				}
			}
		}
	}
}

remove_all_primitive_buildings = {
	if = {
		limit = { has_building = building_crude_huts }
		while = {
			limit = { has_building = building_crude_huts }
			remove_building = building_crude_huts
		}
	}
	if = {
		limit = { has_building = building_primitive_dwellings }
		while = {
			limit = { has_building = building_primitive_dwellings }
			remove_building = building_primitive_dwellings
		}
	}
	if = {
		limit = { has_building = building_stone_palace }
		while = {
			limit = { has_building = building_stone_palace }
			remove_building = building_stone_palace
		}
	}
	if = {
		limit = { has_building = building_primitive_factory }
		while = {
			limit = { has_building = building_primitive_factory }
			remove_building = building_primitive_factory
		}
	}
	if = {
		limit = { has_building = building_primitive_mine }
		while = {
			limit = { has_building = building_primitive_mine }
			remove_building = building_primitive_mine
		}
	}
	if = {
		limit = { has_building = building_primitive_power_plant }
		while = {
			limit = { has_building = building_primitive_power_plant }
			remove_building = building_primitive_power_plant
		}
	}
	if = {
		limit = { has_building = building_primitive_farm }
		while = {
			limit = { has_building = building_primitive_farm }
			remove_building = building_primitive_farm
		}
	}
	if = {
		limit = { has_building = building_primitive_capital }
		while = {
			limit = { has_building = building_primitive_capital }
			remove_building = building_primitive_capital
		}
	}
	if = {
		limit = { has_building = building_urban_dwellings }
		while = {
			limit = { has_building = building_urban_dwellings }
			remove_building = building_urban_dwellings
		}
	}
	if = {
		limit = {
			has_deposit = d_decrepit_dwellings
		}
		remove_deposit = d_decrepit_dwellings
	}
	if = {
		limit = {
			has_deposit = d_failing_infrastructure
		}
		remove_deposit = d_failing_infrastructure
	}
}

create_primitive_armies = {
	last_created_country = {
		if = {
			limit = { has_country_flag = stone_age }
			PREV = {
				create_army = {
					name = "NAME_Primitive_Army"
					owner = last_created
					species = last_created
					type = "primitive_army"
				}
			}
			break = yes
		}					
		if = {
			limit = { has_country_flag = bronze_age }
			PREV = {
				while = {
					count = 2
					create_army = {
						name = "NAME_Primitive_Army"
						owner = last_created
						species = last_created
						type = "primitive_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = iron_age }
			PREV = {
				while = {
					count = 3
					create_army = {
						name = "NAME_Primitive_Army"
						owner = last_created
						species = last_created
						type = "primitive_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = late_medieval_age }
			PREV = {
				while = {
					count = 4
					create_army = {
						name = "NAME_Primitive_Army"
						owner = last_created
						species = last_created
						type = "primitive_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = renaissance_age }
			PREV = {
				while = {
					count = 5
					create_army = {
						name = "NAME_Primitive_Army"
						owner = last_created
						species = last_created
						type = "primitive_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = steam_age }
			PREV = {
				while = {
					count = 4
					create_army = {
						name = "NAME_Industrial_Army"
						owner = last_created
						species = last_created
						type = "industrial_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = machine_age }
			PREV = {
				while = {
					count = 5
					create_army = {
						name = "NAME_Industrial_Army"
						owner = last_created
						species = last_created
						type = "industrial_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = industrial_age }
			PREV = {
				while = {
					count = 6
					create_army = {
						name = "NAME_Industrial_Army"
						owner = last_created
						species = last_created
						type = "industrial_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = atomic_age }
			PREV = {
				while = {
					count = 5
					create_army = {
						name = "NAME_Post-Atomic_Army"
						owner = last_created
						species = last_created
						type = "postatomic_army"
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_country_flag = early_space_age }
			PREV = {
				while = {
					count = 6
					create_army = {
						name = "NAME_Post-Atomic_Army"
						owner = last_created
						species = last_created
						type = "postatomic_army"
					}
				}
			}
			break = yes
		}		
	}
}

create_primitive_blockers = {
	add_deposit = d_decrepit_dwellings
	add_deposit = d_failing_infrastructure		
}