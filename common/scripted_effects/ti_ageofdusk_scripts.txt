generate_ageofduskciv_on_planet = {
	create_ageofduskciv_species = yes
	create_ageofduskciv_empire = yes
	setup_ageofduskciv_planet = yes
}

generate_early_ageofduskciv_on_planet = {
#	create_ageofduskciv_species = yes
	create_early_ageofduskciv_empire = yes
#	setup_ageofduskciv_planet = yes
}

generate_late_ageofduskciv_on_planet = {
#	create_ageofduskciv_species = yes
	create_late_ageofduskciv_empire = yes
#	setup_ageofduskciv_planet = yes
}

create_ageofduskciv_species = {
	create_species = {
		name = random
		class = random_non_machine
		portrait = random
		homeworld = THIS
		traits = {
			trait = random_traits
		}
	}
}
			
			
create_early_ageofduskciv_empire = {
	create_country = {
		name = random
		authority = random
		civics = {
			civic = civic_landed_nobility
			civic = civic_flat_world_theory
		}
		species = last_created
		ethos = random
		flag = {
			icon = {
				category = "domination"
				file = "domination_21.dds"
			}
			background= {
				category = "backgrounds"
				file = "00_solid.dds"
			}
			colors={
				"turquoise"
				"green"
				"null"
				"null"
			}
		}
		type = primitive
	}
	last_created_country = {
		set_graphical_culture = preindustrial_01
		random_list = {
			5 = {
				set_country_flag = iron_age 
				set_primitive_age = iron_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"purple"
						"dark_purple"
						"null"
						"null"
					}
				}
			}
			10 = {
				set_country_flag = late_medieval_age 
				set_primitive_age = late_medieval_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"light_blue"
						"blue"
						"null"
						"null"
					}
				}
			}
			20 = {
				set_country_flag = renaissance_age 
				set_primitive_age = renaissance_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"pink"
						"burgundy"
						"null"
						"null"
					}
				}
			}
			65 = {
				set_country_flag = steam_age 
				set_primitive_age = steam_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"orange"
						"red"
						"null"
						"null"
					}
				}
			}
		}
	}	
}

create_late_ageofduskciv_empire = {
	create_country = {
		name = random
		authority = random
		civics = {
			civic = civic_increasing_urbanization
			civic = civic_atmospheric_pollution
		}
		species = last_created
		ethos = random
		flag = {
			icon = {
				category = "spherical"
				file = "flag_spherical_22.dds"
			}
			background= {
				category = "backgrounds"
				file = "00_solid.dds"
			}
			colors={
				"turquoise"
				"green"
				"null"
				"null"
			}
		}
		type = primitive
	}
	last_created_country = {
		set_graphical_culture = industrial_01
		random_list = {
			10 = {
				set_country_flag = industrial_age 
				set_primitive_age = industrial_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"beige"
						"yellow"
						"null"
						"null"
					}
				}
			}
			20 = { 
				set_country_flag = machine_age
				set_primitive_age = machine_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"yellow"
						"orange"
						"null"
						"null"
					}
				}
			}
			30 = { 
				set_country_flag = atomic_age 
				set_primitive_age = atomic_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"beige"
						"brown"
						"null"
						"null"
					}
				}
			}
			40 = { 
				set_country_flag = early_space_age 
				set_primitive_age = early_space_age
				change_country_flag = {
					icon = {
						category = "domination"
						file = "domination_21.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"grey"
						"dark_grey"
						"null"
						"null"
					}
				}
			}
		}
	}	
}


create_ageofduskciv_empire = {
	random_list = {
		# Industrial Civilization
		80 = {
			create_late_ageofduskciv_empire = yes
		}
		# Medieval Civilization
		10 = {
			create_early_ageofduskciv_empire = yes
		}
	}
}

setup_ageofduskciv_planet = {
	set_owner = last_created_country
	set_capital = yes
	
	last_created_country = {
		if = {
			limit = { has_country_flag = stone_age }
			prev = {
				while = {
					count = 4
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_crude_huts
				remove_building = building_colony_shelter
			}
		}					
		if = {
			limit = { has_country_flag = bronze_age }
			prev = {
				while = {
					count = 8
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = iron_age }
			prev = {
				while = {
					count = 9
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = late_medieval_age }
			prev = {
				while = {
					count = 10
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = renaissance_age }
			prev = {
				while = {
					count = 12
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_dwellings
				add_building = building_primitive_dwellings
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = steam_age }
			prev = {
				while = {
					count = 16
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_urban_dwellings
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_stone_palace
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = industrial_age }
			prev = {
				while = {
					count = 22
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = machine_age }
			prev = {
				while = {
					count = 24
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = atomic_age }
			prev = {
				while = {
					count = 26
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}
		if = {
			limit = { has_country_flag = early_space_age }
			prev = {
				while = {
					count = 28
					create_pop = {
						species = last_created
					}					
				}
				add_building = building_primitive_farm
				add_building = building_primitive_factory
				add_building = building_primitive_mine
				add_building = building_primitive_power_plant
				add_building = building_primitive_capital
				add_building = building_urban_dwellings
				remove_building = building_colony_shelter
			}
		}		
	}
	random_list = {
		30 = { add_deposit = d_city_ruins }
		40 = { add_deposit = d_failing_infrastructure }
		20 = { add_deposit = d_junk_wastes }
	}
	
	if = {
		limit = {
			last_created_country = {
				OR = {
					has_country_flag = machine_age
					has_country_flag = atomic_age
					has_country_flag = early_space_age				
				}
			}
		}
		create_ageofduskciv_blockers = yes
	}
}

create_ageofduskciv_blockers = {
	add_deposit = d_decrepit_dwellings
	add_deposit = d_failing_infrastructure
}