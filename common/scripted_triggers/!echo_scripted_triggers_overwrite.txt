is_valid_target_fe_stop_atrocities = {
	OR = {
		allows_slavery = yes
		allows_purge = yes
	}
	NOT = { has_ethic = ethic_gestalt_consciousness }
	NOR = {
		has_valid_civic = civic_machine_terminator
		has_valid_civic = civic_hive_devouring_swarm
        has_valid_civic = civic_fanatic_purifiers
        has_valid_civic = civic_vb_psi_soul_eater
	}
}

is_country_type_with_subjects = {
	OR = {
		is_country_type = default
        is_country_type = awakened_fallen_empire
        is_country_type = fallen_empire
	}
}

is_silicon = {
	is_species_class = SLCOD
}

is_energy_being = {
	pop_has_trait = "complex_species_trait_Energy_Being"
}

is_soul_eater = {
	pop_has_trait = "trait_vb_psi_soul_eater"
	from = {
		has_civic = civic_vb_psi_soul_eater
	}
}

is_robot = { # The pop is a robot
	has_trait = "trait_mechanical"
	NAND = {
		exists = owner
		owner = { 
			NOT = { has_technology = "tech_synthetic_workers" }
			NOT = { has_policy_flag = ai_outlawed } 
		}
	}
}

is_dry = {
	OR = {
		is_planet_class = pc_arid
		is_planet_class = pc_desert
		is_planet_class = pc_savannah
		is_planet_class = pc_shrouded_paradise
		is_planet_class = pc_mushroom
	}
}

is_cold = {
	OR = {
		is_planet_class = pc_arctic
		is_planet_class = pc_tundra
		is_planet_class = pc_alpine
		is_planet_class = pc_shrouded_paradise
		is_planet_class = pc_mushroom
	}
}

is_wet = {
	OR = {
		is_planet_class = pc_ocean
		is_planet_class = pc_continental
		is_planet_class = pc_tropical
		is_planet_class = pc_shrouded_paradise
		is_planet_class = pc_mushroom
	}
}

can_have_habitable_deposits = {
	OR = {
		is_planet_class = pc_nuked
		is_planet_class = pc_desert
		is_planet_class = pc_tropical
		is_planet_class = pc_arid
		is_planet_class = pc_continental
		is_planet_class = pc_ocean
		is_planet_class = pc_tundra
		is_planet_class = pc_arctic
		is_planet_class = pc_alpine
		is_planet_class = pc_savannah
		is_planet_class = pc_gaia
		is_planet_class = pc_mushroom
        is_planet_class = pc_shrouded_paradise
        is_planet_class = pc_relic
	}
}

habitable_planet = {
	OR = {
		is_planet_class = pc_desert
		is_planet_class = pc_tropical
		is_planet_class = pc_arid
		is_planet_class = pc_continental
		is_planet_class = pc_ocean
		is_planet_class = pc_tundra
		is_planet_class = pc_arctic
		is_planet_class = pc_alpine
		is_planet_class = pc_savannah
		is_planet_class = pc_gaia
		is_planet_class = pc_city
		is_planet_class = pc_mushroom
        is_planet_class = pc_shrouded_paradise
        is_planet_class = pc_relic
		is_planet_class = pc_outpost
		is_planet_class = pc_hollow
	}
}

is_a_habitable_planet_megastructure = {
	OR = {
		is_planet_class = pc_nuked
		is_planet_class = pc_infested
		is_planet_class = pc_matryoshka
		habitable_planet = yes
		habitable_structure = yes
	}
}

is_shackled_robot = { # The pop is a non-free robot
    NOT = { has_trait = trait_holy_machines }
	has_trait = "trait_mechanical"
	NAND = {
		exists = owner
		owner = {
			OR = {
				AND = {
					has_policy_flag = ai_full_rights 
					OR = {
						has_technology = "tech_synthetic_workers" #Robits don't get rights until they are Synths
                        has_country_flag = robots_have_souls #syndaw.545
					}
				}
				is_mechanical_empire = yes
			}
		}
	}
}

can_destroy_planet_with_PLANET_KILLER_NEUTRON = {
	custom_tooltip = {
		fail_text = is_not_a_habitable_planet_or_megastructure
		is_a_habitable_planet_megastructure = yes
	}
	custom_tooltip = {
		fail_text = is_shielded
		NOR = {
			is_planet_class = pc_shielded
			is_planet_class = pc_ringworld_shielded
            is_planet_class = pc_habitat_shielded
            has_building = building_mem_planetary_shield_generator_heavy
            has_building = building_mem_planetary_shield_generator_orila
            has_modifier = Precursor_Planetary_Shield_on
		}
	}
	custom_tooltip = {
		fail_text = is_not_hostile
		OR = {
			planet_is_hostile_or_crisis = yes
			AND = {
				exists = owner
				owner = {
					is_country_type = primitive
				}
				from.owner = {
					OR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
			}
			AND = { # at war with primitive space owner
				exists = space_owner
				exists = owner
				owner = {
					is_primitive = yes
				}
				space_owner = {
					OR = {
						is_at_war_with = from.owner
						is_country_type = swarm
						is_country_type = extradimensional
						is_country_type = extradimensional_2
						is_country_type = extradimensional_3
						is_country_type = ai_empire
					}
				}
			}
		}
	}
	custom_tooltip = {
		fail_text = is_unpopulated
		OR = {
			num_pops > 0
			is_planet_class = pc_infested
		}
	}
}

can_destroy_planet_with_PLANET_KILLER_GODRAY = {
	custom_tooltip = {
		fail_text = is_not_a_habitable_planet_or_megastructure
		is_a_habitable_planet_megastructure = yes
	}
	custom_tooltip = {
		fail_text = is_shielded
		NOR = {
			is_planet_class = pc_shielded
			is_planet_class = pc_ringworld_shielded
            is_planet_class = pc_habitat_shielded
            has_building = building_mem_planetary_shield_generator_heavy
            has_building = building_mem_planetary_shield_generator_orila
            has_modifier = Precursor_Planetary_Shield_on
		}
	}
	custom_tooltip = {
		#success_text = "is at war with player"
		fail_text = is_not_hostile_or_primitive
		OR = {
			planet_is_hostile = yes
			AND = {
				exists = owner
				owner = { is_country_type = primitive }
			}
			AND = {
				exists = owner
				owner = { is_same_value = from.owner }
			}
		}
	}
	# target own colony
	if = {
		limit = {
			NOR = {
				planet_is_hostile = yes
				AND = {
					exists = owner
					owner = { is_country_type = primitive }
				}
			}
			exists = owner
			owner = {
				is_same_value = from.owner
			}
		}
		custom_tooltip = {
			text = not_owned_test_fire
			exists = owner
			owner = {
				is_same_value = from.owner
			}
		}
	}
}