
###############################################
###############################################
#####                                     #####
#####    Species Discrimination on Job    #####
#####                                     #####
#####    Common scripted_trigggers        #####
#####                                     #####
###############################################
###############################################


#############################
###  Trigger for Country  ###
#############################
#
# Scope: this = country
#

SdjTriggerAvailableCountryRegular = {
	is_ai = no
	is_country_type = default
	NOT = { has_ethic = ethic_gestalt_consciousness }
}

SdjTriggerAvailableCountryGestalt = {
	is_ai = no
	is_country_type = default
	has_ethic = ethic_gestalt_consciousness
}

SdjTriggerAvailableCountryNpc = {
	is_ai = yes
	is_country_type = default
}

#########################
###  Trigger for Pop  ###
#########################
#
# Scope: this = pop
#


SdjTriggerBannedFromRank3_Regular = {
	owner = { SdjTriggerAvailableCountryRegular = yes }
	NOT = { planet = { has_planet_flag = SdjFlagDeregulationOfJob@prev.owner } }
	SdjTriggerBannedFromRank3_Common = yes
}

SdjTriggerBannedFromRank2_Regular = {
	owner = { SdjTriggerAvailableCountryRegular = yes }
	NOT = { planet = { has_planet_flag = SdjFlagDeregulationOfJob@prev.owner } }
	SdjTriggerBannedFromRank2_Common = yes
}

SdjTriggerBannedFromRank1_Regular = {
	owner = { SdjTriggerAvailableCountryRegular = yes }
	NOT = { planet = { has_planet_flag = SdjFlagDeregulationOfJob@prev.owner } }
	SdjTriggerBannedFromRank1_Common = yes
}


SdjTriggerBannedFromRank2_Gestalt = {
	owner = { SdjTriggerAvailableCountryGestalt = yes }
	NOT = { planet = { has_planet_flag = SdjFlagDeregulationOfJob@prev.owner } }
	SdjTriggerBannedFromRank2_Common = yes
}

SdjTriggerBannedFromRank1_Gestalt = {
	owner = { SdjTriggerAvailableCountryGestalt = yes }
	NOT = { planet = { has_planet_flag = SdjFlagDeregulationOfJob@prev.owner } }
	SdjTriggerBannedFromRank1_Common = yes
}




### Scope: this = pop, Used for both of menu and actual effects
SdjTriggerBannedFromRank3_Common = {
	species = {
		OR = {
			AND = {
				has_species_flag = SdjFlagForbiddenSeparately_@prev.owner
				has_species_flag = SdjFlagForbiddenRank3_@prev.owner
			}
			AND = {
				NOT = { has_species_flag = SdjFlagForbiddenSeparately_@prev.owner }
				prev.owner = { has_country_flag = SdjFlagDefaultForbidRank3 }
			}
		}
	}
}

SdjTriggerBannedFromRank2_Common = {
	species = {
		OR = {
			AND = {
				has_species_flag = SdjFlagForbiddenSeparately_@prev.owner
				has_species_flag = SdjFlagForbiddenRank2_@prev.owner
			}
			AND = {
				NOT = { has_species_flag = SdjFlagForbiddenSeparately_@prev.owner }
				prev.owner = { has_country_flag = SdjFlagDefaultForbidRank2 }
			}
		}
	}
}

SdjTriggerBannedFromRank1_Common = {
	species = {
		OR = {
			AND = {
				has_species_flag = SdjFlagForbiddenSeparately_@prev.owner
				has_species_flag = SdjFlagForbiddenRank1_@prev.owner
			}
			AND = {
				NOT = { has_species_flag = SdjFlagForbiddenSeparately_@prev.owner }
				prev.owner = { has_country_flag = SdjFlagDefaultForbidRank1 }
			}
		}
	}
}

SdjTriggerBannedFromAll_Simple = {
	species = {
		OR = {
			AND = {
				has_species_flag = SdjFlagForbiddenSeparately_@prev.owner
				OR = {
					has_species_flag = SdjFlagForbiddenRank3_@prev.owner
					SdjTriggerAvailableCountryGestalt = yes
				}
				has_species_flag = SdjFlagForbiddenRank2_@prev.owner
				has_species_flag = SdjFlagForbiddenRank1_@prev.owner
			}
			AND = {
				NOT = { has_species_flag = SdjFlagForbiddenSeparately_@prev.owner }
				prev.owner = {
					OR = {
						has_country_flag = SdjFlagDefaultForbidRank3
						SdjTriggerAvailableCountryGestalt = yes
					}
					has_country_flag = SdjFlagDefaultForbidRank2
					has_country_flag = SdjFlagDefaultForbidRank1
				}
			}
		}
	}
}



###############################
###  Check Living Standard  ###
###############################

### Scope: this = pop
SdjTriggerLivingStandardRank4 = {
	OR = {
		has_living_standard = { type = living_standard_chemical_bliss }
		has_living_standard = { type = living_standard_utopian }
		has_living_standard = { type = living_standard_shared_burden }	
	}
}


SdjTriggerLivingStandardRank3a = {
	OR = {
		has_living_standard = { type = living_standard_academic_privilege }	
		SdjTriggerLivingStandardRank3b = yes
	}
}

SdjTriggerLivingStandardRank3b = {
	has_living_standard = { type = living_standard_good }
}

SdjTriggerLivingStandardRank2 = {
	NOR = {
		SdjTriggerLivingStandardRank4 = yes
		SdjTriggerLivingStandardRank3b = yes
		SdjTriggerLivingStandardRank1 = yes
	}
}

SdjTriggerLivingStandardRank1 = {
	OR = {
		has_living_standard = { type = living_standard_stratified }
		has_living_standard = { type = living_standard_subsistence }
	}
}



