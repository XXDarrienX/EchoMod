
namespace = cc_events_performance

country_event = {
	id = cc_events_performance.11112
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					AND = {
						pop_percentage = {
							percentage < 0.4
							limit = { is_same_species = root }
						}
						any_owned_pop = {
							NOT = { is_same_species = root }
							is_robot_pop = no
							cc_has_happiness = yes
							NOR = {
								is_enslaved = yes
								is_being_purged = yes
							}
						}
					}
				
					any_owned_pop = {
						NOR = {
							is_subspecies = prev
							is_same_species = prev
						}
						is_robot_pop = no
						cc_has_happiness = yes
						NOR = {
							is_enslaved = yes
							is_being_purged = yes
						}
						root = {
							pop_percentage = {
								percentage > 0.1
								limit = { is_same_species = prev }
							}
						}
					}
				}
			}
			set_timed_country_flag = {
				flag = cc_eventperf_has_minority
				days = 365
			}
			if = {
				limit = {
					any_owned_pop = {
						NOR = {
							is_subspecies = prev
							is_same_species = prev
						}
						is_robot_pop = no
						cc_has_happiness = yes
						NOR = {
							is_enslaved = yes
							is_being_purged = yes
						}
						prev = {
							pop_percentage = {
								percentage > 0.2
								limit = { is_same_species = prev }
							}
						}
					}
				}
				set_timed_country_flag = {
					flag = cc_eventperf_has_large_minority
					days = 365
				}
			}
		}
		if = {
			limit = {
				any_owned_pop = {
					NOR = {
						is_subspecies = prev
						is_same_species = prev
					}
					is_robot_pop = no
					cc_has_happiness = yes
					NOR = {
						is_enslaved = yes
						is_being_purged = yes
					}
					owner = {
						pop_percentage = {
							percentage > 0.05
							limit = { is_same_species = prev }
						}
					}
				}
			}
			set_timed_country_flag = {
				flag = cc_eventperf_a_small_minority
				days = 365
			}
			if = {
				limit = {
					any_owned_pop = {
						NOR = {
							is_subspecies = prev
							is_same_species = prev
						}
						is_robot_pop = no
						cc_has_happiness = yes
						NOR = {
							is_enslaved = yes
							is_being_purged = yes
						}
						owner = {
							pop_percentage = {
								percentage > 0.2
								limit = { is_same_species = prev }
							}
						}
					}
				}
				set_timed_country_flag = {
					flag = cc_eventperf_has_minority
					days = 365
				}
				if = {
					limit = {
						pop_percentage = {
							percentage < 0.4
							limit = { is_same_species = owner_species }
						}
					}
					set_timed_country_flag = {
						flag = cc_eventperf_founder_is_minority
						days = 365
					}
				}
			}
		}
		if = {
			limit = {

				NOR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}

				pop_percentage = {
					percentage > 0.18
					limit = { has_ethic = ethic_xenophobe }
				}
			}
			set_timed_country_flag = {
				flag = cc_eventperf_has_lots_of_xenophobes_min
				days = 365
			}
		}
		if = { #best keep this one as referred to in quite a few places
			limit = {
				pop_percentage = {
					percentage > 0.02
					limit = {
						NOR = {
							is_enslaved = yes
							is_being_purged = yes
						}
						has_pop_flag = cc_literally_xenophile_manifested
					}
				}
			}
			set_timed_country_flag = {
				flag = cc_eventperf_literally_xenophiles
				days = 365
			}
		}

		if = {
			limit = {

				count_pop_factions = {
					limit = {	
						is_pop_faction_type = traditionalist
						support > 0.1
					}
					count = 1
				}
			}
			set_timed_country_flag = {
				flag = cc_enough_spiritualists
				days = 365
			}
		}
		if = {
			limit = {

				count_pop_factions = {
					limit = {	
						is_pop_faction_type = technologist
						support > 0.33
					}
					count = 1
				}
			}
			set_timed_country_flag = {
				flag = cc_many_materialists
				days = 365
			}
			if = {
				limit = {
					count_pop_factions = {
						limit = {	
							is_pop_faction_type = technologist
							support > 0.5
						}
						count = 1
					}
				}
				set_timed_country_flag = {
					flag = cc_lots_materialists
					days = 365
				}
			}
		}
		if = {
			limit = {

				count_pop_factions = {
					limit = {	
						is_pop_faction_type = progressive
						support > 0.1
					}
					count = 1
				}
			}
			set_timed_country_flag = {
				flag = cc_enough_egalitarians
				days = 365
			}
		}
		if = {
			limit = {

				count_pop_factions = {
					limit = {	
						is_pop_faction_type = totalitarian
						support > 0.4
					}
					count = 1
				}
			}
			set_timed_country_flag = {
				flag = cc_many2_authoritarians
				days = 365
			}
		}
	}
}



