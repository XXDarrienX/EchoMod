namespace = gpm_decisions


# event to spawn a new deposit in system based on planet modifiers.
# triggered on colony
country_event = { 
    id = gpm_decisions.1 
    hide_window = yes 
    is_triggered_only = yes
 
	trigger = {
        is_country_type = default
        is_ai = yes
        has_technology = gpm_tech_space_surveying
	}
	
	immediate = {
        every_owned_planet = {
            limit = { is_colony = yes }
            planet_event = { id = gpm_decisions.2 }
        }
	}
}

planet_event = { 
    id = gpm_decisions.2
    hide_window = yes 
    is_triggered_only = yes

	trigger = {
        owner = { is_ai = yes }
        solar_system = {
            any_system_planet = {
                OR = {
                    has_modifier = Frequent_Thunderstorms 
                    has_modifier = Global_Thunderstorms
                    has_modifier = Highly_Charged_Air_Particles
                    has_modifier = Hydrogen_Mist
                    has_modifier = Hydrogen_Ice
                    has_modifier = Nitrogen_Ice
                    has_modifier = Chlorine_Planet
                    has_modifier = Phosphorus_Planet
                    has_modifier = Sulfur_Planet
                    has_modifier = Iron_Planet
                    has_modifier = Carbon_Planet
                    has_modifier = Iron_Rich
                    has_modifier = Titanium_Rich
                    has_modifier = Gold_Rich
                    has_modifier = Platinum_Rich
                    has_modifier = Mercury_Atmosphere
                    has_modifier = Cobalt_Rich
                    has_modifier = Lithium_Rich
                    has_modifier = mineral_rich
                    has_modifier = mineral_rich_2
                    has_modifier = ultra_rich
                    has_modifier = ultra_rich_2
                    has_modifier = Periodic_Meteor_Showers
                    has_modifier = asteroid_impacts
                    has_modifier = asteroid_impacts_2
                    has_modifier = Extensive_Cavern_System
                }
                has_deposit = no
            }
        }
	}
	
	immediate = {
        solar_system = {
            random_system_planet = {
                limit = {
                    OR = {
                        has_modifier = Frequent_Thunderstorms 
                        has_modifier = Global_Thunderstorms
                        has_modifier = Highly_Charged_Air_Particles
                        has_modifier = Hydrogen_Mist
                        has_modifier = Hydrogen_Ice
                        has_modifier = Nitrogen_Ice
                        has_modifier = Chlorine_Planet
                        has_modifier = Phosphorus_Planet
                        has_modifier = Sulfur_Planet
                        has_modifier = Iron_Planet
                        has_modifier = Carbon_Planet
                        has_modifier = Iron_Rich
                        has_modifier = Titanium_Rich
                        has_modifier = Gold_Rich
                        has_modifier = Platinum_Rich
                        has_modifier = Mercury_Atmosphere
                        has_modifier = Cobalt_Rich
                        has_modifier = Lithium_Rich
                        has_modifier = mineral_rich
                        has_modifier = mineral_rich_2
                        has_modifier = ultra_rich
                        has_modifier = ultra_rich_2
                        has_modifier = Periodic_Meteor_Showers
                        has_modifier = asteroid_impacts
                        has_modifier = asteroid_impacts_2
                        has_modifier = Extensive_Cavern_System
                    }
                    has_deposit = no
                }
                if = {
                    limit = { has_modifier = Frequent_Thunderstorms }
                    random_list = {
                        10 = { add_deposit = d_physics_4 }
                        10 = { add_deposit = d_energy_3 }
                    }
                }
                else_if = {
                    limit = { has_modifier = Global_Thunderstorms }
                    random_list = {
                        10 = { add_deposit = d_physics_6 }
                        10 = { add_deposit = d_energy_5 }
                    }
                }
                else_if = {
                    limit = { has_modifier = Highly_Charged_Air_Particles }
                    add_deposit = d_physics_6
                }
                else_if = {
                    limit = {
                        OR = {
                            has_modifier = Hydrogen_Mist
                            has_modifier = Hydrogen_Ice
                            has_modifier = Nitrogen_Ice
                            has_modifier = Chlorine_Planet
                            has_modifier = Phosphorus_Planet
                            has_modifier = Sulfur_Planet
                        }
                    }
                    add_deposit = d_energy_5
                }
                else_if = {
                    limit = {
                        OR = {
                            has_modifier = Iron_Planet
                            has_modifier = Carbon_Planet
                            has_modifier = Iron_Rich
                            has_modifier = Gold_Rich
                            has_modifier = Mercury_Atmosphere
                        }
                    }
                    add_deposit = d_minerals_7
                }
                else_if = {
                    limit = {
                        OR = {
                            has_modifier = Titanium_Rich
                            has_modifier = Platinum_Rich
                            has_modifier = Cobalt_Rich
                            has_modifier = Lithium_Rich
                        }
                    }
                    add_deposit = d_alloys_2
                }
            }
        }
	}
}

# message event letting player know they have to look at planets
planet_event = {
    id = gpm_decisions.3
    title = "gpm_decisions.3.name"
    desc = "gpm_decisions.3.desc"
	picture = GFX_evt_gpm_spaceship_graveyard
	show_sound = event_radio_chatter_02
	location = root
	
	is_triggered_only = yes
	
	
	trigger = {
        owner = { is_ai = no }
        NOT = { has_planet_flag = gmp_decision_message_fired }
		solar_system = {
            any_system_planet = {
                OR = {
                    has_modifier = Frequent_Thunderstorms 
                    has_modifier = Global_Thunderstorms
                    has_modifier = Highly_Charged_Air_Particles
                    has_modifier = Hydrogen_Mist
                    has_modifier = Hydrogen_Ice
                    has_modifier = Nitrogen_Ice
                    has_modifier = Chlorine_Planet
                    has_modifier = Phosphorus_Planet
                    has_modifier = Sulfur_Planet
                    has_modifier = Iron_Planet
                    has_modifier = Carbon_Planet
                    has_modifier = Iron_Rich
                    has_modifier = Titanium_Rich
                    has_modifier = Gold_Rich
                    has_modifier = Platinum_Rich
                    has_modifier = Mercury_Atmosphere
                    has_modifier = Cobalt_Rich
                    has_modifier = Lithium_Rich
                    has_modifier = mineral_rich
                    has_modifier = mineral_rich_2
                    has_modifier = ultra_rich
                    has_modifier = ultra_rich_2
                    has_modifier = Periodic_Meteor_Showers
                    has_modifier = asteroid_impacts
                    has_modifier = asteroid_impacts_2
                    has_modifier = Extensive_Cavern_System
                }
                has_deposit = no
            }
        }
	}
	
	
	immediate = {
        set_planet_flag = gmp_decision_message_fired
	}
	
	option = {
		name = gpm_decisions.2.OK
	}
}