namespace = tfx

# Visions in the Night

country_event = {
	id = tfx.76756
	title = "tfx.76756.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = tfx.76756.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = tfx.76756.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = tfx.76756.desc.mach
	}
	
	
	picture = GFX_evt_space_monster
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	#add in a from to save event's ship as an event target for naming reasons? (ie. localisation files)
	
	after = {
		FROM = {
			leader = {
				if = {
					limit = { owner = {
						NOR = {
							has_authority = auth_hive_mind
							has_authority = auth_machine_intelligence
						} 
					}	}
					add_trait = leader_trait_tf_visions	
				}
				else = {
					if = {
						limit = { owner = {
						has_authority = auth_hive_mind
						}	}
					add_trait = leader_trait_tf_collective_link_interfered
					}	
					else = {
						limit = { owner = {
							has_authority = auth_machine_intelligence
						}	}
					add_trait = leader_trait_tf_circuit_power_fluctuation
					}	
				}	
				save_global_event_target_as = tf_firstscientist	
				set_leader_flag = tf_leader_firstscientist
			}
		}	
	}
	
	option = { 
		name = tfx.76756.a
	}
}

# Translation Complete

country_event = {
	id = tfx.76757
	title = "tfx.76757.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = tfx.76757.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = tfx.76757.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = tfx.76757.desc.mach
	}
	picture = GFX_evt_tf_tablet_discovered
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		log = "---- Fired Event tfx.76757 ----"
		log = "---- TABLET_TRANSLATED tfx ----"
	}
	
	option = {
		name = tfx.76757.a
		owner = {
			set_country_flag = tf_country_tablet_kept
		}
		#!
		hidden_effect = { 
			country_event = { id = tfx.76759 days = 365 random = 365 }
		}
	}
	
	option = {
		name = tfx.76757.b
		owner = {
			set_country_flag = tf_country_tablet_sold
			add_energy = 350
			add_minerals = 250
		}
		#!
		hidden_effect = {
			country_event = { id = tfx.76764 days = 365 random = 365 }
		}
	}
}
