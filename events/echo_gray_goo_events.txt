############################
#
# Gray Goo Events
#
# Written by Henrik Thyrwall
#
############################

namespace = graygoo


# Tell us about yourselves
country_event = {
	id = graygoo.121
	title = "graygoo.120_title"
	desc = "graygoo.121.desc"

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:gate_builders
	}

	is_triggered_only = yes

	immediate = {
		set_country_flag = gate_builder_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = gate_builder_diplomacy_engaged }
	}

	option = {
		name = graygoo.121.a
		response_text = graygoo.121.a.response
		is_dialog_only = yes
	}
	option = {
		name = graygoo.121.b
		response_text = graygoo.121.b.response
		is_dialog_only = yes
	}
	option = {
		name = graygoo.121.c
		response_text = graygoo.121.c.response
		is_dialog_only = yes
	}
	option = {
		name = graygoo.121.d
		hidden_effect = {
			country_event = { id = graygoo.122 }
		}
	}
	option = {
		name = graygoo.121.e
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = graygoo.119 }
		}
	}
	#MOD BEGINS
	option = {
		name = graygoo.121.mod
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = graygoo.69 }
		}
		trigger = {
			AND = {
				has_country_flag = shiva_system_finished
				root = { has_origin = origin_shiva }
			}
			NOT = { 
				OR = {
					has_country_flag = inquired_dessanu_about_shiva
					has_country_flag = gate_builders_hostility
				}
			}
		}
	}
	option = {
		name = graygoo.121.mod_2
		default_hide_option = yes
		hidden_effect = {
			country_event = { id = graygoo.696 }
		}
		trigger = {
			AND = {
				has_country_flag = shiva_fully_excavated
				owner = { has_origin = origin_shiva }
			}
			NOT = { 
				OR = {
					has_country_flag = inquired_dessanu_about_past
					has_country_flag = gate_builders_hostility
				}
			}
		}
	}
}
country_event = {
	id = graygoo.69
	title = "graygoo.120_title"
	desc = "graygoo.69.desc"
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:gate_builders
	}
	
	is_triggered_only = yes

	immediate = {
		set_country_flag = gate_builder_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = gate_builder_diplomacy_engaged }
	}
	
	option = {
		name = graygoo.69.a
		hidden_effect = {
			set_country_flag = inquired_dessanu_about_shiva
			add_resource = { unity = 1000	}
		}
	}
}

#Dessanu contact after Shiva excavated
country_event = {
	id = graygoo.696
	title = graygoo.696.name
	desc = graygoo.696.desc
	picture = GFX_evt_satellite_in_orbit
	is_triggered_only = yes

	trigger = {
		has_country_flag = inquired_dessanu_about_shiva
		mid_game_years_passed >= 1
		NOT = { has_country_flag = mahadeva_found }
	}

	immediate = { 
	}

	option = {
		name = graygoo.696.a
		country_event = { id = graygoo.6969 days = 0 }
		set_country_flag = mahadeva_found
	}
}
#Dessanu talk about Colony
country_event = {
	id = graygoo.6969
	title = graygoo.120.title
	desc = graygoo.6969.desc

	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:gate_builders
	}

	immediate = {
		event_target:shiva_star = {
			spawn_system = {
				min_distance >= 40
				max_distance <= 120
				min_orientation_angle = 50
				max_orientation_angle = 100
				initializer = mahadeva_system
			}
		}
	}

	option = {
		name = graygoo.6969.a
		begin_event_chain = {
			event_chain = shiva_system_chain
			target = this
		}
		create_point_of_interest = {
			id = shiva_colony_system_poi
			name = shiva_colony_system_poi_title
			desc = shiva_colony_system_poi_desc
			event_chain = shiva_system_chain
			location = event_target:shiva_star_2
		}
	}
}