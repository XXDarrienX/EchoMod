

namespace = precursor

### The Vultaum Star Assembly

# Vultaum Home System Discovered
country_event = {
	id = precursor.100
	title = "precursor.100.name"
	desc = "precursor.100.desc"
	picture = GFX_evt_federation_fleet
	location = event_target:vultaumar
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = vultaumar }
			save_event_target_as = vultaumar
			random_system_planet = {
				limit = { has_planet_flag = vultaum_homeworld }
				# Start -guilli
				# broken planet thus we give it a guaranteed shipyards and a deposit bonus
				while = {
					count = 5
					create_ambient_object = {
						type = "medium_debris_01_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				while = {
					count = 5
					create_ambient_object = {
						type = "medium_debris_02_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				while = {
					count = 15
					create_ambient_object = {
						type = "small_debris_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				random_moon = {
					gpm_spawn_precursor_tomb_world_convert_moon = yes
				}
			}
			random_system_planet = {
				limit = { is_planet_class = pc_toxic }
				gpm_spawn_precursor_tomb_world_convert_big = yes
				
			}			
			
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = yes }
				add_deposit = d_exotic_gases_5
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = gpm_arcane_technology_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = gpm_arcane_technology_deposit
			}

			# End -guilli
		}
		observer_event = { id = observer.56 }
	}
	
	option = {
		name = "precursor.100.a"
		end_event_chain = "vultaum_chain"
		begin_event_chain = {
			event_chain = "vultaum_homeworld_chain"
			target = ROOT
		}
		create_point_of_interest = {
			id = vultaum.1
			name = "vultaum_1_poi"
			desc = "vultaum_1_poi_desc"
			event_chain = vultaum_homeworld_chain
			location = event_target:vultaumar
		}
	}
}


### The Yuht Empire

# Yuht Home System Discovered 
country_event = {
	id = precursor.600
	title = "precursor.600.name"
	desc = "precursor.600.desc"
	picture = GFX_evt_federation_fleet
	location = event_target:yuhtaan
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = yuhtaan }
			save_event_target_as = yuhtaan
			random_system_planet = {
				limit = { has_planet_flag = yuht_homeworld }
				# Start -guilli
				# broken planet thus we give it a guaranteed shipyards and a deposit bonus
				while = {
					count = 5
					create_ambient_object = {
						type = "medium_debris_01_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				while = {
					count = 5
					create_ambient_object = {
						type = "medium_debris_02_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				while = {
					count = 15
					create_ambient_object = {
						type = "small_debris_object"
						entity_offset_height = { min = -10 max = -20 }
						location = this
					}
					last_created_ambient_object = {
						set_location = {
							target = prev
							distance = 15
							angle = random
						}
					}
				}
				random_moon = {
					gpm_spawn_precursor_tomb_world_convert_city = yes
				}
			}
			# random_system_planet = {
			# 	limit = { is_planet_class = pc_barren is_moon = no }
			# 	gpm_spawn_precursor_tomb_world_convert_big = yes
				
			# }			
			
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = yes }
				add_deposit = d_exotic_gases_5
				random_moon = {
					gpm_spawn_precursor_tomb_world_convert_moon = yes
				}
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = gpm_arcane_technology_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = gpm_arcane_technology_deposit
			}

			# End -guilli
		}
		observer_event = { id = observer.57 }
	}
	
	option = {
		name = "precursor.100.a"
		end_event_chain = "yuht_chain"
		begin_event_chain = {
			event_chain = "yuht_homeworld_chain"
			target = ROOT
		}
		create_point_of_interest = {
			id = yuht.1
			name = "yuht_1_poi"
			desc = "yuht_1_poi_desc"
			event_chain = yuht_homeworld_chain
			location = event_target:yuhtaan
		}
	}
}

### The First League

# First League Home System Discovered
country_event = {
	id = precursor.1100
	title = "precursor.1100.name"
	desc = "precursor.1100.desc"
	picture = GFX_evt_federation_fleet
	location = event_target:fen_habbanis
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = fen_habbanis }
			save_event_target_as = fen_habbanis
			# Start -guilli
			random_system_planet = {
				limit = { has_planet_flag = first_league_homeworld }
				set_planet_flag = "gpm_is_precursor_world"
				# ecumopolis world.
				if = {
					limit = {
						NOT = { has_global_flag = gpm_modifiers_precursor_disabled }
					}
					add_modifier = { days = -1 modifier = "Precursor_Shipyards" }
					solar_system = {
						set_star_flag = gpm_precursor_shipyards_star
					}
					add_modifier = { days = -1 modifier = "Precursor_Capital_Complex" }
				}
				gpm_set_shipyards_objects = yes
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = no }
				add_deposit = gpm_arcane_technology_deposit
			}
			# End -guilli
		}
		observer_event = { id = observer.58 }
	}
	
	option = {
		name = "precursor.100.a"
		end_event_chain = "first_league_chain"
		begin_event_chain = {
			event_chain = "first_league_homeworld_chain"
			target = ROOT
		}
		create_point_of_interest = {
			id = first_league.1
			name = "first_league_1_poi"
			desc = "first_league_1_poi_desc"
			event_chain = first_league_homeworld_chain
			location = event_target:fen_habbanis
		}
	}
}



### The Irassian Concordat

# Irassian Home System Discovered
country_event = {
	id = precursor.1600
	title = "precursor.1600.name"
	desc = "precursor.1600.desc"
	picture = GFX_evt_federation_fleet
	location = event_target:irass
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = irass }
			save_event_target_as = irass
			# Start -guilli
			random_system_planet = {
				limit = { has_planet_flag = irassian_homeworld }
				set_planet_flag = "gpm_is_precursor_world"
				# normal planet thus we give it a guaranteed shipyards and two random precursor modifiers.
				if = {
					limit = {
						NOT = { has_global_flag = gpm_modifiers_precursor_disabled }
					}
					add_modifier = { days = -1 modifier = "Precursor_Shipyards" }
					solar_system = {
						set_star_flag = gpm_precursor_shipyards_star
					}
					add_modifier = { days = -1 modifier = "Precursor_Capital_Complex" }
					random_list = {
						10 = { add_modifier = { days = -1 modifier = "Precursor_Planetary_Gun" } }
						10 = { add_modifier = { days = -1 modifier = "Precursor_Bunker_Grid" } }
						10 = { add_modifier = { days = -1 modifier = "Precursor_Mechs" } }
						10 = { add_modifier = { days = -1 modifier = "Precursor_Eternal_Fortress" } }
					}
				}
				gpm_set_shipyards_objects = yes
				add_modifier = { modifier = terraforming_candidate_precursor days = -1 }
			}
			random_system_planet = {
				limit = { has_deposit = no OR = { gpm_is_planet_gas_giant = no is_asteroid = no } }
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
				add_deposit = d_living_metal_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_gas_giant = yes }
				add_deposit = d_exotic_gases_5
			}
			every_system_planet = {
				limit = { is_planet_class = pc_frozen }
				gpm_spawn_precursor_tomb_world_convert_moon = yes
			}
			random_system_planet = {
				limit = { has_deposit = no OR = { gpm_is_planet_gas_giant = no gpm_is_planet_asteroid = no } }
				add_deposit = gpm_arcane_technology_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no OR = { gpm_is_planet_gas_giant = no gpm_is_planet_asteroid = no } }
				add_deposit = gpm_arcane_technology_deposit
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_asteroid = yes }
				add_deposit = d_rare_crystals_5
			}
			random_system_planet = {
				limit = { has_deposit = no gpm_is_planet_molten = yes }
				add_deposit = d_alloys_5
				add_deposit = d_alloys_5
			}
			# End -guilli
		}
		observer_event = { id = observer.59 }
	}
	
	option = {
		name = "precursor.100.a"
		end_event_chain = "irassian_chain"
		begin_event_chain = {
			event_chain = "irassian_homeworld_chain"
			target = ROOT
		}
		hidden_effect = {
			create_point_of_interest = {
				id = irassian.1
				name = "irassian_1_poi"
				desc = "irassian_1_poi_desc"
				event_chain = irassian_homeworld_chain
				location = event_target:irass
			}
		}
	}
}

### Cybrex

# Cybrex Home System Discovered
country_event = {
	id = precursor.2100
	title = "precursor.2100.name"
	desc = "precursor.2100.desc"
	picture = GFX_evt_federation_fleet
	location = event_target:cybrex
	
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = { has_star_flag = cybrex }
			save_event_target_as = cybrex
			# Start -guilli
			random_system_planet = {
				limit = { is_star = yes }
				add_modifier = { modifier = Singing_Star days = -1 }
				add_modifier = { modifier = Precursor_Star_Filter days = -1 }
				clear_deposits = yes
				add_deposit = gpm_arcane_technology_deposit
				add_deposit = gpm_arcane_technology_deposit
				add_deposit = gpm_arcane_technology_deposit
				#add_deposit = gpm_trade_deposit
			}
			# End -guilli
		}
		observer_event = { id = observer.60 }
	}
	
	option = {
		name = "precursor.100.a"
		end_event_chain = "cybrex_chain"
		begin_event_chain = {
			event_chain = "cybrex_homeworld_chain"
			target = ROOT
		}
		create_point_of_interest = {
			id = cybrex.1
			name = "cybrex_1_poi"
			desc = "cybrex_1_poi_desc"
			event_chain = cybrex_homeworld_chain
			location = event_target:cybrex
		}
	}
}