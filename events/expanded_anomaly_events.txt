############################
#
# Anomaly Events
#
############################

namespace = anomalymod

# ROOT = ship scope
# FROM = planet scope

##################################
# Simple Anomaly Events
# Reserved 1 - 19
##################################

# discover recovered tomb world
ship_event = {
	id = anomalymod.1
	title = "anomalymod.1.name"
	desc = "anomalymod.1.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
			
	immediate = {
		FROM = {
			add_deposit = d_radioactive_wasteland
		}
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}

	option = {
		name = REMARKABLE
		FROM = {
			add_modifier = {
				modifier = "recovered_tomb_world"
				days = -1
			}
		}
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Discover closed wormhole
ship_event = {
	id = anomalymod.2
	title = "anomalymod.2.name"
	desc = "anomalymod.2.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			add_seen_bypass_type = wormhole
		}
	}
			
	option = {
		name = REMARKABLE
		leader = {
			add_experience = 200
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_wormhole_stabilization } }
				add_research_option = tech_wormhole_stabilization
				add_tech_progress = {
					tech = tech_wormhole_stabilization
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

# Discover merged black hole
ship_event = {
	id = anomalymod.3
	title = "anomalymod.3.name"
	desc = "anomalymod.3.desc"
	picture = GFX_evt_black_hole
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { from = { clear_deposits = yes } }
			
	option = {
		name = FASCINATING
		leader = {
			add_experience = 200
		}
		from = {
			set_deposit = d_physics_4
		}
	}
}

# Discover dark matter
ship_event = {
	id = anomalymod.4
	title = "anomalymod.4.name"
	desc = "anomalymod.4.desc"
	picture = GFX_evt_black_hole
	location = FROM
	
	is_triggered_only = yes
	
	immediate = { from = { clear_deposits = yes } }
			
	option = {
		name = anomalymod.4.a
		leader = {
			add_experience = 200
		}
		from = {
			add_dark_matter = yes
		}
	}
}

# Robotic miners
ship_event = {
	id = anomalymod.5
	title = "anomalymod.5.name"
	desc = "anomalymod.5.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
			
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = { has_authority = auth_hive_mind }
		}
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = { has_authority = auth_machine_intelligence }
		}
		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_robomodding_m }
				}
				add_research_option = tech_robomodding_m
				add_tech_progress = {
					tech = tech_robomodding_m
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
	}
	option = {
		name = anomalymod.5.a
		trigger = {
			owner = {
				NOR = {
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				}
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_powered_exoskeletons } }
				give_technology = { tech = tech_powered_exoskeletons }
			}
			if = {
				limit = {
					NOT = { has_technology = tech_robotic_workers }
				}
				add_research_option = tech_robotic_workers
				add_tech_progress = {
					tech = tech_robotic_workers
					progress = 0.15
				}
			}
			else_if = {
				limit = {
					NOT = { has_technology = tech_robomodding }
				}
				add_research_option = tech_robomodding
				add_tech_progress = {
					tech = tech_robomodding
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier2researchreward
					min = @tier2researchmin
					max = @tier2researchmax
				}
			}
		}
	}
	option = {
		name = anomalymod.5.b
		allow = {
			owner = {
				resource_stockpile_compare = { resource = minerals value >= 250 }
			}
		}
		owner = {
			add_resource = { minerals = -250 }
		}
		from = {
			add_deposit = d_minerals_3
			add_deposit = d_alloys_1
		}
	}
}

# mineral processing facility
ship_event = {
	id = anomalymod.6
	title = "anomalymod.6.name"
	desc = "anomalymod.6.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
			
	option = {
		name = INTERESTING
		owner = {
			if = {
				limit = {
					NOT = { has_technology = tech_mineral_purification_1 }
				}
				add_research_option = tech_mineral_purification_1
				add_tech_progress = {
					tech = tech_mineral_purification_1
					progress = 0.25
				}
			}
			else_if = {
				limit = {
					has_technology = tech_mineral_purification_1
					NOT = { has_technology = tech_mineral_purification_2 }
				}
				add_research_option = tech_mineral_purification_2
				add_tech_progress = {
					tech = tech_mineral_purification_2
					progress = 0.15
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
	}
}

# strategic resource
ship_event = {
	id = anomalymod.7
	title = "anomalymod.7.name"
	desc = "anomalymod.7.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from.clear_deposits = yes
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
			
	option = {
		name = INTRIGUING
		from = {
			random_list = {
				5 = { set_deposit = d_volatile_motes_1 }
				3 = { set_deposit = d_volatile_motes_2 }
				1 = { set_deposit = d_volatile_motes_3 }
				1 = { set_deposit = d_rare_crystals_2 }
			}
		}
	}
}

# Friendly Wildlife
ship_event = {
	id = anomalymod.8
	title = "anomalymod.8.name"
	desc = "anomalymod.8.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}

	option = {
		name = INTERESTING
		from = {
			every_deposit = {
				limit = { is_deposit_type = d_dangerous_wildlife_blocker }
				clear_blocker = yes
			}
			add_deposit = d_alien_pets_deposit
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Food rich planet
ship_event = {
	id = anomalymod.9
	title = "anomalymod.9.name"
	desc = "anomalymod.9.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		custom_tooltip = "anomaly.4095.a.tooltip"
		hidden_effect = {
			from = {
				add_modifier = {
					modifier = "lush_planet"
					days = -1
				}
				add_deposit = d_black_soil
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Food poor planet
ship_event = {
	id = anomalymod.10
	title = "anomalymod.10.name"
	desc = "anomalymod.10.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = UNFORTUNATE
		from = {
			add_modifier = {
				modifier = "bleak_planet"
				days = -1
			}
			hidden_effect = {
				random_deposit = {
					limit = {
						OR = {
							is_deposit_type = d_lichen_fields
							is_deposit_type = d_bountiful_plains
							is_deposit_type = d_rugged_woods
							is_deposit_type = d_green_hills
							is_deposit_type = d_forgiving_tundra
							is_deposit_type = d_boggy_fens
							is_deposit_type = d_nutritious_mudland
							is_deposit_type = d_great_river
							is_deposit_type = d_fungal_caves
							is_deposit_type = d_lush_jungle
							is_deposit_type = d_fertile_lands
						}
					}
					remove_deposit = yes
				}
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Sand Worms
ship_event = {
	id = anomalymod.11
	title = "anomalymod.11.name"
	desc = "anomalymod.11.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	option = {
		name = FASCINATING
		from = {
			add_deposit = d_dangerous_wildlife_blocker
			add_deposit = d_sand_worms
		}
	}
}

# Pitharan Moon
ship_event = {
	id = anomalymod.12
	title = "anomalymod.12.name"
	desc = "anomalymod.12.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = {
			random_moon = {
				limit = { uninhabitable_regular_planet = yes }
				save_event_target_as = pitharan_moon
			}
		}
	}

	option = {
		name = EXCELLENT
		custom_tooltip = "anomaly.4095.a.tooltip"
		hidden_effect = {
			from = {
				add_modifier = {
					modifier = "lush_planet"
					days = -1
				}
				add_deposit = d_pitharan_fields
			}
		}
		event_target:pitharan_moon = {
			hidden_effect = {
				surveyed = { set_surveyed = yes surveyor = root.owner }
			}
			set_deposit = d_exotic_gases_3
		}
	}
}

# Przybylski's Star
ship_event = {
	id = anomalymod.13
	title = "anomalymod.13.name"
	desc = "anomalymod.13.desc"
	picture = GFX_evt_ship_in_orbit_2
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		leader = {
			save_event_target_as = przybylski_star_leader
		}
	}
	
	option = {
		name = PECULIAR
		FROM = {
			enable_special_project = {
				name = "PRZYBZLSKI_STAR_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
# Special Project Complete
ship_event = {
	id = anomalymod.14
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.14.desc"
	picture = GFX_evt_ship_in_orbit_2
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = REMARKABLE
		custom_tooltip = anomalymod.14.a.tooltip
		hidden_effect = {
			FROMFROM = {
				set_deposit = d_physics_9
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_physics_1 } }
				give_technology = { tech = tech_physics_1 }
			}
			else_if = {
				limit = { NOT = { has_technology = tech_physics_2 } }
				add_research_option = tech_physics_2
				add_tech_progress = {
					tech = tech_physics_2
					progress = 0.75
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_physics_3 } }
				add_research_option = tech_physics_3
				add_tech_progress = {
					tech = tech_physics_3
					progress = 0.5
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier5researchreward
					min = @tier5researchmin
					max = @tier5researchmax
				}
			}
		}
	}
}

# Dissected Gateway
ship_event = {
	id = anomalymod.15
	title = "anomalymod.15.name"
	desc = "anomalymod.15.desc"
	picture = GFX_evt_drifting_gateway
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_physics_5
			add_deposit = d_engineering_5
		}
		owner = {
			generate_lcluster_clue = yes
		}
	}
} 

##################################
# Distant Stars Follow-Up Events
# Reserved 20 - 199
##################################
##################################
# Lost Amoeba Events
# Reserved 20 - 39
##################################
# Amoeba dies, lose modifier
country_event = {
	id = anomalymod.20
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		fromfrom.fleet = {
			OR = {
				has_fleet_flag = lost_amoeba_fleet@root
				has_fleet_flag = lost_amoeba_adult_fleet@root
				has_fleet_flag = lost_amoeba_centenarian_fleet@root
				has_fleet_flag = lost_amoeba_offspring_fleet@root
				has_fleet_flag = lost_amoeba_offspring_adult_fleet@root
				has_fleet_flag = lost_amoeba_offspring_centenarian_fleet@root
			}
		}
	}

	immediate = {
		change_variable = { which = amoebas_owned value = -1 }
		if = {
			limit = {
				NOT = {
					any_owned_fleet = {
						OR = {
							has_fleet_flag = lost_amoeba_fleet@root
							has_fleet_flag = lost_amoeba_adult_fleet@root
							has_fleet_flag = lost_amoeba_centenarian_fleet@root
							has_fleet_flag = lost_amoeba_offspring_fleet@root
							has_fleet_flag = lost_amoeba_offspring_adult_fleet@root
							has_fleet_flag = lost_amoeba_offspring_centenarian_fleet@root
						}
					}
				}
			}
			set_variable = { which = amoebas_owned value = 0 }
			remove_modifier = "adopted_amoeba"
		}
	}
}

# Chance to pacify space amoebas
country_event = {
	id = anomalymod.22
	title = "anomalymod.22.name"
	desc = "anomalymod.22.desc"
	picture = GFX_evt_friendly_amoeba
	show_sound = event_space_amoeba
	location = FROM
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			has_special_project = INVESTIGATE_SPACE_AMOEBA
			has_special_project = AMOEBAS_PACIFICATION_PROJECT
			has_modifier = "amoeba_hunting_buff"
			has_modifier = "pacified_amoebas"
			is_homicidal = yes
		}
		exists = event_target:lost_amoeba_fleet
	}

	option = {
		name = anomalymod.22.a
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		capital_scope = {
			enable_special_project = {
				name = "AMOEBAS_PACIFICATION_PROJECT"
				location = this
				owner = root
			}
		}
	}
	
	option = {
		name = NOTIME
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

##################################
# Brainslug Events
# Reserved 40 - 59
##################################

event = {
	id = anomalymod.40
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			is_country_type = default
			has_country_flag = brainslug_offer_rejected
			NOT = { has_country_flag = brainslug_offer_rejected_again }
			any_owned_leader  = {
				leader_class = ruler
				has_trait = leader_trait_ruler_brainslug
			}
			is_xenophobe = no
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = default
				has_country_flag = brainslug_offer_rejected
				NOT = { has_country_flag = brainslug_offer_rejected_again }
				any_owned_leader  = {
					leader_class = ruler
					has_trait = leader_trait_ruler_brainslug
				}
				is_xenophobe = no
			}
			country_event = { id = anomalymod.41 }
		}
	}

}

country_event = {
	id = anomalymod.41
	title = "anomalymod.41.name"
	desc = "anomalymod.41.desc"
	picture = GFX_evt_hive_mind
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes

	option = {
		trigger = {
			NOR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		name = "distar.172.a"
		while = {
			count = 3
			random_owned_pop = {
				limit = {
					is_sapient = yes
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
				}
				modify_species = {
					species = this
					add_trait = trait_brainslug
					add_traits_at_start_of_list = yes
					hidden_effect = {
						set_citizenship_type = {
							country = root
							type = citizenship_full
							cooldown = no
						}
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = brainslug_offer_rejected
			while = {
				count = 2
				random_owned_leader = {
					LIMIT = {
						leader_class = scientist
						species = {
							NOR = {
								has_trait = trait_cybernetic
								has_trait = trait_mechanical
								has_trait = trait_machine_unit
								is_species_class = ROBOT
							}
						}
					}
					add_trait = leader_trait_scientist_brainslug
				}
			}
			random_owned_leader = {
				LIMIT = {
					leader_class = governor
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
				}
				add_trait = leader_trait_governor_brainslug
			}
			country_event = { id = distar.174 } #Pool leaders get trait
			country_event = { id = distar.175 } #Unrest is generated
		}
	}

	option = {
		trigger = {
			hidden_trigger = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
				any_owned_pop = {
					NOR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
			}
		}
		name = "distar.172.a"
		while = {
			count = 3
			random_owned_pop = {
				LIMIT = {
					NOR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
					species = {
						NOR = {
							has_trait = trait_cybernetic
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
							is_species_class = ROBOT
						}
					}
					is_sapient = yes
				}
				modify_species = {
					species = this
					add_trait = trait_brainslug
					add_traits_at_start_of_list = yes
					hidden_effect = {
						set_citizenship_type = {
							country = root
							type = citizenship_full
							cooldown = no
						}
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = brainslug_offer_rejected
			country_event = { id = distar.174 } #Pool leaders get trait
			country_event = { id = distar.175 } #Unrest is generated
		}
	}

	option = {
		name = "distar.172.b"
		custom_tooltip = "distar.172.b.tooltip"
		set_timed_country_flag = { flag = brainslug_offer_rejected_again days = 18000 } 
	}
}

# Xenophobe brain slugs shift ethic
event = {
	id = anomalymod.42
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			is_country_type = default
			is_xenophobe = no
			any_owned_pop = {
				has_trait = trait_brainslug
				has_ethic = ethic_xenophobe
			}
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = default
				is_xenophobe = no
				any_owned_pop = {
					has_trait = trait_brainslug
					has_ethic = ethic_xenophobe
				}
			}
			random_owned_pop = {
				limit = {
					has_trait = trait_brainslug
					has_ethic = ethic_xenophobe
				}
				random_list = {
					1 = { pop_change_ethic = ethic_xenophile }
					1 = {
						pop_change_ethic = ethic_egalitarian
						modifier = {
							factor = 0
							exists = owner
							owner = { is_authoritarian = yes }
						}
					}
					1 = {
						pop_change_ethic = ethic_authoritarian
						modifier = {
							factor = 0
							exists = owner
							owner = { is_egalitarian = yes }
						}
					}
					1 = {
						pop_change_ethic = ethic_pacifist
						modifier = {
							factor = 0
							exists = owner
							owner = { is_militarist = yes }
						}
					}
					1 = {
						pop_change_ethic = ethic_militarist
						modifier = {
							factor = 0
							exists = owner
							owner = { is_pacifist = yes }
						}
					}
					1 = {
						pop_change_ethic = ethic_spiritualist
						modifier = {
							factor = 0
							exists = owner
							owner = { is_materialist = yes }
						}
					}
					1 = {
						pop_change_ethic = ethic_materialist
						modifier = {
							factor = 0
							exists = owner
							owner = { is_spiritualist = yes }
						}
					}
				}
			}
		}
	}
}

##################################
# Dead God Events
# Reserved 60 - 79
##################################

# Dead God
country_event = {
	id = anomalymod.60
	hide_window = yes
	
	mean_time_to_happen = {
		months = 50
	}
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = dead_god_religion_reveal }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = dead_god_religion_reveal				
				country_event = {
					id = anomalymod.61
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.61
	title = anomalymod.61.name
	desc = anomalymod.61.desc
	
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		
		trigger = {
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.mat
		
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.sp
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = mem_primitives.401a.sphile
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
		
		add_monthly_resource_mult = {
			resource = unity
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
	
	option = {
		name = mem_primitives.401a.sphobe
		
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		
		add_monthly_resource_mult = {
			resource = unity
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Psyonics
country_event = {
	id = anomalymod.62
	hide_window = yes
	
	mean_time_to_happen = {
		months = 3000
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.75
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		NOT = { has_country_flag = dead_god_psionics }
		NOT = { has_ascension_perk = ap_mind_over_matter }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_psionics
		set_country_flag = acquired_tech # advanced to space age faster
		give_technology = { tech = tech_psionic_theory }
		give_technology = { tech = tech_telepathy }
		every_owned_pop = {
			limit = {
				is_same_species = root
				NOT = { species = { has_trait = trait_latent_psionic } }
			}
			modify_species = {
				species = this
				add_trait = trait_latent_psionic
			}
		}
		shift_ethic = ethic_spiritualist
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.63
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.63
	title = anomalymod.63.name
	desc = anomalymod.63.desc
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Full Psionic Awakening
country_event = {
	id = anomalymod.64
	hide_window = yes
	
	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	trigger = {
		OR = {
			has_country_flag = dead_god_psionics
			has_ascension_perk = ap_mind_over_matter
		}
		NOT = { has_country_flag = dead_god_fully_psionic }
		NOT = { has_ascension_perk = ap_transcendence }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		capital_scope = {
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_psionics
		set_country_flag = dead_god_fully_psionic
		give_technology = { tech = tech_precognition_interface }
		every_owned_pop = {
			limit = {
				is_same_species = root
				has_trait = trait_latent_psionic
			}
			modify_species = {
				species = this
				remove_trait = trait_latent_psionic
				add_trait = trait_psionic
			}
			#owner_species = { save_event_target_as = psionic_species }
		}
		change_dominant_species = { species = last_created change_all = yes }
		random_owned_pop = { pop_change_ethic = ethic_spiritualist }
		every_country = {
			limit = {
				OR = {
					is_country_type = primitive
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			every_owned_leader = {
				limit = {
					is_same_species = root
					#species = { 
					#	has_trait = trait_psionic
					#	is_same_value = event_target:psionic_species
					#}
					NOR = {
						has_trait =	leader_trait_admiral_psionic
						has_trait =	leader_trait_general_psionic
						has_trait =	leader_trait_governor_psionic
						has_trait =	leader_trait_scientist_psionic
						has_trait =	leader_trait_ruler_psionic
					}
				}
				if = {
					limit = { leader_class = admiral }
					add_trait = leader_trait_admiral_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = general }
					add_trait = leader_trait_general_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = governor }
					add_trait = leader_trait_governor_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = scientist }
					add_trait = leader_trait_scientist_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = ruler }
					add_trait = leader_trait_ruler_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
			}
			every_pool_leader = {
				limit = {
					is_same_species = root
					#species = { 
					#	has_trait = trait_psionic
					#	is_same_value = event_target:psionic_species
					#}
					NOR = {
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_scientist_psionic
						has_trait = leader_trait_ruler_psionic
					}
				}
				if = {
					limit = { leader_class = admiral }
					add_trait = leader_trait_admiral_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = general }
					add_trait = leader_trait_general_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = governor }
					add_trait = leader_trait_governor_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = scientist }
					add_trait = leader_trait_scientist_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
				if = {
					limit = { leader_class = ruler }
					add_trait = leader_trait_ruler_psionic
					add_ruler_trait = leader_trait_ruler_psionic
				}
			}
		}
		every_country = {
			limit = { 
				is_ai = no
				has_communications = root
				NOT = { is_same_value = root }
			}
			country_event = { id = utopia.2652 }
		}
		country_event = { id = utopia.2655 days = 30 random = 20 }
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.65
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.65
	title = anomalymod.65.name
	desc = anomalymod.65.desc
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = REMARKABLE
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead God Moon Landing
country_event = {
	id = anomalymod.66
	hide_window = yes
	
	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 0.5
			has_country_flag = acquired_tech
		}
	}
	
	trigger = {
		NOT = { has_country_flag = dead_god_moon_landing }
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = early_space_age
		capital_scope = {
			has_moon = yes # make sure it hasn't been blown up or something.
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		set_country_flag = dead_god_moon_landing
		random_list = {
			1 = {
				modifier = {
					factor = 0
					NOT = { has_country_flag = dead_god_is_real }
				}
				# psionics
				set_country_flag = dead_god_moon_landing_psionic
				if = {
					limit = {
						OR = {
							has_country_flag = dead_god_psionics
							has_ascension_perk = ap_mind_over_matter
						}
						NOR = {
							has_country_flag = dead_god_fully_psionic
							has_ascension_perk = ap_transcendence
						}
					}
					country_event = { id = anomalymod.64 days = 30 random = 30 }
				}
				else_if = {
					limit = {
						NOR = {
							has_country_flag = dead_god_fully_psionic
							has_ascension_perk = ap_transcendence
						}
					}
					country_event = { id = anomalymod.62 days = 30 random = 30 }
				}
			}
			1 = {
				modifier = {
					factor = 0
					has_country_flag = dead_god_is_real
				}
				# materialist
				set_country_flag = dead_god_moon_landing_materialist
				random_list = {
					1 = {
						shift_ethic = ethic_materialist
						random_owned_pop = { pop_change_ethic = ethic_materialist }
						random_owned_pop = { pop_change_ethic = ethic_materialist }
					}
					1 = {
					}
				}
				random_owned_pop = { pop_change_ethic = ethic_materialist }
				random_owned_pop = { pop_change_ethic = ethic_materialist }
			}
			2 = {
				# normal
				set_country_flag = dead_god_moon_landing_normal
			}
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = anomalymod.67
				}
			}
		}
	}
}

#Notification
country_event = {
	id = anomalymod.67
	title = anomalymod.67.name
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_psionic }
		}
		text = anomalymod.67.psionic.desc
	}
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_materialist }
		}
		text = anomalymod.67.materialist.desc
	}
	desc = {
		trigger = {
			from = { has_country_flag = dead_god_moon_landing_normal }
		}
		text = anomalymod.67.default.desc
	}
	
	
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

# Dead god lashes out psionically at invaders
planet_event = {
	id = anomalymod.68
	title = "anomalymod.68.name"
	desc = "anomalymod.68.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	location = root
	
	trigger = {
		has_moon = yes # make sure it hasn't been blown up or something.
		OR = {
			has_modifier = dead_god_planet_hidden
			has_modifier = dead_god_planet
		}
		has_planet_flag = dead_god_is_real_planet
		NOT = { has_planet_flag = dead_god_angry }
		exists = owner
		owner = {
			NOT = { has_country_flag = dead_god_original_primitives }
		}
		any_pop = {
			species = { has_species_flag = is_worshipper_species }
			OR = {
				is_enslaved = yes
				is_being_purged = yes
			}
		}
	}
	
	mean_time_to_happen = {
		months = 600
		modifier = {
			factor = 0.01
			any_pop = {
				is_being_purged = yes
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_pop = {
					species = { has_species_flag = is_worshipper_species }
					NOT = { pop_has_trait = trait_psionic }
				}
			}
			# natives awake psionically
			planet_event = { id = anomalymod.69 days = 30 random = 90 }
		}
		# Dead God awakens
		planet_event = { id = anomalymod.70 days = 180 random = 180 }
		set_planet_flag = dead_god_angry
	}
	
	option = {
		name = anomalymod.68.a
		if = {
			limit = {
				any_pop = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
			}
			random_pop = {
				limit = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				kill_pop = yes
			}
			random_pop = {
				limit = {
					NOT = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				kill_pop = yes
			}
		}
		else = {
			sector = {
				leader = { kill_leader = { show_notification = no } }
			}
		}
	}
}

planet_event = {
	id = anomalymod.69
	title = "anomalymod.69.name"
	desc = "anomalymod.69.desc"
	picture = GFX_evt_psionics
	show_sound = event_mind_over_matter
	
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		owner = {
			any_owned_pop = {
				species = { has_species_flag = is_worshipper_species }
				OR = {
					is_enslaved = yes
					is_being_purged = yes
				}
			}
		}
	}
	
	immediate = {
		owner = {
			every_owned_pop = {
				limit = {
					species = { has_species_flag = is_worshipper_species }
				}
				modify_species = {
					species = this
					remove_trait = trait_latent_psionic
					add_trait = trait_psionic
				}
			}
		}
	}
	
	option = {
		name = anomalymod.69.a
		owner = {
			every_owned_planet = {
				limit = {
					any_pop = {
						species = { has_species_flag = is_worshipper_species }
					}
				}
				add_modifier = {
					modifier = spiritualist_unrest
					days = 7200 # 20 years
				}
			}
		}
	}
}

planet_event = {
	id = anomalymod.70
	title = "anomalymod.70.name"
	desc = "anomalymod.70.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	trigger = {
		exists = owner
		any_pop = {
			species = { has_species_flag = is_worshipper_species }
			OR = {
				is_enslaved = yes
				is_being_purged = yes
			}
		}
	}
	
	immediate = {
		remove_modifier = spiritualist_unrest
		random_pop = {
			limit = {
				species = { has_species_flag = is_worshipper_species }
			}
			save_event_target_as = worshiper_species
		}
		owner = {
			save_event_target_as = dead_god_invaders
		}
	}
	
	option = {
		name = anomalymod.70.a
		hidden_effect = {
			create_country = {
				name = random
				authority = random
				civics = random
				species = event_target:worshiper_species
				ignore_initial_colony_error = yes
				ethos = {
					ethic = "ethic_militarist"
					ethic = "ethic_fanatic_spiritualist"
				}
				flag = random
				type = default
			}
			last_created_country = {
				set_country_flag = dead_god_psionics
				set_country_flag = dead_god_fully_psionic
				set_country_flag = dead_god_original_primitives
				add_resource = {
					minerals = 5000
					energy = 5000
					food = 200
					influence = 250
					alloys = 500
				}
				add_100_unity_per_year_passed = yes # scripted effect
				establish_communications_no_message = event_target:dead_god_invaders
				add_opinion_modifier = { 
					who = event_target:dead_god_invaders
					modifier = opinion_insult
				}
				create_fleet = {
					effect = {
						set_owner = prev

						create_ship = {
							name = random
							random_existing_design = science
						}

						set_fleet_stance = evasive				
						set_location = ROOT
						
						owner = {
							create_leader = {
								class = scientist
								sub_type = survey
								name = random
								skill = 4
								species = owner_main_species
							}
						}
						set_leader = last_created_leader
					}			
				}
					
				#constructor
				create_fleet = {
					effect = {
						set_owner = prev
						
						create_ship = {
							name = random
							random_existing_design = constructor
						}
						
						set_fleet_stance = evasive
						set_location = ROOT
					}
				}
				
				#military
				create_fleet = {
					set_take_point = yes
					effect = {
						set_owner = prev
						
						while = {
							count = 6
							create_ship = {
								name = random
								random_existing_design = corvette
							}
						}
						while = {
							count = 2
							create_ship = {
								name = random
								random_existing_design = destroyer
							}
						}
						create_ship = {
							name = random
							random_existing_design = cruiser
						}
						
						set_location = ROOT
						
						owner = {
							create_leader = {
								class = admiral
								species = owner_main_species
								name = random
								skill = 4
							}
						}
						set_leader = last_created_leader
					}
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = scientist
					species = owner_main_species
					name = random
					skill = 3
				}
				create_leader = {
					class = governor
					species = owner_main_species
					name = random
					skill = 3
				}
				save_event_target_as = dead_god_country
			}
			solar_system = {
				starbase = {
					set_owner = event_target:dead_god_country
				}
				every_neighbor_system = {
					limit = {
						exists = space_owner
						space_owner = { is_same_value = event_target:dead_god_invaders }
						NOT = {
							any_system_planet  = {
								is_colony = yes
							}
						}
					}
					starbase = {
						set_owner = event_target:dead_god_country
					}
				}
			}
			set_owner = event_target:dead_god_country
			set_capital = yes
			create_fleet = {
				name = "NAME_Death_God"
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
					spawn_debris = no
					is_boss = yes
				}				
				effect = {					
					set_owner = event_target:dead_god_country
					create_ship = {
						name = "NAME_Camazotz"
						design = "NAME_Shroud_Avatar"
					}
					set_location = root
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = return_point
					set_aggro_range = 3000
					add_modifier = {
						modifier = "absorbed_consciousness_2"
						days = -1
					}
				}
			}
			random_country = {
				limit = { is_country_type = default }
				event_target:dead_god_country = {
					copy_techs_from = {
						target = prev
					}
				}
			}
		}
	}
}

# Dead god awakens due to psionic awakening
country_event = {
	id = anomalymod.71
	hide_window = yes
	
	mean_time_to_happen = {
		months = 3000
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.75
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_country_flag = dead_god_original_primitives
		has_country_flag = dead_god_is_real
		is_country_type = default
		OR = {
			has_country_flag = dead_god_fully_psionic
			has_ascension_perk = ap_transcendence
		}
		capital_scope = {
			has_moon = yes # make sure it hasn't been blown up or something.
			OR = {
				has_modifier = dead_god_planet_hidden
				has_modifier = dead_god_planet
			}
			NOT = { has_planet_flag = dead_god_has_awaken }
		}
	}
	
	immediate = {
		add_resource = {
			minerals = 5000
			energy = 5000
			food = 200
			influence = 250
			alloys = 500
			unity = 5000
		}
		create_fleet = {
			name = "NAME_Death_God"
			settings = {
				can_upgrade = no
				can_disband = no
				can_change_composition = no
				can_change_leader = no
				uses_naval_capacity = no
				spawn_debris = no
				is_boss = yes
			}				
			effect = {				
				set_owner = root
				create_ship = {
					name = "NAME_Camazotz"
					design = "NAME_Shroud_Avatar"
				}
				set_location = root.capital_scope
				set_fleet_stance = aggressive
				set_aggro_range_measure_from = return_point
				set_aggro_range = 3000
				add_modifier = {
					modifier = "absorbed_consciousness_2"
					days = -1
				}
			}
		}
		if = {
			limit = { exists = overlord }
			overlord = {
				ROOT = {
					copy_techs_from = {
						target = prev
					}
				}
			}
			set_subject_of = { who = none }
		}
		else = {
			random_country = {
				limit = { is_country_type = default }
				ROOT = {
					copy_techs_from = {
						target = prev
					}
				}
			}
		}
		capital_scope = {
			save_event_target_as = the_planet
		}
		every_country = {
			limit = { is_ai = no }
			country_event = { id = anomalymod.72 }
		}
	}
}

country_event = {
	id = anomalymod.72
	title = "anomalymod.72.name"
	desc = "anomalymod.72.desc"
	picture = GFX_evt_unspeakable_horror
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes

	option = {
		name = anomalymod.72.a
	}
}

##################################
# Various Distant Stars Events
# Reserved 80 - 99
##################################

### Bunker-Bot ###
country_event = {
	id = anomalymod.80
	title = anomalymod.80.name
	desc = anomalymod.80.desc
	
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	
	location = event_target:closest_l_gate
	
	is_triggered_only = yes
	
	trigger = {
		NOR = { 
			has_country_flag = encountered_first_lgate
			has_event_chain = "l_cluster_chain"
		}
	}
	
	immediate = {
		FROM = {
			solar_system = {
				closest_system = {
					limit = {
						has_star_flag = lgate
						any_system_megastructure = { is_megastructure_type = lgate_base }
					}
					save_event_target_as = closest_l_gate
					every_system_planet = {
						surveyed = {
							set_surveyed = yes
							surveyor = root
						}
					}
				}
			}
		}
		if = {
			limit = { has_event_chain = mandate_explore_system_chain }
			add_event_chain_counter = { 
				event_chain = mandate_explore_system_chain 
				counter = systems_explored
				amount = 1
			}
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = mandate_explore_system_chain
						counter = systems_explored
					}
				}
				country_event = { id = moremandate.72  }
			}
		}
	}
	
	option = {
		name = INTRIGUING
		custom_tooltip = anomalymod.80.a.tooltip
		start_lcluster_chain = yes
		generate_lcluster_clue = yes
	}
}

country_event = {
	id = anomalymod.81
	title = anomalymod.80.name
	desc = anomalymod.81.desc
	
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	
	location = FROMFROM
	
	is_triggered_only = yes
	
	option = {
		name = INTRIGUING
		if = {
			limit = { NOT = { has_technology = tech_engineering_1 } }
			give_technology = { tech = tech_engineering_1 }
		}
		else_if = {
			limit = { NOT = { has_technology = tech_assembly_pattern } }
			give_technology = { tech = tech_assembly_pattern }
		}
		else_if = {
			limit = { NOT = { has_technology = tech_construction_templates } }
			add_research_option = tech_construction_templates
			add_tech_progress = {
				tech = tech_construction_templates
				progress = 0.75
			}
		}
		else_if = {
			limit = { has_technology = tech_construction_templates }
			add_research_option = tech_repeatable_reduced_building_time
			add_tech_progress = {
				tech = tech_repeatable_reduced_building_time
				progress = 0.66
			}
		}
		generate_lcluster_clue = yes
	}
}



### Exofungus ###
event = {
	id = anomalymod.85
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			4 = {
			}
			1 = {
				random_planet = {
					limit = {
						has_modifier = "exofungus"
						is_colony = yes
						is_under_colonization = no
						free_district_slots > 0
					}
					planet_event = { id = anomalymod.86 days = 30 random = 720 }
				}
			}
		}
	}
}

planet_event = {
	id = anomalymod.86
	title = "anomalymod.86.name"
	desc = "anomalymod.86.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes
	
	trigger = {
		free_district_slots > 0
	}

	option = {
		name = UNFORTUNATE
		add_deposit = d_exofungus_blocker
	}
}

##### WETWARE COMPUTER #####
event = {
	id = anomalymod.90
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_planet = {
			limit = {
				has_deposit = d_wetware_computer
				NOT = { has_planet_flag = distar_wetware_computer_translation }
				is_colony = yes
				is_under_colonization = no
				exists = owner
				owner = {
					has_technology = tech_society_1
					has_technology = tech_self_aware_logic
				}
			}
			random_list = {
				1 = {
					planet_event = { id = anomalymod.91 days = 30 random = 360 }
				}
				1 = {
				}
			}
		}
	}
}

planet_event = {
	id = anomalymod.91
	title = "distar.2010.name"
	desc = "anomalymod.91.desc"
	picture = GFX_evt_ocean
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = distar_wetware_computer_translation
	}
	
	option = {
		name = "OK"
		enable_special_project = {
			name = "WETWARE_COMPUTER_PROJECT"
			location = this
			owner = root.owner
		}
	}
}

planet_event = {
	id = anomalymod.92
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.92.desc"
	picture = GFX_evt_ocean
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		add_modifier = { modifier = wetware_computer days = -1 }
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

##################################
# Atomic Clock Events
# Reserved 100 - 119
##################################
# clock stuck
country_event = {
	id = anomalymod.100
	title = "distar.311.name"
	desc = "anomalymod.100.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.100.a
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
	}
}

# Just a clock
country_event = {
	id = anomalymod.101
	title = "distar.311.name"
	desc = "anomalymod.101.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.101.a
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
	}
}

# Sends out powerful signal, attracts one random crisis
country_event = {
	id = anomalymod.102
	title = "distar.311.name"
	desc = {
		text = "anomalymod.102.a.desc"
		trigger = {
			has_global_flag = atomic_clock_swarm
		}
	}
	desc = {
		text = "anomalymod.102.b.desc"
		trigger = {
			has_global_flag = atomic_clock_invader
		}
	}
	desc = {
		text = "anomalymod.102.c.desc"
		trigger = {
			has_global_flag = atomic_clock_synth
		}
	}
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			33 = { set_global_flag = atomic_clock_swarm }
			33 = { set_global_flag = atomic_clock_invader }
			33 = { set_global_flag = atomic_clock_synth }
		}
	}
	
	option = {
		name = anomalymod.102.a
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}
}

# Disappears
country_event = {
	id = anomalymod.103
	title = "distar.311.name"
	desc = "anomalymod.103.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.103.a
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
	}
}

# warns of spectral wraith (pulsars only)
country_event = {
	id = anomalymod.104
	title = "distar.311.name"
	desc = "anomalymod.104.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes

	immediate = {
		event_target:atomic_clock_planet = {
			solar_system = {
				random_system_planet = {
					limit = {
						OR = {
							is_planet_class = pc_pulsar
							is_planet_class = pc_neutron_star
							is_planet_class = pc_magnetar
						}
					}
					add_modifier = {
						modifier = germinating_wraith
						days = -1
					}
					planet_event = { id = anomalymod.105 days = 7200 }
				}
			}
		}
	}
	
	option = {
		name = anomalymod.104.a
		event_target:atomic_clock_planet = {
			enable_special_project = {
				name = "ATOMIC_CLOCK_WARNING_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = anomalymod.104.b
	}
}
# Wraith is born
planet_event = {
	id = anomalymod.105
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		has_modifier = germinating_wraith
	}

	immediate = {
		save_event_target_as = wraith_star
		remove_modifier = germinating_wraith
		create_country = {
			name = "NAME_Wraith"
			type = guardian_wraith
			flag = {
				icon = {
					category = "zoological"
					file = "flag_zoological_5.dds"
				}
				background= {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors={
					"red"
					"red"
					"null"
					"null"
				}
			}
		}
		last_created_country = {
			set_country_flag = wraith_country
			guardian_difficulty = yes
			save_global_event_target_as = wraith_country
			create_fleet = {
				name = "NAME_Specter"
				settings = {
					spawn_debris = no
					is_boss = yes
				}
				effect = {
					set_owner = event_target:wraith_country
					random_list = {
						33 = {
							create_ship = {
								name = "NAME_Wraith_650THz"
								design = "NAME_Spectral_Wraith_650THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_blue
								}
							}
						}
						33 = {
							create_ship = {
								name = "NAME_Wraith_450THz"
								design = "NAME_Spectral_Wraith_450THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_red
								}
							}
						}
						33 = {
							create_ship = {
								name = "NAME_Wraith_520THz"
								design = "NAME_Spectral_Wraith_520THz"
								effect = {
									set_ship_flag = wraith_ship
									set_ship_flag = wraith_freq_yellow
								}
							}
						}
					}
					save_global_event_target_as = wraith_fleet
					set_location = event_target:wraith_star
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 20
					queue_actions = {
						repeat = {
							find_closest_system = {
								trigger = {
									id = wraith.1.trigger.3
									NOR = {
										exists = space_owner
										any_ship_in_system = {
											fleet = { is_same_value = event_target:wraith_fleet }
										}
										has_star_flag = guardians_wraith_visited
									}
								}
								found_system = {
									move_to = this
									find_closest_planet = {
										trigger = {
											id = wraith.1.trigger.4
											is_star = yes
										}
										found_planet = {
											move_to = this
											#orbit_planet = this
											wait = {
												duration = 10
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
		solar_system = {
			if = {
				limit = { exists = space_owner }
				space_owner = {
					country_event = { id = leviathans.2012 }
				}
			}
		}
	}
}
# Warning Translated
ship_event = {
	id = anomalymod.106
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.106.desc"
	picture = GFX_evt_star_pulsar
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.106.a
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier5researchreward
				min = @tier5researchmin
				max = @tier5researchmax
			}
		}
	}
}

# Broken Bomb
country_event = {
	id = anomalymod.107
	title = "distar.311.name"
	desc = "anomalymod.107.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.107.a
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
	}
}

# Bomb, destroys everything in system
country_event = {
	id = anomalymod.108
	title = "distar.311.name"
	desc = "anomalymod.108.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		custom_tooltip = anomalymod.108.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
		hidden_effect = {
			event_target:atomic_clock_planet = {
				solar_system = {
					every_fleet_in_system  = {
						destroy_fleet = this
					}
					every_system_planet  = {
						limit = { is_colony = yes }
						destroy_colony = yes
						if = {
							limit = {
								is_planet_class = pc_habitat
							}
							spawn_habitat_cracker_effect = yes
							remove_planet = yes
						}
						else_if = {
							limit = {
								is_planet_class = pc_ringworld_habitable
							}
							spawn_ringworld_cracker_effect = yes
							change_pc = pc_ringworld_habitable_damaged
						}
						else = {
							change_pc = pc_barren
							reset_planet = yes
							add_modifier = {
								modifier = terraforming_candidate
								days = -1
							}
						}
					}
				}
				remove_planet = yes
			}
		}
	}
}


# Dark matter bomb, destroys everything 3 system away, star becomes black hole
country_event = {
	id = anomalymod.109
	title = "distar.311.name"
	desc = "anomalymod.109.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.109
		custom_tooltip = anomalymod.109.a.tooltip
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			kill_leader = { show_notification = no }
		}
		hidden_effect = {
			event_target:atomic_clock_planet = {
				solar_system = {
					every_fleet_in_system  = {
						destroy_fleet = this
					}
					every_system_planet  = {
						limit = { is_colony = yes }
						destroy_colony = yes
					}
					every_system_planet  = {
						limit = {
							is_star = no
							is_asteroid = no
							NOT = { is_gas_giant = yes }
						}
						# destroy habitats and ringworlds
						if = {
							limit = {
								is_planet_class = pc_habitat
							}
							spawn_habitat_cracker_effect = yes
							remove_planet = yes
						}
						else_if = {
							limit = {
								is_planet_class = pc_ringworld_habitable
							}
							spawn_ringworld_cracker_effect = yes
							change_pc = pc_ringworld_habitable_damaged
						}
						else_if = {
							limit = { habitable_planet = yes }
							change_pc = pc_shattered
							clear_deposits = yes
							random_list = {
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
								}
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
								}
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
								}
								1 = {
									add_deposit = d_minerals_4
								}
							}
						}
						else = {
							change_pc = pc_shattered
							clear_deposits = yes
							random_list = {
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
								}
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_4
								}
								1 = {
									add_deposit = d_minerals_4
								}
							}
						}
					}
					every_system_planet  = {
						limit = {
							is_gas_giant = yes
						}
						change_pc = pc_barren_cold
						reset_planet = yes
						add_modifier = {
							modifier = chthonian_planet
							days = -1
						}
					}
					every_system_planet  = {
						limit = {
							is_star = yes
							NOR = {
								is_planet_class = pc_black_hole
								is_planet_class = pc_pulsar
								is_planet_class = pc_neutron_star
								is_planet_class = pc_magnetar
								is_planet_class = pc_t_star
								is_planet_class = pc_l_star
								is_planet_class = pc_y_star
								is_planet_class = pc_d_star
								is_planet_class = pc_nova_1
								is_planet_class = pc_nova_2
								is_planet_class = pc_collapsar
								is_planet_class = pc_protostar
							}
						}
						change_pc = pc_black_hole
						reset_planet = yes
						clear_deposits = yes
						set_deposit = d_dark_matter_deposit_2
					}
					every_neighbor_system = {
						every_fleet_in_system  = {
							destroy_fleet = this
						}
						every_system_planet  = {
							limit = { is_colony = yes }
							destroy_colony = yes
							if = {
								limit = {
									is_planet_class = pc_habitat
								}
								spawn_habitat_cracker_effect = yes
								remove_planet = yes
							}
							else_if = {
								limit = {
									is_planet_class = pc_ringworld_habitable
								}
								spawn_ringworld_cracker_effect = yes
								change_pc = pc_ringworld_habitable_damaged
							}
							else = {
								change_pc = pc_barren
								reset_planet = yes
								add_modifier = {
									modifier = terraforming_candidate
									days = -1
								}
							}
						}
						every_neighbor_system = {
							every_fleet_in_system  = {
								destroy_fleet = this
							}
							every_system_planet  = {
								limit = { is_colony = yes }
								destroy_colony = yes
								if = {
									limit = {
										is_planet_class = pc_habitat
									}
									spawn_habitat_cracker_effect = yes
									remove_planet = yes
								}
								else_if = {
									limit = {
										is_planet_class = pc_ringworld_habitable
									}
									spawn_ringworld_cracker_effect = yes
									change_pc = pc_ringworld_habitable_damaged
								}
								else = {
									change_pc = pc_barren
									reset_planet = yes
									add_modifier = {
										modifier = terraforming_candidate
										days = -1
									}
								}
							}
							every_neighbor_system = {
								every_fleet_in_system  = {
									destroy_fleet = this
								}
								every_system_planet  = {
									limit = { is_colony = yes }
									destroy_colony = yes
									if = {
										limit = {
											is_planet_class = pc_habitat
										}
										spawn_habitat_cracker_effect = yes
										remove_planet = yes
									}
									else_if = {
										limit = {
											is_planet_class = pc_ringworld_habitable
										}
										spawn_ringworld_cracker_effect = yes
										change_pc = pc_ringworld_habitable_damaged
									}
									else = {
										change_pc = pc_barren
										reset_planet = yes
										add_modifier = {
											modifier = terraforming_candidate
											days = -1
										}
									}
								}
							}
						}
					}
				}
				remove_planet = yes
			}
		}
	}
}

# Clock destroyed, full of nanites that eat planet
ship_event = {
	id = anomalymod.116
	title = "anomalymod.116.name"
	desc = "anomalymod.116.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		leader = {
			kill_leader = { show_notification = no } 
		}
		event_target:atomic_clock_planet = {
			create_ambient_object = {
				type = "large_debris_object"
			}
			last_created_ambient_object = { 
				set_location = {
					target = PREV
					distance = 0
					angle = random
				}
			}
			remove_planet = yes
		}
	}
}

# Clock destroyed, just a clock
ship_event = {
	id = anomalymod.117
	title = "anomalymod.117.name"
	desc = "anomalymod.117.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.117
	}
}

# Clock destroyed, was a bomb
ship_event = {
	id = anomalymod.118
	title = "anomalymod.117.name"
	desc = "anomalymod.118.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.118
	}
}

# attempt fails, bomb goes off
ship_event = {
	id = anomalymod.119
	title = "anomalymod.119.name"
	desc = "anomalymod.119.desc"
	picture = GFX_evt_clocks
	show_sound = event_super_explosion
	
	is_triggered_only = yes
	
	option = {
		name = TERRIBLE
		destroy_ship = ROOT
		event_target:atomic_clock_planet = {
			create_ambient_object = {
				type = "large_debris_object"
			}
			last_created_ambient_object = { 
				set_location = {
					target = PREV
					distance = 0
					angle = random
				}
			}
			remove_planet = yes
		}
	}
}

##################################
# Locusts Events
# Reserved 120 - 139
##################################

# locusts arrive in system
planet_event = {
	id = anomalymod.120
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_system = {
			limit = { has_star_flag = space_locusts_current_location }
			remove_star_flag = space_locusts_current_location
		}
		solar_system = {
			set_star_flag = space_locusts_current_location
			if = {
				limit = { exists = space_owner }
				space_owner = {
					country_event = { id = anomalymod.124 }
				}
			}
			if = {
				limit = {
					NOR = {
						has_star_flag = hostile_system
						has_star_flag = collapse_system
						has_star_flag = elderly_tiyanki_system
						has_star_flag = sealed_system
					}
					any_system_planet = {
						OR = {
							is_planet_class = pc_gaia
							is_planet_class = pc_continental
							is_planet_class = pc_savannah
							is_planet_class = pc_steppe
							is_planet_class = pc_alpine
							is_planet_class = pc_boreal
							is_planet_class = pc_tropical
							is_planet_class = pc_hajungle
						}
						is_terraforming = no
						NOT = {
							has_building = building_planetary_shield_generator
						}
					}
				}
				every_system_planet = {
					limit = {
						OR = {
							is_planet_class = pc_gaia
							is_planet_class = pc_continental
							is_planet_class = pc_savannah
							is_planet_class = pc_steppe
							is_planet_class = pc_alpine
							is_planet_class = pc_boreal
							is_planet_class = pc_tropical
							is_planet_class = pc_hajungle
						}
						is_terraforming = no
						NOT = {
							has_building = building_planetary_shield_generator
						}
					}
					set_planet_flag = next_locusts_target
				}
				random_system_planet = {
					limit = {
						OR = {
							is_planet_class = pc_gaia
							is_planet_class = pc_continental
							is_planet_class = pc_savannah
							is_planet_class = pc_steppe
							is_planet_class = pc_alpine
							is_planet_class = pc_boreal
							is_planet_class = pc_tropical
							is_planet_class = pc_hajungle
						}
						is_terraforming = no
						NOT = {
							has_building = building_planetary_shield_generator
						}
					}
					planet_event = { id = anomalymod.121 days = 720 random = 180 }
				}
			}
			else = {
				random_system = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = { is_country_type = default }
							}
						}
						any_neighbor_system = { has_star_flag = space_locusts_current_location }
					}
					random_system_planet = {
						limit = { is_star = yes }
						planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
					}
				}
			}
		}
	}
}

# locusts arrive at planet
planet_event = {
	id = anomalymod.121
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					is_terraforming = yes
					has_building = building_planetary_shield_generator
				}
			}
			remove_planet_flag = next_locusts_target
			if = {
				limit = {
					solar_system = {
						any_system_planet = {
							has_planet_flag = next_locusts_target
							NOT = { is_same_value = ROOT }
						}
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							has_planet_flag = next_locusts_target
							NOT = { is_same_value = ROOT }
						}
						planet_event = { id = anomalymod.121 days = 720 random = 180 }
					}
				}
			}
			else = {
				random_system = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = { is_country_type = default }
							}
						}
						any_neighbor_system = { has_star_flag = space_locusts_current_location }
					}
					random_system_planet = {
						limit = { is_star = yes }
						planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
					}
				}
			}
		}
		else = {
			if = {
				limit = { exists = owner }
				planet_event = { id = anomalymod.122 }
			}
			else = {
				add_modifier = {
					modifier = ravenous_locusts
					days = -1
				}
				planet_event = { id = anomalymod.123 days = 360 random = 720 }
			}
		}
	}
}

# locusts begin eating
planet_event = {
	id = anomalymod.122
	title = "anomalymod.122.name"
	desc = "anomalymod.122.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	option = {
		name = "TERRIBLE"
		add_modifier = {
			modifier = ravenous_locusts
			days = -1
		}
		hidden_effect = {
			planet_event = { id = anomalymod.123 days = 360 random = 720 }
			random_pop = { kill_pop = yes }
		}
	}
}

# planet eaten
planet_event = {
	id = anomalymod.123
	title = "anomalymod.123.name"
	desc = "anomalymod.123.desc"
	picture = GFX_evt_burning_settlement
	show_sound = event_air_raid_siren
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		remove_modifier = "ravenous_locusts"
		remove_planet_flag = next_locusts_target
		change_pc = pc_barren
		add_modifier = {
			modifier = "terraforming_candidate"
			days = -1
		}
		if = {
			limit = {
				solar_system = {
					any_system_planet = {
						has_planet_flag = next_locusts_target
						NOT = { is_same_value = ROOT }
					}
				}
			}
			solar_system = {
				random_system_planet = {
					limit = {
						has_planet_flag = next_locusts_target
						NOT = { is_same_value = ROOT }
					}
					planet_event = { id = anomalymod.121 days = 720 random = 180 }
				}
			}
		}
		else = {
			random_system = {
				limit = {
					OR = {
						NOT = { exists = space_owner }
						AND = {
							exists = space_owner
							space_owner = { is_country_type = default }
						}
					}
					any_neighbor_system = { has_star_flag = space_locusts_current_location }
				}
				random_system_planet = {
					limit = { is_star = yes }
					planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
				}
			}
		}
	}
	
	option = {
		name = "anomalymod.123.a"
	}
}

# space owner informed
country_event = {
	id = anomalymod.124
	title = "anomalymod.124.name"
	desc = {
		text = "anomalymod.124.a.desc"
		trigger = { has_country_flag = seen_space_locusts }
	}
	desc = {
		text = "anomalymod.124.b.desc"
		trigger = { NOT = { has_country_flag = seen_space_locusts } }
	}
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.124.a
		trigger = { NOT = { has_country_flag = seen_space_locusts } }
		hidden_effect = { set_country_flag = seen_space_locusts }
		capital_scope = {
			enable_special_project = {
				name = "INVESTIGATING_LOCUSTS_PROJECT"
				location = this
				owner = root
			}
		}
	}
	option = {
		name = DISCONCERTING
		trigger = { has_country_flag = seen_space_locusts }
		if = {
			limit = {
				NOR = {
					has_country_flag = protect_against_locusts_project_complete
					has_special_project  = INVESTIGATING_LOCUSTS_PROJECT
					has_special_project  = PROTECT_AGAINST_LOCUSTS_PROJECT
				}
			}
			capital_scope = {
				enable_special_project = {
					name = "PROTECT_AGAINST_LOCUSTS_PROJECT"
					location = this
					owner = root
				}
			}
		}
	}
}

# special projects
planet_event = {
	id = anomalymod.125
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.125.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.125.a
		enable_special_project = {
			name = "PROTECT_AGAINST_LOCUSTS_PROJECT"
			location = this
			owner = root.owner
		}
	}
}
planet_event = {
	id = anomalymod.126
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.126.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	
	is_triggered_only = yes
	
	immediate = {
		owner = {
			set_country_flag = protect_against_locusts_project_complete
		}
	}
	
	option = {
		name = anomalymod.126.a
		trigger = {
			owner = { has_technology = tech_planetary_shield_generator }
		}
	}
	option = {
		name = anomalymod.126.b
		trigger = {
			owner = { NOT = { has_technology = tech_planetary_shield_generator } }
		}
		owner = { add_research_option = tech_planetary_shield_generator }
	}
}

##################################
# Vanilla Category Events
# Reserved 200 - 399
##################################

# Ammonia Biosphere
ship_event = {
	id = anomalymod.200
	title = "anomalymod.200.name"
	desc = "anomalymod.200.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
		owner = {
			set_timed_country_flag = { flag = found_recent_toxic_life days = 10800 }
		}
		FROM = {
			if = {
				limit = { is_planetary_diversity_active = yes }
				change_pc = pc_methane
				reset_planet = yes
			}
		}
	}
	
	option = {
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "methane_biosphere"
					days = -1
				}
			}
		}
		FROM = { 
			set_deposit = d_society_3
		}
	}
}

# Strategic Aerostat Mines
ship_event = {
	id = anomalymod.201
	title = "anomalymod.201.name"
	desc = "anomalymod.201.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = { clear_deposits = yes }
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}

	option = {
		name = INTRIGUING
		from = {
			random_list = {
				5 = { set_deposit = d_exotic_gases_1 }
				3 = { set_deposit = d_exotic_gases_2 }
				1 = { set_deposit = d_exotic_gases_3 }
			}
		}
		FROM = {
			create_mining_station = {
				owner = ROOT
			}
		}
	}
}

# Crashed Colony Ship
ship_event = {
	id = anomalymod.202
	title = "anomalymod.202.name"
	desc = "anomalymod.202.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = anomaly.35.a
		owner = {
			add_resource = { alloys = 25 }
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# Kinetic Weapons Testing
ship_event = {
	id = anomalymod.203
	title = "anomalymod.203.name"
	desc = "anomalymod.203.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = DISCONCERTING
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Extinction Event - Massive Impact
ship_event = {
	id = anomalymod.204
	title = "anomalymod.204.name"
	desc = "anomalymod.204.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
		}
	}
	
	option = {
		name = INTRIGUING
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

#Colonial Failure, rework of anomaly.280
ship_event = {
	id = anomalymod.205
	title = "anomaly.280.name"
	desc = "anomaly.280.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = anomaly.280.a
		trigger = {
			owner = {
				NOT = { has_technology = tech_colonization_3 }
			}
		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		if = {
			limit = {
				owner = {
					NOT = { has_technology = tech_colonization_2 }
				}
			}
			owner = {
				add_research_option = tech_colonization_2
				add_tech_progress = {
					tech = tech_colonization_2
					progress = 0.20
				}
			}
		}
		else_if = {
			limit = {
				owner = {
					NOT = { has_technology = tech_colonization_3 }
				}
			}
			owner = {
				add_research_option = tech_colonization_3
				add_tech_progress = {
					tech = tech_colonization_3
					progress = 0.10
				}
			}
		}
	}
	option = {
		name = anomaly.280.b
		trigger = {
			owner = {
				is_xenophobe = no
				has_technology = tech_colonization_3
			}
		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
	option = {
		name = anomaly.280.c
		trigger = {
			owner = { is_xenophobe = yes }
		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# Prison Planet
ship_event = {
	id = anomalymod.206
	title = "anomalymod.206.name"
	desc = "anomalymod.206.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		from = { clear_deposits = yes }
		hidden_effect = { owner = { country_event = { id = story.5 days = 30 } } }
	}
	
	option = {
		name = INTRIGUING
		from = {
			add_deposit = d_society_2
			add_deposit = d_engineering_2
		}
	}
}

# Betharian Stone
ship_event = {
	id = anomalymod.207
	title = "anomalymod.207.name"
	desc = "anomalymod.207.desc"
	picture = GFX_evt_big_landing_ship
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		from = {
			add_deposit = d_betharian_deposit
			add_deposit = d_betharian_deposit
		}
	}
}
### Extrasolar Asteroid ###
ship_event = {
	id = anomalymod.208
	title = "anomalymod.208.name"
	desc = "anomalymod.208.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
		}
		FROM = {
			enable_special_project = {
				name = "EXTRASOLAR_ASTEROID_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}
# Locate Host System
ship_event = {
	id = anomalymod.209
	title = "PROJECT_COMPLETE"
	picture = GFX_evt_star_chart
	show_sound = event_sensor_ping
	desc = {
		text = "anomalymod.209.a.desc"
		trigger = {
			OR = {
				has_ship_flag = host_system_rich
				has_ship_flag = host_system_broken
			}
		}
	}
	desc = {
		text = "anomalymod.209.c.desc"
		trigger = {
			has_ship_flag = host_system_sensors
		}
	}
	desc = {
		text = "anomalymod.209.d.desc"
		trigger = {
			has_ship_flag = host_system_sensors
		}
	}
	
	is_triggered_only = yes

	immediate = {
		leader = {
			save_event_target_as = asteroid_leader
		}
		random_list = {
			5 = {
				set_ship_flag = host_system_rich
				if = {
					limit = {
						any_system = {
							distance = {
								source = root
								use_bypasses = no
								min_jumps = 5
								max_jumps = 15
							}
							NOT = { exists = space_owner }
							count_planets = { limit = { is_asteroid = yes } count > 3 }
							any_system_planet = { is_surveyed = { who = root.owner status = no } }
							any_system_planet = { is_gas_giant = yes }
						}
					}
					random_system = {
						limit = {
							any_system = {
								distance = {
									source = root
									use_bypasses = no
									min_jumps = 5
									max_jumps = 15
								}
								NOT = { exists = space_owner }
								count_planets = { limit = { is_asteroid = yes } count > 3 }
								any_system_planet = { is_surveyed = { who = root.owner status = no } }
								any_system_planet = { is_gas_giant = yes }
							}
						}
						every_planet = {
							limit = {
								is_asteroid = yes
							}
							prevent_anomaly = yes
							clear_deposits = yes
							random_list = {
								1 = {
									add_deposit = d_minerals_3
								}
								2 = {
									add_deposit = d_minerals_4
								}
								3 = {
									add_deposit = d_minerals_3
									add_deposit = d_minerals_2
								}
								2 = {
									add_deposit = d_minerals_3
									add_deposit = d_minerals_3
								}
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_3
								}
							}
						}
						save_event_target_as = host_system
					}
				}
				else = {
					solar_system = {
						spawn_system = {
							min_distance = 50
							max_distance = 100
							initializer = "rich_host_system"
						}
					}
					random_system = {
						limit = { has_star_flag = rich_host_system }
						every_planet = {
							limit = {
								is_asteroid = yes
							}
							prevent_anomaly = yes
							clear_deposits = yes
							random_list = {
								1 = {
									add_deposit = d_minerals_3
								}
								2 = {
									add_deposit = d_minerals_4
								}
								3 = {
									add_deposit = d_minerals_3
									add_deposit = d_minerals_2
								}
								2 = {
									add_deposit = d_minerals_3
									add_deposit = d_minerals_3
								}
								1 = {
									add_deposit = d_minerals_4
									add_deposit = d_minerals_3
								}
							}
						}
						save_event_target_as = host_system
					}
				}
			}
			4 = {
				set_ship_flag = host_system_broken
				solar_system = {
					spawn_system = {
						min_distance = 50
						max_distance = 100
						initializer = "broken_host_system"
					}
				}
				random_system = {
					limit = { has_star_flag = broken_host_system }
					random_planet = {
						limit = { is_planet_class = pc_broken }
						set_planet_flag = host_broken_planet
						prevent_anomaly = yes
						clear_deposits = yes
						add_deposit = d_minerals_4
						add_deposit = d_minerals_4
						add_deposit = d_minerals_2
					}
					save_event_target_as = host_system
				}
			}
			3 = {
				set_ship_flag = host_system_sensors
				modifier = {
					factor = 0
					owner = { has_technology = tech_sensors_4 }
				}
			}
			1 = {
				set_ship_flag = host_system_supernova
			}
		}
	}
	
	option = {
		name = anomalymod.209.a
		trigger = {
			has_ship_flag = host_system_rich
		}
		event_target:host_system = {
			random_planet = {
				limit = { is_asteroid = yes }
				enable_special_project = {
					name = "EXTRASOLAR_ASTEROID_PROJECT_RICH"
					location = this
					owner = root.owner
				}
			}
		}
	}
	
	option = {
		name = anomalymod.209.a
		trigger = {
			has_ship_flag = host_system_broken
		}
		event_target:host_system = {
			random_planet = {
				limit = { is_planet_class = pc_broken }
				enable_special_project = {
					name = "EXTRASOLAR_ASTEROID_PROJECT_BROKEN"
					location = this
					owner = root.owner
				}
			}
		}
	}
	
	option = {
		name = INTERESTING
		trigger = {
			has_ship_flag = host_system_sensors
		}
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_sensors_2 } }
				add_research_option = tech_sensors_2
				add_tech_progress = {
					tech = tech_sensors_2
					progress = 0.5
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sensors_3 } }
				add_research_option = tech_sensors_3
				add_tech_progress = {
					tech = tech_sensors_3
					progress = 0.4
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_sensors_4 } }
				add_research_option = tech_sensors_4
				add_tech_progress = {
					tech = tech_sensors_4
					progress = 0.3
				}
			}
		}
	}
	
	option = {
		name = INTRIGUING
		trigger = {
			has_ship_flag = host_system_supernova
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			hidden_effect = { set_country_flag = host_system_supernova_country } # follow-up anomaly
		}
	}
	
	after = {
		hidden_effect = {
			remove_ship_flag = host_system_rich
			remove_ship_flag = host_system_broken
			remove_ship_flag = host_system_sensors
			remove_ship_flag = host_system_supernova
		}
	}
}

# Find rich asteroid system
ship_event = {
	id = anomalymod.210
	title = "PROJECT_COMPLETE"
	desc = anomalymod.210.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		solar_system = {
			every_planet = {
				limit = { is_asteroid = yes }
				surveyed = { set_surveyed = yes surveyor = root.owner } 
			}
		}
	}
}

# Find broken world system
ship_event = {
	id = anomalymod.211
	title = "PROJECT_COMPLETE"
	desc = anomalymod.211.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		solar_system = {
			every_planet = {
				limit = { has_planet_flag = host_broken_planet }
				surveyed = { set_surveyed = yes surveyor = root.owner } 
			}
		}
	}
}

# Another Extrasolar Asteroid
ship_event = {
	id = anomalymod.212
	title = anomalymod.208.name
	desc = anomalymod.212.desc
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = INTRIGUING
		FROM = {
			add_deposit = d_minerals_3
			add_deposit = d_minerals_3
		}
	}
}

# Living Metal Spaceborn Entity
ship_event = {
	id = anomalymod.213
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.213.desc"
	picture = GFX_evt_ship_in_orbit
	show_sound = event_scanner
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}
	
	option = {
		name = INCREDIBLE
		FROMFROM = { 
			set_deposit = d_living_metal_deposit
			hidden_effect = {
				add_modifier = {
					modifier = "living_metal_spaceborn_alien"
					days = -1
				}
			}
		}
		owner = {
			if = {
				limit = {
					has_tech_option = tech_mine_living_metal
				}
				add_tech_progress = {
					tech = tech_mine_living_metal
					progress = 0.25
				}
			}
			else = {
				add_research_option = tech_mine_living_metal
			}
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier4researchreward
				min = @tier4researchmin
				max = @tier4researchmax
			}
		}
		leader = { add_experience = 200 }
	}
}

### Giant Skeleton transdimensional being follow-up ###
event = {
	id = anomalymod.214
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			any_planet_within_border = { has_modifier = "transdimensional_being" }
			NOT = { has_country_flag = transdimensional_being_event }
			OR = {
				AND = {
					has_event_chain = l_cluster_chain
					NOT = {
						has_completed_event_chain_counter = {
							event_chain = l_cluster_chain
							counter = clues
						}
					}
				}
				AND = {
					OR = {
						has_seen_any_bypass = gateway
						any_relation = {
							is_country_type = default
							has_communications = ROOT
							has_technology = tech_gateway_activation
						}
					}
					NOT = { has_technology = tech_gateway_construction }
				}
			}
		}
	}
	
	immediate = {
		random_country = {
			limit = {
				any_planet_within_border = { has_modifier = "transdimensional_being" }
				NOT = { has_country_flag = transdimensional_being_event }
				OR = {
					AND = {
						has_event_chain = l_cluster_chain
						NOT = {
							has_completed_event_chain_counter = {
								event_chain = l_cluster_chain
								counter = clues
							}
						}
					}
					AND = {
						OR = { 
							has_seen_any_bypass = gateway
							any_relation = {
								is_country_type = default
								has_communications = ROOT
								has_technology = tech_gateway_activation
							}
						}
						NOT = { has_technology = tech_gateway_construction }
					}
				}
			}
			random_list = {
				1 = {
					country_event = { id = anomalymod.215 days = 360 random = 720 }
				}
				9 = {
				}
			}
		}
	}
}
country_event = {
	id = anomalymod.215
	title = "anomalymod.215.name"
	desc = "anomalymod.215.desc"
	picture = GFX_evt_physics_research
	show_sound = event_scanner
	
	is_triggered_only = yes
	
	trigger = {
		any_planet_within_border = { has_modifier = "transdimensional_being" }
	}
	
	immediate = {
		set_country_flag = transdimensional_being_event
		random_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = ROOT
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "INTRIGUING"
		event_target:transdimensional_being_planet = {
			enable_special_project = {
				name = "TRANSDIMENSIONAL_BEING_PROJECT"
				location = this
				owner = root
			}
		}
	}
}
# Complete special project
ship_event = {
	id = anomalymod.216
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.216.desc"
	picture = GFX_evt_physics_research
	show_sound = event_alien_signal
	
	is_triggered_only = yes
	
	immediate = {
		random_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = root.owner
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "FASCINATING"
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			generate_lcluster_clue = yes
		}
	}
}
ship_event = {
	id = anomalymod.217
	title = "PROJECT_COMPLETE"
	desc = "anomalymod.217.desc"
	picture = GFX_evt_physics_research
	show_sound = event_alien_signal
	
	is_triggered_only = yes
	
	immediate = {
		random_planet = {
			limit = {
				has_modifier = "transdimensional_being"
				exists = space_owner
				space_owner = {
					is_same_value = root.owner
				}
			}
			save_event_target_as = transdimensional_being_planet
		}
	}
	
	option = {
		name = "FASCINATING"
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_gateway_activation } }
				add_research_option = tech_gateway_activation
				add_tech_progress = {
					tech = tech_gateway_activation
					progress = 0.1
				}
			}
			else = {
				add_research_option = tech_gateway_construction
				add_tech_progress = {
					tech = tech_gateway_construction
					progress = 0.1
				}
			}
		}
	}
}

# Barren lakes
ship_event = {
	id = anomalymod.218
	title = "anomalymod.218.name"
	desc = "anomalymod.218.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
	}
	
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_3
		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
	}
}

# Asteroid is gateway
ship_event = {
	id = anomalymod.219
	title = "anomalymod.219.name"
	desc = {
		text = anomalymod.219.a.desc
		trigger = {
			NOT = { 
				owner = { has_country_flag = encountered_first_lgate }
			}
		}
	}
	desc = {
		text = anomalymod.219.b.desc
		trigger = {
			owner = { has_country_flag = encountered_first_lgate }
		}
	}
	picture = GFX_evt_drifting_gateway
	show_sound = event_radio_chatter
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = "ASTOUNDING"
		solar_system = {
			spawn_megastructure = {
				type = "gateway_ruined" 
				location = FROM
			}
		}
		hidden_effect = {
			FROM = { remove_planet = yes }
			owner = {
				set_country_flag = encountered_first_gateway
				add_seen_bypass_type = gateway
			}
		}
	}
}

# gas bags
ship_event = {
	id = anomalymod.220
	title = "anomalymod.220.name"
	desc = "anomalymod.220.desc"
	picture = GFX_evt_animal_wildlife
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = INTERESTING
		FROM = {
			add_deposit = d_alien_pets_deposit
		}
	}
}

# Attacked ore freighter
ship_event = {
	id = anomalymod.221
	title = "anomaly.65.name"
	desc = "anomalymod.221.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = INTERESTING
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Crashed Titan
ship_event = {
	id = anomalymod.222
	title = "anomalymod.222.name"
	desc = "anomalymod.222.desc"
	picture = GFX_evt_mining_station
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = { owner = { country_event = { id = story.5 days = 30 } } }
	
	option = {
		name = "anomaly.35.a"
		FROM = {
			set_deposit = d_engineering_8
		}
	}
}

# Volcanic microbes
ship_event = {
	id = anomalymod.223
	title = "anomalymod.223.name"
	desc = "anomalymod.223.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.1 days = 2 } }
	}
	
	option = {
		name = FASCINATING
		from = {
			add_deposit = d_energy_3_society_3
		}
	}
}

# Tiyanki nesting grounds
ship_event = {
	id = anomalymod.224
	title = "anomalymod.224.name"
	desc = "anomalymod.224.desc"
	picture = GFX_evt_fleet_evil
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = tiyanki_encountered } }
				set_country_flag = tiyanki_encountered
				country_event = { id = story.500 }
			}
		}
		solar_system = {
			create_tiyanki_country = yes
			FROM = {
				save_event_target_as = giant
				event_target:tiyanki_country = {
					save_event_target_as = tiyanki_country2
					create_fleet = {
						name = "NAME_Tiyanki_Space_Whale"
						effect = {
							set_owner = event_target:tiyanki_country
							create_ship = {
								name = "NAME_Cow"
								design = "NAME_Tiyanki_Cow"
							}
							create_ship = {
								name = "NAME_Bull"
								design = "NAME_Tiyanki_Bull"
							}
							create_ship = {
								name = "NAME_Calf"
								design = "NAME_Tiyanki_Calf"
							}
							set_location = event_target:giant
							set_fleet_stance = passive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 0
							queue_actions = {
								wait = { # Cooldown until they start moving
									duration = 320
									random = 80
								}
								repeat = {
									find_random_system = {
										trigger = {
											id = tiyanki.x2.trigger.10
											closest_system = {
												NOT = { has_star_flag = hostile_system }
												any_system_planet = {
													is_gas_giant = yes 
												}
											}
										}
										found_system = {
											move_to = this
										}
									}
									find_closest_planet = {
										trigger = {
											id = tiyanki.x2.trigger.11
											is_gas_giant = yes
										}
										found_planet = {
											orbit_planet = this
											wait = {
												duration = 320
												random = 80
											}
										}
									}
								}
							}
						}
					}
					create_fleet = {
						name = "NAME_Tiyanki_Space_Whale"
						effect = {
							set_owner = event_target:tiyanki_country
							create_ship = {
								name = "NAME_Cow"
								design = "NAME_Tiyanki_Cow"
							}
							create_ship = {
								name = "NAME_Bull"
								design = "NAME_Tiyanki_Bull"
							}
							create_ship = {
								name = "NAME_Calf"
								design = "NAME_Tiyanki_Calf"
							}
							set_location = event_target:giant
							set_fleet_stance = passive
							set_aggro_range_measure_from = return_point
							set_aggro_range = 0
							queue_actions = {
								wait = { # Cooldown until they start moving
									duration = 320
									random = 80
								}
								repeat = {
									find_random_system = {
										trigger = {
											id = tiyanki.x2.trigger.12
											closest_system = {
												NOT = { has_star_flag = hostile_system }
												any_system_planet = {
													is_gas_giant = yes 
												}
											}
										}
										found_system = {
											move_to = this
										}
									}
									find_closest_planet = {
										trigger = {
											id = tiyanki.x2.trigger.13
											is_gas_giant = yes
										}
										found_planet = {
											orbit_planet = this
											wait = {
												duration = 320
												random = 80
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = FASCINATING
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# Ancient Canals
ship_event = {
	id = anomalymod.225
	title = "anomalymod.225.name"
	desc = "anomalymod.225.desc"
	picture = GFX_evt_warm_barren
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.5 days = 30 }
			}
		}
	}
	
	option = {
		name = anomalymod.225.a
		owner = {
			if = {
				limit = { NOT = { has_technology = tech_hydroponics } }
				add_research_option = tech_hydroponics
				add_tech_progress = {
					tech = tech_hydroponics
					progress = 0.33
				}
			}
			else_if = {
				limit = { NOT = { has_technology = tech_gene_crops } }
				add_research_option = tech_gene_crops
				add_tech_progress = {
					tech = tech_gene_crops
					progress = 0.25
				}
			}
			else = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
	}
}

# Bubbling oceans
ship_event = {
	id = anomalymod.226
	title = "anomalymod.226.name"
	desc = "anomalymod.226.desc"
	picture = GFX_evt_ocean_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = FASCINATING
		FROM = {
			add_deposit = d_bubbling_swamp
			add_deposit = d_bubbling_swamp
		}
	}
}

# mineral rich caverns
ship_event = {
	id = anomalymod.227
	title = "anomalymod.227.name"
	desc = "anomalymod.227.desc"
	picture = GFX_evt_arid_planet
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		FROM = {
			add_deposit = d_ore_rich_caverns
			add_deposit = d_dust_caverns
		}
	}
}

# ejected microbes
ship_event = {
	id = anomalymod.228
	title = "anomalymod.228.name"
	desc = "anomalymod.228.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
			FROM = {
				add_modifier = {
					modifier = "asteroid_microbes"
					days = -1
				}
			}
			solar_system = {
				random_system_planet = {
					limit = {
						OR = {
							habitable_planet = yes
							is_planet_class = pc_nuked
						}
					}
					save_event_target_as = asteroid_microbes_source
					add_modifier = {
						modifier = "asteroid_impacts"
						days = -1
					}
				}
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_4
		}
	}
}

# Discovers strange life-like crystals
ship_event = {
	id = anomalymod.229
	title = "anomalymod.229.name"
	desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = anomalymod.229.desc
	}
	desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = anomalymod.229.desc.gestalt
	}
	picture = GFX_evt_frozen
	show_sound = event_scanner
	location = FROM
	
	is_triggered_only = yes
	
	option = {
		name = anomalymod.229.a
		trigger = { is_xenophobe = no }
		FROM = {
			set_deposit = d_rare_crystals_2
		}
		hidden_effect = {
			if = {
				limit = {
					owner = { is_gestalt = no }
				}
				leader = {
					random_list = {
						2 = {  }
						1 = {
							add_trait = leader_trait_substance_abuser
						}
					}
				}
			}
		}
	}
	option = {
		name = anomalymod.229.phobe
		trigger = { is_xenophobe = yes }
		FROM = {
			set_deposit = d_rare_crystals_2
		}
		hidden_effect = {
			leader = {
				random_list = {
					4 = {  }
					1 = {
						add_trait = leader_trait_substance_abuser
					}
				}
			}
		}
	}
	option = {
		name = anomalymod.229.b
		FROM = {
			enable_special_project = {
				name = "CRYSTAL_LIFE_PROJECT"
				location = this
				owner = root.owner
			}
		}
	}
}

# special project complete: living crystal corals
ship_event = {
	id = anomalymod.230
	title = "anomalymod.230.name"
	desc = "anomalymod.230.desc"
	picture = GFX_evt_alien_nature
	show_sound = event_ship_bridge
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.2 days = 30 }
			}
		}
	}
	
	option = {
		name = FASCINATING
		FROMFROM = {
			set_deposit = d_exotic_gases_2
			hidden_effect = {
				add_modifier = {
					modifier = "living_crystals"
					days = -1
				}
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

# special project complete: inert crystals
ship_event = {
	id = anomalymod.231
	title = "anomalymod.231.name"
	desc = "anomalymod.231.desc"
	picture = GFX_evt_frozen
	show_sound = event_ship_bridge
	location = FROMFROM
	
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			clear_deposits = yes
		}
	}

	option = {
		name = INTERESTING
		trigger = { is_xenophobe = no }
		FROMFROM = {
			add_deposit = d_rare_crystals_2
			add_deposit = d_energy_2
		}
	}
	option = {
		name = anomalymod.231.a
		trigger = { is_xenophobe = yes }
		FROMFROM = {
			add_deposit = d_rare_crystals_2
			add_deposit = d_energy_2
		}
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# More oceans under ice
ship_event = {
	id = anomalymod.232
	title = "anomaly.2510.name"
	desc = "anomalymod.232.desc"
	picture = GFX_evt_frozen
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			owner = {
				country_event = { id = story.1 days = 30 }
			}
		}
		FROM = {
			clear_deposits = yes
		}
	}
	option = {
		name = FASCINATING
		FROM = {
			set_deposit = d_society_3
		}
		hidden_effect = {
			FROM = {
				set_planet_flag = underwater_ocean_microbes
				add_modifier = {
					modifier = "subterranean_ocean"
					days = -1
				}
			}
		}
	}
}

# potential ocean follow-up
ship_event = {
	id = anomalymod.233
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		from = {
			has_modifier = subterranean_ocean
			has_planet_flag = underwater_ocean_microbes
			space_owner = {
				NOT = {
					has_country_flag = underwater_ocean_microbes_event_fired
				}
			}
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				FROM = {
					planet_event = { id = anomalymod.234 days = 360 random = 720 }
				}
			}
			1 = {
				# nothing happens
				from = { remove_planet_flag = underwater_ocean_microbes }
			}
		}
	}
}

planet_event = {
	id = anomalymod.234
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_research_station = yes
		has_modifier = subterranean_ocean
		has_planet_flag = underwater_ocean_microbes
		space_owner = {
			NOT = {
				has_country_flag = underwater_ocean_microbes_event_fired
			}
		}
	}
	
	immediate = {
		space_owner = {
			set_country_flag = underwater_ocean_microbes_event_fired
			country_event = { id = anomalymod.235 }
		}
	}
}

country_event = {
	id = anomalymod.235
	title = "anomaly.235.name"
	desc = "anomalymod.235.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { clear_deposits = yes }
	}
	
	option = {
		name = REMARKABLE
		FROM = { add_deposit = d_exotic_gases_1 }
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}