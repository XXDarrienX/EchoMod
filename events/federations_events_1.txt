################################
#
# Federations Events
#
# Written by Stephen Muray
#
###############################

namespace = federations

### Community: Project Cornucopia

# Project Cornucopia granted
country_event = {
	id = federations.10000
	title = "federations.10000.name"
	desc = "federations.10000.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	option = {
		name = progress.2.a.mech # Acknowledged.
	}
}

# Greater Than Ourselves
country_event = {
	id = federations.10010
	title = "federations.10010.name"

	desc = {
		trigger = {
			is_gestalt = no
		}
		text = "federations.10010.desc"
	}
	desc = {
		trigger = {
			is_gestalt = yes
		}
		text = "federations.10010.desc_gestalt"
	}

	picture = GFX_evt_alien_propaganda
	show_sound = event_conversation

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		custom_tooltip = "greater_than_ourselves_tooltip"
	}
}

# Greater Than Ourselves (Hidden)
country_event = {
	id = federations.10011

	hide_window = yes
	is_triggered_only = no
	location = from

    mean_time_to_happen = {
		days = 60
	}

	trigger = {
		has_edict = greater_than_ourselves

		any_owned_pop = {
			is_unemployed = yes
			OR = {
				is_pop_category = worker
				is_pop_category = simple_drone
			}
		}
	}

	immediate = {
		random_owned_pop = {
			limit = {
				is_unemployed = yes
				OR = {
					is_pop_category = worker
					is_pop_category = simple_drone
				}

				owner = {
					any_owned_planet = {
						free_housing >= 1
						free_jobs >= 1
						is_under_colonization = no
						is_controlled_by = owner
						has_orbital_bombardment = no
					}
				}
			}
			save_event_target_as = greater_than_ourselves_target_pop

			owner = {
				random_owned_planet = {
					limit = {
						habitability = { who = event_target:greater_than_ourselves_target_pop value >= 0.5 }
						free_housing >= 1
						free_jobs >= 1
						is_under_colonization = no
						is_controlled_by = owner
						has_orbital_bombardment = no
					}
					save_event_target_as = greater_than_ourselves_target_planet

					if = {
						limit = {
							exists = event_target:greater_than_ourselves_target_pop
							exists = event_target:greater_than_ourselves_target_planet
						}
						resettle_pop = {
							pop = event_target:greater_than_ourselves_target_pop
							planet = event_target:greater_than_ourselves_target_planet
						}
					}
				}
			}
		}
	}
}

# Extradimensional Experimentation
country_event = {
	id = federations.10020
	title = "federations.10020.name"

	desc = {
		trigger = {
			is_gestalt = no
		}
		text = "federations.10020.desc"
	}
	desc = {
		trigger = {
			is_gestalt = yes
		}
		text = "federations.10020.desc_gestalt"
	}

	picture = GFX_evt_clocks
	show_sound = event_laboratory_sound

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		custom_tooltip = "extradimensional_experimentation_tooltip"
	}
}

# test event to change federation type
country_event = {
	id = federations.type
	trigger = { always = no }
	title = "Change federation type"
	desc = NAME_Fluffy
	picture = GFX_evt_zro_1
		
	option = {
		name = "default_federation"
		trigger = {
			has_federation = yes
			federation = {
				NOT = { has_federation_type = default_federation }
			}
		}
		federation = {
			set_federation_type = default_federation
		}
	}
	
	option = {
		name = "trade_federation"
		trigger = {
			has_federation = yes
			federation = {
				NOT = { has_federation_type = trade_federation }
			}
		}
		federation = {
			set_federation_type = trade_federation
		}
	}
	
	option = {
		name = "research_federation"
		trigger = {
			has_federation = yes
			federation = {
				NOT = { has_federation_type = research_federation }
			}
		}
		federation = {
			set_federation_type = research_federation
		}
	}
	
	option = {
		name = "military_federation"
		trigger = {
			has_federation = yes
			federation = {
				NOT = { has_federation_type = military_federation }
			}
		}
		federation = {
			set_federation_type = military_federation
		}
	}
	
	option = {
		name = "hegemony_federation"
		trigger = {
			has_federation = yes
			federation = {
				NOT = { has_federation_type = hegemony_federation }
			}
		}
		federation = {
			set_federation_type = hegemony_federation
		}
	}
	
	option = {
		name = "Nevermind"
	}
}