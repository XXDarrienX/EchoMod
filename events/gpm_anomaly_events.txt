
namespace = gpm_anomaly

# ROOT = ship scope
# FROM = planet scope

### Black Hole Inspirational
ship_event = {
	id = gpm_anomaly.78877
	title = "gpm_anomaly.78877.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = gpm_anomaly.78877.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = gpm_anomaly.78877.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = gpm_anomaly.78877.desc.mach
	}
	picture = GFX_evt_gpm_black_hole
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		log = "---- Fired Event gpm_anomaly.78877 ----"
		log = "---- Black Hole gpm_anomaly ----"
		FROM = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
	}
	
	option = {
		trigger = { owner = { NOR = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence 
			} } }
		name = MARVELOUS
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Inspirational"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Inspirational
		}
		owner = {
			add_tech_progress = {
				tech = tech_mine_dark_matter
				progress = 0.25
			}
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		name = INTRIGUING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Inspirational"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Inspirational
		}
		owner = {
			add_tech_progress = {
				tech = tech_mine_dark_matter
				progress = 0.25
			}
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		name = syndaw.502.a
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Inspirational"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Inspirational
		}
		owner = {
			add_tech_progress = {
				tech = tech_mine_dark_matter
				progress = 0.25
			}
		}
	}
}

### Star Very Bright
ship_event = {
	id = gpm_anomaly.78878
	title = "gpm_anomaly.78878.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = gpm_anomaly.78878.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = gpm_anomaly.78878.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = gpm_anomaly.78878.desc.mach
	}
	picture = GFX_evt_gpm_bright_sun
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		log = "---- Fired Event gpm_anomaly.78878 ----"
		log = "---- Star Very Bright gpm_anomaly ----"
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
	}
	
	option = {
		trigger = { owner = { NOR = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence 
			} } }
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Unusual_Bright_Sun"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_sun_energy_deposit
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		name = EXCELLENT
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Unusual_Bright_Sun"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_sun_energy_deposit
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		name = GOOD
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Unusual_Bright_Sun"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_sun_energy_deposit
		}
	}
}

### Time-Displaced
ship_event = {
	id = gpm_anomaly.78879
	title = "gpm_anomaly.78879.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = gpm_anomaly.78879.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = gpm_anomaly.78879.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = gpm_anomaly.78879.desc.mach
	}
	picture = GFX_evt_gpm_time_displaced
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		log = "---- Fired Event gpm_anomaly.78879 ----"
		log = "---- Time Displaced gpm_anomaly ----"
		# from = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
		FROM = {
			if = {
				limit = {
					gpm_is_planet_habitable = no
					has_deposit = yes	
				}
				clear_deposits = yes
			}
		}
	}
	
	option = {
		trigger = { owner = { NOR = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence 
			} } }
		name = ASTOUNDING
		hidden_effect = {
			FROM = {
				add_modifier = { modifier = "Time_Displaced_Planet" days = -1 }
				if = {
					limit = { 
						NOR = { 
							has_modifier = terraforming_candidate 
							has_modifier = terraforming_candidate_precursor
							gpm_is_planet_habitable = yes
						}
					}
					add_modifier = { modifier = terraforming_candidate_precursor days = -1 }
				}
			}
		}
		FROM = {
			add_deposit = gpm_Time_Displaced_Planet
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		name = INTRIGUING
		hidden_effect = {
			FROM = {
				add_modifier = { modifier = "Time_Displaced_Planet" days = -1 }
				if = {
					limit = { 
						NOR = { 
							has_modifier = terraforming_candidate 
							has_modifier = terraforming_candidate_precursor
							gpm_is_planet_habitable = yes
						}
					}
					add_modifier = { modifier = terraforming_candidate_precursor days = -1 }
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Time_Displaced_Planet
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		name = syndaw.501.b.tooltip
		hidden_effect = {
			FROM = {
				add_modifier = { modifier = "Time_Displaced_Planet" days = -1 }
				if = {
					limit = { 
						NOR = { 
							has_modifier = terraforming_candidate 
							has_modifier = terraforming_candidate_precursor
							gpm_is_planet_habitable = yes
						}
					}
					add_modifier = { modifier = terraforming_candidate_precursor days = -1 }
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Time_Displaced_Planet
		}
	}
}

### protomolecule
ship_event = {
	id = gpm_anomaly.78880
	title = "gpm_anomaly.78880.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = gpm_anomaly.78880.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = gpm_anomaly.78880.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = gpm_anomaly.78880.desc.mach
	}
	picture = GFX_evt_gpm_proto_molecule
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		log = "---- Fired Event gpm_anomaly.78880 ----"
		log = "---- protomolecule gpm_anomaly ----"
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
	}
	
	option = {
		trigger = { owner = { NOR = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence 
			} } }
		name = WORRYING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Protomolecule_Infected_Station"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_proto_molecule_deposit
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Protomolecule_Infected_Station"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_proto_molecule_deposit
		}
	}
	option = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		name = syndaw.501.b
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Protomolecule_Infected_Station"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_proto_molecule_deposit
		}
	}
}

### Pulsar Clock
ship_event = {
	id = gpm_anomaly.78881
	title = "gpm_anomaly.78881.name"
	desc = {
		trigger = {
			owner = { 
				NOR = { 
					has_authority = auth_hive_mind
					has_authority = auth_machine_intelligence
				} 
			}
		}
		text = gpm_anomaly.78881.desc
	}
	desc = {
		trigger = {	owner = { has_authority = auth_hive_mind } }
		text = gpm_anomaly.78881.desc.hive
	}
	desc = {
		trigger = {	owner = { has_authority = auth_machine_intelligence } }
		text = gpm_anomaly.78881.desc.mach
	}
	picture = GFX_evt_gpm_pulsar_clock
	show_sound = event_ship_bridge
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		log = "---- Fired Event gpm_anomaly.78881 ----"
		log = "---- pulsar gpm_anomaly ----"
		from = { clear_deposits = yes }
		owner = { country_event = { id = story.2 days = 30 } }
	}
	
	option = {
		trigger = { owner = { NOR = {
			has_authority = auth_hive_mind
			has_authority = auth_machine_intelligence 
			} } }
		name = FASCINATING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Pulsar_clock"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Pulsar_clock
		}
		# owner = {
		# 	add_tech_progress = {
		# 		tech = tech_mine_neutronium
		# 		progress = 0.25
		# 	}
		# }
	}
	option = {
		trigger = { owner = { has_authority = auth_hive_mind } }
		name = AMAZING
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Pulsar_clock"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Pulsar_clock
		}
		# owner = {
		# 	add_tech_progress = {
		# 		tech = tech_mine_neutronium
		# 		progress = 0.25
		# 	}
		# }
	}
	option = {
		trigger = { owner = { has_authority = auth_machine_intelligence } }
		name = story.215.b.mater
		hidden_effect = {
			FROM = {
				add_modifier = {
					modifier = "Pulsar_clock"
					days = -1
				}
			}
		}
		FROM = { 
			add_deposit = gpm_Pulsar_clock
		}
		# owner = {
		# 	add_tech_progress = {
		# 		tech = tech_mine_neutronium
		# 		progress = 0.25
		# 	}
		# }
	}
}