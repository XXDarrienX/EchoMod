namespace = tf_archaeology_random

#Event triggered on colonization that creates an Archaeological Site on the planet

planet_event = {
    id = tf_archaeology_random.1000
    title = "tf_archaeology_random.1000.name"
    desc = "tf_archaeology_random.1000.desc"
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS

    is_triggered_only = yes

    trigger = { 
        has_owner = yes
        has_deposit = d_ordinary_digsite_tf
    }

    option = {
        name = tf_archaeology_random.1000.a
    }
}

#Ancient Burial Site
planet_event = {
    id = tf_archaeology_random.1
    title = "tf_archaeology_random.1.name"
    desc = tf_archaeology_random.1.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS 

    fire_only_once = yes

    trigger = { 
        has_owner = yes
        owner = { 
            is_ai = no
        }
        has_deposit = d_ordinary_digsite_tf
        any_owned_pop = { 
            OR = {
                has_job = tf_archaeologist
                has_job = tf_archaeologist_gestalt 
            }
        }
    }

    mean_time_to_happen = { years = 2 }

    option = {
        name = tf_archaeology_random_default_option
        owner = {
            add_monthly_resource_mult = {
                resource = unity
                value = 10
                min = 10
                max = 900
            }
        }
    }
}

#Evolutionary Wonders
planet_event = {
    id = tf_archaeology_random.2
    title = "tf_archaeology_random.2.name"
    desc = tf_archaeology_random.2.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS

    fire_only_once = yes

    trigger = { 
        has_owner = yes
        owner = { 
            is_ai = no
        }
        any_owned_pop = { 
            OR = {
                has_job = tf_archaeologist
                has_job = tf_archaeologist_gestalt 
            }
        }
    }
    
    mean_time_to_happen = { years = 4 }

    option = {
        name = tf_archaeology_random_default_option
        owner = {
            add_monthly_resource_mult = {
                resource = society_research
                value = 5
                min = 10
                max = 900
            }
        }
    }
}

#Tomb World Histories
planet_event = {
    id = tf_archaeology_random.3
    title = "tf_archaeology_random.3.name"
    desc = tf_archaeology_random.3.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS

    fire_only_once = yes

    trigger = { 
        has_owner = yes
        owner = {
            is_ai = no
        }
        is_planet_class =  pc_nuked
        has_deposit = d_ordinary_digsite_tf
        any_owned_pop = { 
            OR = {
                has_job = tf_archaeologist
                has_job = tf_archaeologist_gestalt 
            }
        }
    }

    mean_time_to_happen = { years = 5 }

    option = {
        name = tf_archaeology_random.3.a
    }
}

#Stone Age Ceremonial Sites
planet_event = {
    id = tf_archaeology_random.4
    title = "tf_archaeology_random.4.name"
    desc = tf_archaeology_random.4.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS
    
    fire_only_once = yes

    trigger = { 
        has_owner = yes
        owner = { 
            is_ai = no
        }
        has_deposit = d_ordinary_digsite_tf
        any_owned_pop = { 
            OR = {
                has_job = tf_archaeologist
                has_job = tf_archaeologist_gestalt 
            }
        }
    }

    mean_time_to_happen = { years = 5 }

    #general option
    option = {
        name = tf_archaeology_random_default_option
        owner = {
            add_monthly_resource_mult = {
                resource = society_research
                value = 5
                min = 10
                max = 400
            }
        }
    }
    #spiritualist and megachurch option
    option = {
        name = tf_archaeology_random_spiritualist_option
        trigger = { 
            owner = {
                OR = {
                    has_ethic = ethic_fanatic_spiritualist
                    has_ethic = ethic_spiritualist
                }
            }
        }
        add_modifier = {
            modifier = pm_tf_stone_age_temple
            days = -1
        }
    }
    #fanatical materialist option
    option = {
        name = tf_archaeology_random_materialist_option
        trigger = { 
            owner = {
                has_ethic = ethic_fanatic_materialist
            }
        }
        owner = {
            add_monthly_resource_mult = {
                resource = engineering_research
                value = 5
                min = 10
                max = 300
            }
            add_monthly_resource_mult = {
                resource = society_research
                value = 5
                min = 10
                max = 300
            }
        }
    }
}

#Ancient Science Installation
planet_event = {
    id = tf_archaeology_random.5
    title = "tf_archaeology_random.5.name"
    desc = tf_archaeology_random.5.desc
    picture = GFX_evt_archaeological_dig
    show_sound = event_default
    location = THIS

    fire_only_once = yes

    trigger = { 
        has_owner = yes
        owner = { 
            is_ai = no
        }
        has_deposit = d_ordinary_digsite_tf
        any_country = {
			is_ai = yes
			is_country_type = fallen_empire
			has_communications = root.owner
        }
    }
    
    mean_time_to_happen = { years = 1 }

    option = {
        name = tf_archaeology_random.5.a
        owner = { 
            add_monthly_resource_mult = {
                resource = physics_research
                value = 5
                min = 300
                max = 650                
            }
            add_monthly_resource_mult = {
                resource = engineering_research
                value = 5
                min = 300
                max = 650                
            }
        }
    }
}

### AI EVENT ###

# In an effort to allow the AI to receive bonus too I have added an AI event that fires for their Dig Sites
# The singular event is more powerful than any one of the player's but the AI does not need the flavour just the rewards

planet_event = {
    id = tf_archaeology_random.1001
    hide_window = yes
    location = THIS

    fire_only_once = yes

    mean_time_to_happen = { years = 5 }

    trigger = {
        has_owner = yes
        owner = {
            is_ai = yes
        }
        has_deposit = d_ordinary_digsite_tf
        any_owned_pop = { 
            OR = {
                has_job = tf_archaeologist
                has_job = tf_archaeologist_gestalt 
            }
        }
            
    }

    immediate = {
        owner = {
            add_monthly_resource_mult = {
                resource = society_research
                value = 5
                min = 100
                max = 900
            }
            add_monthly_resource_mult = {
                resource = physics_research
                value = 5
                min = 100
                max = 900
            }
            add_monthly_resource_mult = {
                resource = engineering_research
                value = 5
                min = 100
                max = 900
            }
            add_monthly_resource_mult = {
                resource = unity
                value = 5
                min = 100
                max = 600
            }
        }
        
    }
}