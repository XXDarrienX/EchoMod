namespace = machinepopfix

country_event = {
	id = machinepopfix.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_authority = auth_machine_intelligence
		NOT = { is_species_class = MACHINE }
	}
	
	immediate = {
		create_species = {
			name = this
			name_list = this
			plural = this
			class = "MACHINE"
			portrait = this
			traits = this
			homeworld = this

			new_pop_resource_requirement = {
				type = robot_food
				value = 30
			}
			pops_auto_growth = 1.0

			pops_can_be_colonizers = yes
			pops_can_migrate = yes
			pops_can_reproduce = yes
			pops_can_join_factions = no
			pop_maintenance = 1
			can_generate_leaders = yes
			pops_can_be_slaves = yes
			can_be_modified = yes
			pops_have_happiness = no
			pop_ethics = no
		}	
		
		every_owned_pop = { 
			limit = { 
				species = {
					has_trait = trait_machine_unit
				}
			}
			change_species = last_created
		}

		every_owned_ship = { limit = { is_ship_class = shipclass_colonizer }
			change_species = last_created
		}

		every_owned_leader = { limit = { is_same_species = ROOT }
			change_species = last_created
		}

		every_pool_leader = {
			limit = { 
				species = {
					has_trait = trait_machine_unit
				}
			}
			change_species = last_created
		}

		change_dominant_species = { species = last_created }
	}
}