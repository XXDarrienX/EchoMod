namespace = tf_anomaly_01

## Dig Site: Ancient Story

ship_event = { 
	id = tf_anomaly_01.1
	title = "tf_anomaly_01.1.name"
	desc = tf_anomaly_01.1.desc
	picture = GFX_evt_archaeological_dig
	show_sound = event_default
	location = ROOT
	
    is_triggered_only = yes

	immediate = {
		FROM = { 
			save_event_target_as = tf_legendary_sword_spawn
		}
	}

	after = {
		enable_special_project = {
			name = "TF_LEGENDARY_WEAPON_PROJECT"
			location =  FROM
			owner = root.owner
		}
	}

    option = {
		name = tf_anomaly_01.1.a
		trigger = {
			owner = {
				NOR = { 
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
	}
	option = {
		name = tf_anomaly_01.1.b
		trigger = {
			owner = {
				OR = { 
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
				}
			}
		}
	}
	option = {
		name = tf_anomaly_01.1.c
		trigger = {
			owner = {
				OR = { 
					has_ethic = spiritualist
					has_ethic = fanatic_spiritualist
				}
			}
			owner = { 
				NOR = { 
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
	}
}

## Legendary Sword Discovered
ship_event = {
	id = tf_anomaly_01.2
	title = "tf_anomaly_01.2.name"
	desc = tf_anomaly_01.2.desc
	picture = GFX_evt_tf_ancient_story_sword
	show_sound = event_mystic_reveal_light
	location = ROOT
	
	is_triggered_only = yes

	immediate = {
		event_target:tf_legendary_sword_spawn = {
			set_planet_flag = tf_legendary_weapon_planet
			add_modifier = {
				modifier = pm_tf_legendary_sword
				days = -1
			}
		}

		owner = { 
			set_country_flag = tf_legendary_weapon_discovered
		}
	}

	#after = { 
			# if the fallen events flag is set then this will spawn an MTTH event where the leader of this empire could possibly start seeing visions?
	#}

	option = {
		name = tf_anomaly_01.2.a
	}


}

## A Familiar World

planet_event = {
	id = tf_anomaly_01.3
	title = "tf_anomaly_01.3.name"
	desc = tf_anomaly_01.3.desc
	picture = GFX_evt_alien_ruins
	show_sound = event_mystic_reveal_light
	location = ROOT

	is_triggered_only = yes

	trigger = {
		has_planet_flag = tf_legendary_weapon_planet
		owner = { has_country_flag = tf_legendary_weapon_discovered}
		has_owner = yes
		original_owner = yes
		is_homeworld = no
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		add_modifier = {
			modifier = pm_tf_familiar_world
			days = -1
		}
	}

	option = {
		name = tf_anomaly_01.3.a
	}
}