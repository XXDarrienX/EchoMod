namespace = gai_pops

event = {
	id = gai_pops.1
	hide_window = yes
    is_triggered_only = yes 
	
	immediate = {
		IF = {
			limit = {
				years_passed > 4
			}
			every_playable_country = {
				IF = {
					limit = {
						is_country_type = default
					}
					IF = {
						limit = {
							is_ai = no
						}
						every_owned_planet = {
							set_timed_planet_flag = { flag = gai_maniacs_flag_thanks_man days = 2 }
						}
					}
					IF = {
						limit = {
							is_at_war = no
							num_owned_planets > 4
							any_owned_planet = {
								has_building_construction = no
								num_free_districts = { type = any value > 0 }
								any_owned_pop = {
									is_sapient = yes
									OR = {
										is_unemployed = yes 
										has_job = servant
									}
								}
							}
						}
						IF = {
							limit = {
								has_resource = { type = energy amount < 500 }
								has_monthly_income = {
									resource = energy
									value < 0
								}
							}
							every_owned_planet = {
								set_timed_planet_flag = { flag = gai_maniacs_flag_thanks_man days = 20 }
							}
							set_timed_country_flag = { flag = gai_need_energy days = 45 }
						}
						IF = {
							limit = {
								has_resource = { type = minerals amount < 500 }
								is_at_war = no
								has_monthly_income = {
									resource = minerals
									value < 50
								}
							}
							every_owned_planet = {
								set_timed_planet_flag = { flag = gai_maniacs_flag_thanks_man days = 20 }
							}
							set_timed_country_flag = { flag = gai_need_minerals days = 180 }
							set_timed_country_flag = { flag = gai_cooldown days = 900 }
						}
						IF = {
							limit = {
								has_resource = { type = food amount < 500 }
								has_monthly_income = {
									resource = food
									value < 0
								}
							}
							every_owned_planet = {
								set_timed_planet_flag = { flag = gai_maniacs_flag_thanks_man days = 20 }
							}
							set_timed_country_flag = { flag = gai_need_food days = 45 }
						}
						random_owned_planet = { 
							limit = {
								not = { has_planet_flag = gai_recent_shuffle }
								NOT = { is_capital = yes }
								free_jobs > 0
							}
							set_timed_planet_flag = { flag = gai_maniacs_flag_thanks_man days = 2 }
							set_timed_planet_flag = { flag = gai_recent_shuffle days = 720 }
						}
					}
				}
			}
		}
	}
}