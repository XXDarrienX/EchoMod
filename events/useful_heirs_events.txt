###############################
# Mandate Events
###############################

namespace = usefulheirs


country_event = {
	id = usefulheirs.1000
	title = usefulheirs.1000.name
	desc = usefulheirs.1000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.1000.d
	}

	# You need to gain experience within our empire.
	option = {
		name = usefulheirs.1000.a
		custom_tooltip = usefulheirs.1000.a.tooltip
		hidden_effect = { country_event = { id = usefulheirs.2000 } }
	}

	# You are unworthy of being my heir.
	option = {
		name = usefulheirs.1000.b
		custom_tooltip = usefulheirs.1000.b.tooltip
		hidden_effect = { country_event = { id = usefulheirs.3000 } }
	}

	# I shall abdicate, and you shall rule.
	option = {
		name = usefulheirs.1000.c
		custom_tooltip = usefulheirs.1000.c.tooltip
		hidden_effect = { country_event = { id = usefulheirs.4000 } }
	}
}


######################


# Useful Heirs
country_event = {
	id = usefulheirs.2000
	title = usefulheirs.2000.name
	desc = usefulheirs.2000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.2000.e
	}

	# Governor
	option = {
		name = usefulheirs.2000.a
		hidden_effect = { country_event = { id = usefulheirs.2001 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_governor }
			}
		}
	}

	# Admiral
	option = {
		name = usefulheirs.2000.b
		hidden_effect = { country_event = { id = usefulheirs.2002 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_admiral }
			}
		}
	}

	# General
	option = {
		name = usefulheirs.2000.c
		hidden_effect = { country_event = { id = usefulheirs.2003 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_general }
			}
		}
	}

	# Scientist
	option = {
		name = usefulheirs.2000.d
		hidden_effect = { country_event = { id = usefulheirs.2004 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_scientist }
			}
		}
	}
}

# Governor
country_event = {
	id = usefulheirs.2001
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = governor
		}

		last_created_leader = {
			set_leader_flag = clone_heir_governor
			set_leader_flag = clone_heir_base
			set_name = "heir_name_bold"
			save_event_target_as = clone_heir_override
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_general_strategist
						has_trait = leader_trait_strategist2
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.17 }
		country_event = { id = heirtraits.18 }
		country_event = { id = heirtraits.19 }
		country_event = { id = heirtraits.20 }
		country_event = { id = heirtraits.21 }
		country_event = { id = heirtraits.22 }
		country_event = { id = heirtraits.23 }
		country_event = { id = heirtraits.24 }
	}

	after = {
		country_event = { id = usefulheirs.2011 days = 3 }
	}
}

country_event = {
	id = usefulheirs.2011
	hide_window = yes
	is_triggered_only = yes


	immediate = {
		if = {
			limit = {
				any_owned_leader = {
					NOR = {
						leader_class = ruler
						leader_class = governor
					}
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOR = {
						leader_class = ruler
						leader_class = governor
					}
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# Admiral
country_event = {
	id = usefulheirs.2002
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = admiral
		}

		last_created_leader = {
			set_leader_flag = clone_heir_admiral
			set_leader_flag = clone_heir_base
			set_name = "heir_name_bold"
			save_event_target_as = clone_heir_override
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_general_strategist
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.1 }
		country_event = { id = heirtraits.2 }
		country_event = { id = heirtraits.3 }
		country_event = { id = heirtraits.4 }
		country_event = { id = heirtraits.5 }
		country_event = { id = heirtraits.6 }
		country_event = { id = heirtraits.7 }
		country_event = { id = heirtraits.8 }
		country_event = { id = heirtraits.9 }
		country_event = { id = heirtraits.10 }
		country_event = { id = heirtraits.11 }
		country_event = { id = heirtraits.12 }
		country_event = { id = heirtraits.13 }
		country_event = { id = heirtraits.14 }
		country_event = { id = heirtraits.15 }
		country_event = { id = heirtraits.16 }
	}

	after = {
		country_event = { id = usefulheirs.2012 days = 3 }
	}
}

country_event = {
	id = usefulheirs.2012
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_owned_leader = {
					NOR = {
						leader_class = ruler
						leader_class = admiral
					}
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOR = {
						leader_class = ruler
						leader_class = admiral
					}
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# General
country_event = {
	id = usefulheirs.2003
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = general
		}

		last_created_leader = {
			set_leader_flag = clone_heir_general
			set_leader_flag = clone_heir_base
			set_name = "heir_name_bold"
			save_event_target_as = clone_heir_override
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.1 }
		country_event = { id = heirtraits.2 }
		country_event = { id = heirtraits.3 }
		country_event = { id = heirtraits.4 }
		country_event = { id = heirtraits.5 }
		country_event = { id = heirtraits.6 }
		country_event = { id = heirtraits.7 }
		country_event = { id = heirtraits.8 }
		country_event = { id = heirtraits.9 }
		country_event = { id = heirtraits.10 }
		country_event = { id = heirtraits.11 }
		country_event = { id = heirtraits.12 }
		country_event = { id = heirtraits.13 }
		country_event = { id = heirtraits.14 }
		country_event = { id = heirtraits.15 }
		country_event = { id = heirtraits.16 }
	}

	after = {
		country_event = { id = usefulheirs.2013 days = 3 }
	}
}

country_event = {
	id = usefulheirs.2013
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_owned_leader = {
					NOR = {
						leader_class = ruler
						leader_class = general
					}
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOR = {
						leader_class = ruler
						leader_class = general
					}
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# Scientist
country_event = {
	id = usefulheirs.2004
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = scientist
		}

		last_created_leader = {
			set_leader_flag = clone_heir_scientist
			set_leader_flag = clone_heir_base
			set_name = "heir_name_bold"
			save_event_target_as = clone_heir_override
		}

		set_heir = event_target:clone_heir_override
	}

	after = {
		country_event = { id = usefulheirs.2014 days = 3 }
	}
}

country_event = {
	id = usefulheirs.2014
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_owned_leader = {
					NOR = {
						leader_class = ruler
						leader_class = scientist
					}
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOR = {
						leader_class = ruler
						leader_class = scientist
					}
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

#############################

# Designate any leader as your heir
country_event = {
	id = usefulheirs.3000
	title = usefulheirs.3000.name
	desc = usefulheirs.3000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3000.f
	}

	# Governor
	option = {
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.a
		hidden_effect = { country_event = { id = usefulheirs.3001 } }
	}

	# Admiral
	option = {
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.b
		hidden_effect = { country_event = { id = usefulheirs.3002 } }
	}

	# General
	option = {
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.c
		hidden_effect = { country_event = { id = usefulheirs.3003 } }
	}

	# Scientist
	option = {
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.d
		hidden_effect = { country_event = { id = usefulheirs.3004 } }
	}

	# Just disinherit them
	option = {
		name = usefulheirs.3000.e
		hidden_effect = {
			heir = { kill_leader = { show_notification = no } }
		}
	}
}

# Governor
country_event = {
	id = usefulheirs.3001
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		set_variable = { which = total_governors value = 0 }

		every_owned_leader = {
			limit = {
				leader_class = governor
				NOT = { has_leader_flag = clone_heir_base }
				NOT = { is_same_value = heir }
			}
			set_leader_flag = heir_maybe
			root = { change_variable = { which = total_governors value = 1 } }
		}

		# Next, we save each subject as an Event Target
		# As the scripting language doesn't have proper loops, we use a lot of ifs if there are more than 10, the event can be run again.
		if = {
			limit = { check_variable = { which = total_governors value >= 1 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_1
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 2 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_2
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 3 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_3
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 4 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_4
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 5 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_5
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 6 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_6
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 7 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_7
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 8 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_8
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 9 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_9
			}
		}
		if = {
			limit = { check_variable = { which = total_governors value >= 10 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_10
			}
		}
	}

	after = {
		country_event = { id = usefulheirs.3011 }
	}
}

country_event = {
	id = usefulheirs.3011
	title = usefulheirs.3011.name
	desc = usefulheirs.3011.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3011.back
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_1
		trigger = { check_variable = { which = total_governors value >= 1 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_1
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_2
		trigger = { check_variable = { which = total_governors value >= 2 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_2
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_3
		trigger = { check_variable = { which = total_governors value >= 3 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_3
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_4
		trigger = { check_variable = { which = total_governors value >= 4 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_4
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_5
		trigger = { check_variable = { which = total_governors value >= 5 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_5
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_6
		trigger = { check_variable = { which = total_governors value >= 6 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_6
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_7
		trigger = { check_variable = { which = total_governors value >= 7 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_7
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_8
		trigger = { check_variable = { which = total_governors value >= 8 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_8
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_9
		trigger = { check_variable = { which = total_governors value >= 9 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_9
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_10
		trigger = { check_variable = { which = total_governors value >= 10 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_10
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
}

# Admiral
country_event = {
	id = usefulheirs.3002
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		set_variable = { which = total_admirals value = 0 }

		every_owned_leader = {
			limit = {
				leader_class = admiral
				NOT = { has_leader_flag = clone_heir_base }
				NOT = { is_same_value = heir }
			}
			set_leader_flag = heir_maybe
			root = { change_variable = { which = total_admirals value = 1 } }
		}

		# Next, we save each subject as an Event Target
		# As the scripting language doesn't have proper loops, we use a lot of ifs if there are more than 10, the event can be run again.
		if = {
			limit = { check_variable = { which = total_admirals value >= 1 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_1
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 2 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_2
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 3 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_3
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 4 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_4
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 5 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_5
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 6 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_6
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 7 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_7
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 8 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_8
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 9 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_9
			}
		}
		if = {
			limit = { check_variable = { which = total_admirals value >= 10 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_10
			}
		}
	}

	after = {
		country_event = { id = usefulheirs.3012 }
	}
}

country_event = {
	id = usefulheirs.3012
	title = usefulheirs.3012.name
	desc = usefulheirs.3011.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3011.back
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_1
		trigger = { check_variable = { which = total_admirals value >= 1 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_1
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_2
		trigger = { check_variable = { which = total_admirals value >= 2 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_2
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_3
		trigger = { check_variable = { which = total_admirals value >= 3 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_3
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_4
		trigger = { check_variable = { which = total_admirals value >= 4 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_4
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_5
		trigger = { check_variable = { which = total_admirals value >= 5 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_5
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_6
		trigger = { check_variable = { which = total_admirals value >= 6 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_6
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_7
		trigger = { check_variable = { which = total_admirals value >= 7 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_7
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_8
		trigger = { check_variable = { which = total_admirals value >= 8 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_8
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_9
		trigger = { check_variable = { which = total_admirals value >= 9 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_9
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_10
		trigger = { check_variable = { which = total_admirals value >= 10 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_10
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
}

# General
country_event = {
	id = usefulheirs.3003
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		set_variable = { which = total_generals value = 0 }

		every_owned_leader = {
			limit = {
				leader_class = general
				NOT = { has_leader_flag = clone_heir_base }
				NOT = { is_same_value = heir }
			}
			set_leader_flag = heir_maybe
			root = { change_variable = { which = total_generals value = 1 } }
		}

		# Next, we save each subject as an Event Target
		# As the scripting language doesn't have proper loops, we use a lot of ifs if there are more than 10, the event can be run again.
		if = {
			limit = { check_variable = { which = total_generals value >= 1 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_1
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 2 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_2
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 3 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_3
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 4 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_4
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 5 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_5
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 6 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_6
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 7 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_7
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 8 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_8
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 9 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_9
			}
		}
		if = {
			limit = { check_variable = { which = total_generals value >= 10 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_10
			}
		}
	}

	after = {
		country_event = { id = usefulheirs.3013 }
	}
}

country_event = {
	id = usefulheirs.3013
	title = usefulheirs.3013.name
	desc = usefulheirs.3011.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3011.back
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_1
		trigger = { check_variable = { which = total_generals value >= 1 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_1
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_2
		trigger = { check_variable = { which = total_generals value >= 2 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_2
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_3
		trigger = { check_variable = { which = total_generals value >= 3 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_3
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_4
		trigger = { check_variable = { which = total_generals value >= 4 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_4
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_5
		trigger = { check_variable = { which = total_generals value >= 5 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_5
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_6
		trigger = { check_variable = { which = total_generals value >= 6 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_6
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_7
		trigger = { check_variable = { which = total_generals value >= 7 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_7
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_8
		trigger = { check_variable = { which = total_generals value >= 8 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_8
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_9
		trigger = { check_variable = { which = total_generals value >= 9 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_9
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_10
		trigger = { check_variable = { which = total_generals value >= 10 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_10
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
}

# Scientist
country_event = {
	id = usefulheirs.3004
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		set_variable = { which = total_scientists value = 0 }

		every_owned_leader = {
			limit = {
				leader_class = scientist
				NOT = { has_leader_flag = clone_heir_base }
				NOT = { is_same_value = heir }
			}
			set_leader_flag = heir_maybe
			root = { change_variable = { which = total_scientists value = 1 } }
		}

		# Next, we save each subject as an Event Target
		# As the scripting language doesn't have proper loops, we use a lot of ifs if there are more than 10, the event can be run again.
		if = {
			limit = { check_variable = { which = total_scientists value >= 1 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_1
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 2 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_2
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 3 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_3
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 4 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_4
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 5 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_5
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 6 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_6
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 7 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_7
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 8 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_8
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 9 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_9
			}
		}
		if = {
			limit = { check_variable = { which = total_scientists value >= 10 } }
			random_owned_leader = {
				limit = { has_leader_flag = heir_maybe }
				remove_leader_flag = heir_maybe
				save_event_target_as = heir_maybe_10
			}
		}
	}

	after = {
		country_event = { id = usefulheirs.3014 }
	}
}

country_event = {
	id = usefulheirs.3014
	title = usefulheirs.3014.name
	desc = usefulheirs.3011.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3011.back
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_1
		trigger = { check_variable = { which = total_scientists value >= 1 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_1
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_2
		trigger = { check_variable = { which = total_scientists value >= 2 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_2
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_3
		trigger = { check_variable = { which = total_scientists value >= 3 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_3
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_4
		trigger = { check_variable = { which = total_scientists value >= 4 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_4
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_5
		trigger = { check_variable = { which = total_scientists value >= 5 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_5
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_6
		trigger = { check_variable = { which = total_scientists value >= 6 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_6
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_7
		trigger = { check_variable = { which = total_scientists value >= 7 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_7
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_8
		trigger = { check_variable = { which = total_scientists value >= 8 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_8
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_9
		trigger = { check_variable = { which = total_scientists value >= 9 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_9
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3011.heir_maybe_10
		trigger = { check_variable = { which = total_scientists value >= 10 } }
		hidden_effect = {
			set_heir = event_target:heir_maybe_10
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				# set_leader_flag = designated_heir
			}
			# country_event = { id = usefulheirs.3500 }
		}
	}
}

# New Heir Proclaimed
country_event = {
	id = usefulheirs.3500
	picture = GFX_evt_news_room
	title = usefulheirs.3500.name
	desc = usefulheirs.3500.desc
	hide_window = no
	is_triggered_only = yes


	option = {
		name = response_excellent
	}
}

#############################

# Abdicate the Throne
country_event = {
	id = usefulheirs.4000
	title = usefulheirs.4000.name
	desc = usefulheirs.4000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.4000.a
	}

	# I am sure. I intend to retire.
	option = {
		name = usefulheirs.4000.b
		custom_tooltip = usefulheirs.4000.b.tooltip
		hidden_effect = {
			ruler = { kill_leader = { show_notification = no } }
		}
	}

	# I am sure. However, I still plan to contribute.
	option = {
		name = usefulheirs.4000.c
		custom_tooltip = usefulheirs.4000.c.tooltip
		hidden_effect = { country_event = { id = usefulheirs.4010 } }
	}
}

# Decide to retire or become another leader type
country_event = {
	id = usefulheirs.4010
	title = usefulheirs.4010.name
	desc = usefulheirs.4010.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Governor
	option = {
		name = usefulheirs.4010.a
		hidden_effect = { country_event = { id = usefulheirs.4011 } }
	}

	# Admiral
	option = {
		name = usefulheirs.4010.b
		hidden_effect = { country_event = { id = usefulheirs.4012 } }
	}

	# General
	option = {
		name = usefulheirs.4010.c
		hidden_effect = { country_event = { id = usefulheirs.4013 } }
	}

	# Scientist
	option = {
		name = usefulheirs.4010.d
		hidden_effect = { country_event = { id = usefulheirs.4014 } }
	}
}

# Make Ruler Governor
country_event = {
	id = usefulheirs.4011
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = governor
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_general_strategist
						has_trait = trait_strategist2
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.517 }
		country_event = { id = heirtraits.518 }
		country_event = { id = heirtraits.519 }
		country_event = { id = heirtraits.520 }
		country_event = { id = heirtraits.521 }
		country_event = { id = heirtraits.522 }
		country_event = { id = heirtraits.523 }
		country_event = { id = heirtraits.524 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler Admiral
country_event = {
	id = usefulheirs.4012
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = admiral
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_general_strategist
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.51 }
		country_event = { id = heirtraits.52 }
		country_event = { id = heirtraits.53 }
		country_event = { id = heirtraits.54 }
		country_event = { id = heirtraits.55 }
		country_event = { id = heirtraits.56 }
		country_event = { id = heirtraits.57 }
		country_event = { id = heirtraits.58 }
		country_event = { id = heirtraits.59 }
		country_event = { id = heirtraits.510 }
		country_event = { id = heirtraits.511 }
		country_event = { id = heirtraits.512 }
		country_event = { id = heirtraits.513 }
		country_event = { id = heirtraits.514 }
		country_event = { id = heirtraits.515 }
		country_event = { id = heirtraits.516 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler General
country_event = {
	id = usefulheirs.4013
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = general
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.51 }
		country_event = { id = heirtraits.52 }
		country_event = { id = heirtraits.53 }
		country_event = { id = heirtraits.54 }
		country_event = { id = heirtraits.55 }
		country_event = { id = heirtraits.56 }
		country_event = { id = heirtraits.57 }
		country_event = { id = heirtraits.58 }
		country_event = { id = heirtraits.59 }
		country_event = { id = heirtraits.510 }
		country_event = { id = heirtraits.511 }
		country_event = { id = heirtraits.512 }
		country_event = { id = heirtraits.513 }
		country_event = { id = heirtraits.514 }
		country_event = { id = heirtraits.515 }
		country_event = { id = heirtraits.516 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler Scientist
country_event = {
	id = usefulheirs.4014
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = scientist
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
		}

		ruler = { kill_leader = { show_notification = no } }
	}
}