namespace = distar

#################################
#
# Anomaly Events
# by Dee Majek
# distar.1 - distar.999
#
#################################

# root = ship scope
# from = planet scope

## Lost Amoeba
ship_event = {
	id = distar.50
	title = "distar.50.name"
	desc = {
		trigger = {
			owner = { has_country_flag = amoeba_encountered }
		}
		text = "distar.50.desc"
	}
	desc = {
		trigger = {
			owner = { NOT = { has_country_flag = amoeba_encountered } }
		}
		text = "distar.50.desc.first_enc"
	}
	picture = GFX_evt_friendly_amoeba
	show_sound = event_space_amoeba
	location = from
	
	is_triggered_only = yes

	immediate = {
		create_country = {
			name = "NAME_Lost_Amoeba"
			type = faction
			flag = {
    		    icon = {
    		        category = "pirate"
    		        file = "flag_pirate_3.dds"
    		    }
    		    background = {
    		        category = "backgrounds"
    		        file = "00_solid.dds"
    		    }
    		    colors = {
    		        "blue"
    		        "null"
    		        "null"
    		        "null"
    		    }
    		}
			effect = {
				set_faction_hostility = {
					target = root.owner
					set_hostile = no
					set_neutral = no
					set_friendly = yes
				}
				create_fleet = {
					name = "NAME_Lost_Amoeba"
					effect = {
						set_owner = prev
						create_ship = {
							name = "NAME_Lost_Amoeba"
							design = "NAME_Small_Space_Organism_Teal"
							prefix = no
							upgradable = no
						}
						set_location = {
							target = from
							distance = 5
							angle = random
						}
						set_fleet_stance = passive
						set_fleet_flag = lost_amoeba_fleet@root.owner
						save_event_target_as = lost_amoeba_fleet
					}
					settings = {
						can_upgrade = no
						can_disband = no
						can_change_composition = no
						can_change_leader = no
						uses_naval_capacity = no
						spawn_debris = yes
					}
				}
			}
		}
		root = {
			fleet = {
				save_event_target_as = science_ship_fleet
			}
		}
		event_target:lost_amoeba_fleet = {
			auto_follow_fleet = {
				target = event_target:science_ship_fleet
				attack_fleet = no
			}
		}	
	}

	option = {
		name = distar.50.a
		event_target:lost_amoeba_fleet = {
			set_owner = root.owner
		}
		hidden_effect = {
			leader = {
				save_global_event_target_as = amoeba_finding_scientist
			}
			owner = {
				set_country_flag = amoeba_befriended # Achievement flag
				set_variable = { which = amoebas_owned value = 1 }
				country_event = { id = distar.51 days = 365 random = 60 } # grows up
				random_list = {
					66 = {
						country_event = { id = anomalymod.22 days = 430 } # chance to pacify amoebas
					}
					33 = {
					}
				}
				country_event = { id = distar.304 days = 36500 } # 100 years old
				IF = {
					limit = {
						NOT = { has_country_flag = amoeba_encountered }
					}
					capital_scope = {
						enable_special_project = {
							name = "INVESTIGATE_SPACE_AMOEBA"
							location = this
							owner = root.owner
						}
					}
					set_country_flag = amoeba_encountered
				}
			}
		}
	}

	option = {
		name = distar.50.b
		custom_tooltip = distar.50.b.tooltip
		hidden_effect = {
			owner = {
				country_event = { id = distar.52 days = 90 }
				IF = {
					limit = {
						NOT = { has_country_flag = amoeba_encountered }
					}
					capital_scope = {
						enable_special_project = {
							name = "INVESTIGATE_SPACE_AMOEBA"
							location = this
							owner = root.owner
						}
					}
					set_country_flag = amoeba_encountered
				}
			}
		}
	}

	option = {
		name = "distar.50.c"
		event_target:lost_amoeba_fleet = {
			enable_special_project = {
				name = "DISSECTION_PROJECT"
				location = this
				owner = root.owner
			}
		}
		hidden_effect = {
			owner = {
				IF = {
					limit = {
						NOT = { has_country_flag = amoeba_encountered }
					}
					capital_scope = {
						enable_special_project = {
							name = "INVESTIGATE_SPACE_AMOEBA"
							location = this
							owner = root.owner
						}
					}
					set_country_flag = amoeba_encountered
				}
			}
		}
	}
}

country_event = { #Adopted Amoeba Evolves
	id = distar.51
	title = "distar.51.name"
	desc = "distar.51.desc"
	picture = GFX_evt_friendly_amoeba
	show_sound = event_space_amoeba
	location = event_target:lost_amoeba_adult_fleet
	
	is_triggered_only = yes

	trigger = {
		exists = event_target:lost_amoeba_fleet
	}

	immediate = {
		create_fleet = {
			name = "NAME_Adopted_Amoeba"
			effect = {
				set_owner = root
				create_ship = {
					name = "NAME_Adopted_Amoeba"
					design = "NAME_Large_Space_Organism_Teal"
					prefix = no
					upgradable = no
					effect = {
						save_event_target_as = lost_amoeba_ship
					}
				}
				set_location = {
					target = event_target:lost_amoeba_fleet
				}
				set_fleet_stance = passive
				set_fleet_flag = lost_amoeba_adult_fleet@root
				save_event_target_as = lost_amoeba_adult_fleet
			}
			settings = {
				can_upgrade = no
				can_disband = no
				can_change_composition = no
				can_change_leader = no
				uses_naval_capacity = no
			}
		}
		event_target:lost_amoeba_fleet = {
			delete_fleet = this
		}
		if = {
			limit = {
				NOT = { has_modifier = adopted_amoeba }
			}
			add_modifier = {
				modifier = "adopted_amoeba"
				days = -1
			}
		}
		event_target:lost_amoeba_fleet = {
			set_timed_fleet_flag = { flag = lost_amoeba_mating_timer days = 3600 } 
		}
	}

	option = {
		name = "distar.51.a"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Bubbles"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Bubbles"
			}
		}
	}
	option = {
		name = "distar.51.b"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Nyx"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Nyx"
			}
		}
	}
	option = {
		name = "distar.51.c"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Renegade"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Renegade"
			}
		}
	}
	option = {
		name = "distar.51.d"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Euka"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Euka"
			}
		}
	}
	option = {
		name = "distar.51.e"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Cyto"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Cyto"
			}
		}
	}
	option = {
		name = "distar.51.f"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Boomer"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Boomer"
			}
		}
	}
	option = {
		name = "distar.51.g"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Blaze"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Blaze"
			}
		}
	}
	option = {
		name = "distar.51.h"
		event_target:lost_amoeba_adult_fleet = {
			set_name = "NAME_Nova"
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
		hidden_effect = {
			event_target:lost_amoeba_ship = {
				set_name = "NAME_Nova"
			}
		}
	}
	option = {
		name = "distar.51.more"
		hidden_effect = {
			country_event = { id = distar.55 }
		}
		event_target:lost_amoeba_adult_fleet = {
			hidden_effect = {
				add_modifier = { modifier = "amoeba_speed_boost" days = -1 }
				add_modifier = { modifier = "evolved_weapon_boost" days = -1 }
				add_modifier = { modifier = "evolved_firing_rate" days = -1 }
				add_modifier = { modifier = "evolved_evasion" days = -1 }
			}
		}
	}
}

#Ouroboros
country_event = {
	id = distar.65
	title = "distar.65.name"
	desc = "distar.65.desc"
	location = event_target:kohtalo_second_fleet

	diplomatic = yes
	
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:kohtalo_captain
		room = ethic_spaceship_room
	}

	immediate = {
		event_target:ouroboros_system = {
			random_system_planet = {
				limit = { has_planet_flag = ouroboros_pulsar_flag }
				save_event_target_as = ouroboros_pulsar
			}
		}
	}

	option = {
		name = "distar.65.a"
		custom_tooltip = "distar.65.a.tooltip"
		hidden_effect = { country_event = { id = distar.66 } }
	}

	option = {
		name = "distar.65.b"
		custom_tooltip = "distar.65.b.tooltip"
		hidden_effect = {
			event_target:kohtalo_second_fleet = {
				delete_fleet = this
			}
			country_event = { id = distar.68 days = 360 }
		}
	}
	option = {
		name = "distar.65.akx.c"
		trigger = { has_country_flag = worm_events_available }
		custom_tooltip = "distar.65.b.tooltip"
		hidden_effect = {
			event_target:kohtalo_second_fleet = {
				delete_fleet = this
			}
			country_event = { id = distar.68 days = 360 }
		}
	}
}

country_event = {
	id = distar.67
	title = "distar.67.name"
	desc = "distar.67.desc"
	picture = GFX_evt_sabotaged_ship
	show_sound = event_ship_explosion
	location = event_target:kohtalo_second_ambient
	
	is_triggered_only = yes

	immediate = {
		event_target:ouroboros_pulsar = {
			create_ambient_object = {
				type = "kohtalo_object"
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:ouroboros_pulsar
					distance = 20
					angle = random
				}
				save_event_target_as = kohtalo_second_ambient
			}
		}
	}

	option = {
		name = OOPS
		event_target:ouroboros_pulsar = {
			set_deposit = d_physics_7
		}
	}
	
	option = {
		name = akx.9465.a
		trigger = { has_country_flag = worm_events_available }
		event_target:ouroboros_pulsar = {
			set_deposit = d_physics_7
		}
	}

	after = {
		if = {
			limit = {
				exists = event_target:kohtalo_country
			}
			event_target:kohtalo_country = {
				destroy_country = yes
			}
		}
	}
}

country_event = {
	id = distar.68
	title = "distar.68.name"
	desc = "distar.68.desc"
	picture = GFX_evt_sabotaged_ship
	show_sound = event_ship_explosion
	location = event_target:kohtalo_second_ambient
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				exists = event_target:kohtalo_country
			}
			event_target:kohtalo_country = {
				destroy_country = yes
			}
		}
		create_ambient_object = {
			type = "kohtalo_object"
			location = event_target:ouroboros_pulsar
		}
		last_created_ambient_object = {
			set_location = {
				target = event_target:ouroboros_pulsar
				distance = 20
				angle = random
			}
			save_event_target_as = kohtalo_second_ambient
		}
	}

	option = {
		name = "distar.68.a"
		event_target:ouroboros_pulsar = {
			set_deposit = d_physics_7
		}
	}
	option = {
		name = "akx.9465.a"
		trigger = { has_country_flag = worm_events_available }
		event_target:ouroboros_pulsar = {
			set_deposit = d_physics_7
		}
	}
	
	after = {
		if = {
			limit = {
				exists = event_target:kohtalo_country
			}
			event_target:kohtalo_country = {
				destroy_country = yes
			}
		}
	}
}

#Happy Little Brainslugs
ship_event = {
	id = distar.172
	title = "distar.172.name"
	desc = "distar.172.desc"
	picture = GFX_evt_hive_mind
	show_sound = event_alien_nature
	location = root
	
	is_triggered_only = yes

	trigger = {
		exists = event_target:brainslug_scientist
	}

	immediate = {
		leader = {
			add_trait = leader_trait_scientist_brainslug
		}
		owner = {
			set_country_flag = finished_brainslug_chain
		}
	}

	option = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = "distar.172.a"
		owner = {
			while = {
				count = 3
				random_owned_pop = {
					limit = {
						is_sapient = yes
						species = {
							NOR = {
								has_trait = trait_cybernetic
								has_trait = trait_mechanical
								has_trait = trait_machine_unit
								is_species_class = ROBOT
							}
						}
					}
					modify_species = {
						species = this
						add_trait = trait_brainslug
						add_traits_at_start_of_list = yes
						hidden_effect = {
							set_citizenship_type = {
								country = root.owner
								type = citizenship_full
								cooldown = no
							}
						}
					}
				}
			}
			hidden_effect = {
				while = {
					count = 2
					random_owned_leader = {
						LIMIT = {
							leader_class = scientist
							species = {
								NOR = {
									has_trait = trait_cybernetic
									has_trait = trait_mechanical
									has_trait = trait_machine_unit
									is_species_class = ROBOT
								}
							}
						}
						add_trait = leader_trait_scientist_brainslug
					}
				}
				random_owned_leader = {
					LIMIT = {
						leader_class = governor
						species = {
							NOR = {
								has_trait = trait_cybernetic
								has_trait = trait_mechanical
								has_trait = trait_machine_unit
								is_species_class = ROBOT
							}
						}
					}
					add_trait = leader_trait_governor_brainslug
				}
				country_event = { id = distar.174 } #Pool leaders get trait
				country_event = { id = distar.175 } #Unrest is generated
			}
		}
	}

	option = {
		trigger = {
			hidden_trigger = {
				owner = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					any_owned_pop = {
						NOR = {
							has_ethic = ethic_xenophobe
							has_ethic = ethic_fanatic_xenophobe
						}
					}
				}
			}
		}
		name = "distar.172.a"
		owner = {
			while = {
				count = 3
				random_owned_pop = {
					LIMIT = {
						NOR = {
							has_ethic = ethic_xenophobe
							has_ethic = ethic_fanatic_xenophobe
						}
						species = {
							NOR = {
								has_trait = trait_cybernetic
								has_trait = trait_mechanical
								has_trait = trait_machine_unit
								is_species_class = ROBOT
							}
						}
						is_sapient = yes
					}
					modify_species = {
						species = this
						add_trait = trait_brainslug
						add_traits_at_start_of_list = yes
						hidden_effect = {
							set_citizenship_type = {
								country = root.owner
								type = citizenship_full
								cooldown = no
							}
						}
					}
				}
			}
			hidden_effect = {
				country_event = { id = distar.174 } #Pool leaders get trait
				country_event = { id = distar.175 } #Unrest is generated
			}
		}
	}

	option = {
		name = "distar.172.b"
		custom_tooltip = "distar.172.b.tooltip"
		owner = { set_country_flag = brainslug_offer_rejected }
	}
}

ship_event = { #Venus Flytrap Megaflora
	id = distar.185
	title = "distar.185.name"
	desc = {
		text = "distar.185.desc"
		trigger = {
			owner = { NOT = { has_authority = auth_machine_intelligence } }
		}
	}
	desc = {
		text = "distar.185.mi.desc"
		trigger = {
			owner = { has_authority = auth_machine_intelligence }
		}
	}
	picture = GFX_evt_aggressive_flora
	show_sound = event_alien_nature
	location = from
	
	is_triggered_only = yes

	option = {
		name = DISCONCERTING
		FROM = {
			add_deposit = d_predatory_plants
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

## Living Planet
planet_event = { #If you terraform the planet to a non-seabearing class before completing chain
	id = distar.197
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		has_planet_flag = living_planet
		from = {
			has_event_chain = "living_planet_chain"
			NOT = { has_country_flag = completed_living_sea }
		}
		OR = {
			is_planet_class = pc_desert
			is_planet_class = pc_arid
			is_planet_class = pc_savannah
			is_planet_class = pc_tropical
			is_planet_class = pc_alpine
			is_planet_class = pc_tundra
			is_planet_class = pc_arctic
			is_planet_class = pc_city
			is_planet_class = pc_ai
			is_planet_class = pc_sandsea 
			is_planet_class = pc_mesa
			is_planet_class = pc_oasis
			is_planet_class = pc_hadesert 
			is_planet_class = pc_steppe 
			is_planet_class = pc_frozen_desert 
			is_planet_class = pc_antarctic 
			is_planet_class = pc_cascadian
			is_planet_class = pc_geothermal
			is_planet_class = pc_glacial
			is_planet_class = pc_subarctic	
		}
	}

	immediate = {
		remove_modifier = "living_sea"
		remove_modifier = "pm_study_the_sea"
		from = {
			end_event_chain = "living_planet_chain"
			remove_country_flag = strange_calling_fired
			country_event = { id = distar.198 }
		}
	}
}

#Nanosands
ship_event = {
	id = distar.280
	title = "distar.280.name"
	desc = "distar.280.desc"
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_desert
					is_planet_class = pc_sandsea
					is_planet_class = pc_oasis
				}
			}
		}
		picture = GFX_evt_desert_planet
	}
	picture = {
		trigger = {
			from = {
				is_planet_class = pc_gaia
			}
		}
		picture = GFX_evt_gaia
	}
	picture = {
		trigger = {
			from = {
				is_planet_class = pc_barren
			}
		}
		picture = GFX_evt_warm_barren
	}
	show_sound = event_default
	location = from
	
	is_triggered_only = yes

	immediate = {
		from = {
			if = {
				limit = { is_planet_class = pc_barren }
				clear_deposits = yes
			}
		}
		owner = { country_event = { id = story.5 days = 30 } }
	}

	option = {
		name = ASTOUNDING
		from = {
			if = {
				limit = { is_planet_class = pc_barren }
				set_deposit = d_minerals_4
				add_deposit = d_volatile_motes_1
			}
			else = { add_deposit = d_nanosands }
		}
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			generate_lcluster_clue = yes
		}
	}

	option = {
		exclusive_trigger = {
			owner = {
				OR = {
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophobe
				}
			}
		}
		name = DISCONCERTING
		from = {
			if = {
				limit = { is_planet_class = pc_barren }
				set_deposit = d_minerals_4
				add_deposit = d_volatile_motes_1
			}
			else = { add_deposit = d_nanosands }
		}
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
			generate_lcluster_clue = yes
		}
	}
}


#################################
#
# Anomaly Events
# by Miranda van den Brink
# anomaly.1000 - 2999
#
#################################

# ROOT = ship scope
# FROM = planet scope

##### Bunker-Bot ######
ship_event = {
	id = distar.1040
	title = "distar.1040.name"
	desc = "distar.1040.desc"
	picture = GFX_evt_sapient_AI
	show_sound = event_alien_signal
	location = FROM
	
	is_triggered_only = yes

	immediate = { 
		owner = {
			country_event = { id = story.5 days = 30 }
		}
	}

	option = {
		name = distar.1040.a
		custom_tooltip = distar.1040.a.tooltip
		hidden_effect = { 
			owner = { pop_lcluster_event = yes }
		}
		owner = {
			add_resource = { alloys = 100 }
			add_resource = { rare_crystals = 50 }
			add_resource = { volatile_motes = 50 }
		}
	}
	option = {
		name = distar.1040.b
		custom_tooltip = distar.1040.b.tooltip
		hidden_effect = {
			owner = {
				pop_lcluster_event = yes
				if = {
					limit = {
						has_distar = yes
						NOT = { has_country_flag = encountered_first_lgate }
					}
					random_list = {
						1 = { country_event = { id = anomalymod.80 days = 10 } }
						2 = { }
					}
				}
			}
		}
		owner = {
			add_modifier = {
				modifier = mega_computer
				days = 3600
			}
		}
	}
	option = {
		name = distar.1040.c
		hidden_effect = {
			owner = {
				pop_lcluster_event = yes
				if = {
					limit = {
						has_distar = yes
						NOT = { has_country_flag = encountered_first_lgate }
					}
					random_list = {
						1 = { country_event = { id = anomalymod.80 days = 10 } }
						1 = { }
					}
					country_event = { id = anomalymod.81 days = 18000 random = 72000 }
				}
				else_if = {
					limit = {
						has_distar = yes
						has_country_flag = encountered_first_lgate
					}
					country_event = { id = anomalymod.81 days = 18000 random = 72000 }
				}
			}
		}
		custom_tooltip = distar.1040.c.tooltip
	}
}

##### ATOMIC CLOCK ######
ship_event = {
	id = distar.1045
	title = "distar.1045.name"
	desc = "distar.1045.desc"
	picture = GFX_evt_clocks
	show_sound = event_mystic_reveal
	location = FROM
	
	is_triggered_only = yes

	immediate = { 
		FROM = {
			save_event_target_as = atomic_clock_planet
		}
		owner = {
			country_event = { id = story.5 days = 30 }
			set_country_flag = atomic_clock
		}
	}

	option = {
		name = distar.1045.a
		custom_tooltip = distar.1045.a.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			owner = {
				random_list = {
					200 = {
						country_event = { id = distar.310 days = 15123 }
					}
					10 = {
						country_event = { id = anomalymod.100 days = 15123 }
					}
					20 = {
						country_event = { id = anomalymod.101 days = 15123 }
					}
					10 = {
						country_event = { id = anomalymod.102 days = 15123 }
					}
					10 = {
						country_event = { id = anomalymod.103 days = 15123 }
					}
					200 = {
						modifier = {
							factor = 0
							FROM = {
								solar_system = {
									NOT = {
										any_system_planet = {
											OR = {
												is_planet_class = pc_pulsar
												is_planet_class = pc_neutron_star
												is_planet_class = pc_magnetar
											}
										}
									}
								}
							}
						}
						modifier = {
							factor = 0
							has_leviathans = no
						}
						country_event = { id = anomalymod.104 days = 7923 }
					}
					5 = {
						country_event = { id = anomalymod.107 days = 15123 }
					}
					5 = {
						country_event = { id = anomalymod.108 days = 15123 }
					}
					1 = {
						country_event = { id = anomalymod.109 days = 15123 }
					}
				}
			}
		}
	}
	option = {
		name = distar.1045.b
		custom_tooltip = distar.1045.b.tooltip
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			random_list = {
				6 = {
					ship_event = { id = anomalymod.116 days = 3 }
				}
				11 = {
					ship_event = { id = anomalymod.117 days = 3 }
				}
				2 = {
					ship_event = { id = anomalymod.118 days = 3 }
				}
				1 = {
					ship_event = { id = anomalymod.119 days = 3 }
				}
			}
		}
	}
}

###### EAT OR BE EATEN ######
ship_event = {
	id = distar.1050
	title = "distar.1050.name"
	desc = "distar.1050.desc"
	picture = GFX_evt_space_debris
	show_sound = event_alien_nature
	location = FROM
	
	is_triggered_only = yes

	trigger = {
		any_country = {
			is_country_type = default
			NOT = {
				is_same_value = root.owner
			}
		}
	}
	immediate = {
		owner = {
			country_event = { id = story.5 days = 30 }
			set_country_flag = eat_or_be_eaten
		}
		random_playable_country = {
			limit = {
				NOR = {
					is_same_value = root.owner
					has_authority = auth_machine_intelligence
					is_synthetic_empire = yes
					owner_species = {
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
				}
			}
			establish_communications_no_message = root.owner
			save_event_target_as = delicious_aliens
			owner_species = { save_event_target_as = delicious_aliens_species }
			every_country = {
				every_owned_pop = {
					limit = { is_same_species = event_target:delicious_aliens_species }
					modify_species = {
						species = THIS
						add_trait = trait_delicious
					}
				}
			}
			root.owner = { set_country_flag = establishing_delicious_comms }
		}
	}

	option = {
		name = distar.1050.a
		hidden_effect = {
			if = {
				limit = {
					root.owner = { has_country_flag = establishing_delicious_comms }
				}
				custom_tooltip = distar.1050.a.tooltip
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
	}
}

##### HOLOGRAM ######
ship_event = {
	id = distar.1065
	title = "distar.1065.name"
	desc = "distar.1065.desc"
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_desert
					is_planet_class = pc_sandsea
					is_planet_class = pc_oasis
				}
			}
		}
		picture = GFX_evt_desert_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_tropical
					is_planet_class = pc_hajungle 	
				}
			}
		}
		picture = GFX_evt_tropical_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_arid
					is_planet_class = pc_mesa 
				}
			}
		}
		picture = GFX_evt_arid_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_continental
					is_planet_class = pc_gaia
					is_planet_class = pc_alpine
					is_planet_class = pc_savannah
					is_planet_class = pc_subarctic
					is_planet_class = pc_cascadian
				}
			}
		}
		picture = GFX_evt_continental_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_ocean
					is_planet_class = pc_mangrove
					is_planet_class = pc_desertislands
				}
			}
		}
		picture = GFX_evt_ocean_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_tundra
					is_planet_class = pc_frozen_desert 
					is_planet_class = pc_steppe 
					is_planet_class = pc_hadesert 
				}
			}
		}
		picture = GFX_evt_tundra_planet
	}
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_arctic	
					is_planet_class = pc_antarctic 
					is_planet_class = pc_geothermal 
					is_planet_class = pc_glacial 
				}
			}
		}
		picture = GFX_evt_arctic_planet
	}
	picture = {
		trigger = {
			from = {
				is_gas_giant = yes
			}
		}
		picture = GFX_evt_gas_giant
	}
	picture = {
		trigger = {
			from = {
				NOR = {
					is_planet_class = pc_arctic	
					is_planet_class = pc_desert
					is_planet_class = pc_tropical
					is_planet_class = pc_arid
					is_planet_class = pc_continental
					is_planet_class = pc_gaia
					is_planet_class = pc_alpine
					is_planet_class = pc_savannah
					is_planet_class = pc_ocean
					is_planet_class = pc_tundra
					is_planet_class = pc_arctic
					is_planet_class = pc_sandsea
					is_planet_class = pc_oasis
					is_planet_class = pc_mangrove 
					is_planet_class = pc_hajungle 	
					is_planet_class = pc_mesa 
					is_planet_class = pc_subarctic
					is_planet_class = pc_cascadian
					is_planet_class = pc_desertislands
					is_planet_class = pc_frozen_desert 
					is_planet_class = pc_steppe 
					is_planet_class = pc_hadesert 
					is_planet_class = pc_arctic	
					is_planet_class = pc_antarctic 
					is_planet_class = pc_geothermal 
					is_planet_class = pc_glacial 
				}
			}
		}
		picture = GFX_evt_ship_in_orbit_2
	}
	show_sound = event_mystic_reveal
	location = From
	
	is_triggered_only = yes

	trigger = {
		owner = {
			NOT = {
				has_country_flag = hologram
			}
		}
	}

	immediate = {
		owner = {
			country_event = { id = story.5 days = 30 }
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		From = {
			remove_planet = yes
		}
	}

	option = {
		name = distar.1065.a
		tooltip = {
			owner = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier1researchreward
					min = @tier1researchmin
					max = @tier1researchmax
				}
			}
		}
	}
}

##### STAR CRAZY ######
country_event = {
	id = distar.1072
	title = "distar.1072.name"
	desc = "distar.1072.desc"
	picture = GFX_evt_ship_in_orbit_2

	show_sound = event_alien_nature
	location = From.From
	
	is_triggered_only = yes

	immediate = {
		event_target:anomalous_star = {
			clear_deposits = yes
			surveyed = {
 				set_surveyed = yes
   				surveyor = root
 			}
		}
	}

	option = {
		name = distar.1072.a
		from.leader = {
			add_trait = leader_trait_meticulous
			add_experience = 200
		}
		event_target:anomalous_star = {
			if = {
				limit = { has_deposit_for = shipclass_mining_station }
				add_deposit = d_energy_8
			}
			else = { set_deposit = d_energy_8 }
			surveyed = {
 				set_surveyed = yes
   				surveyor = root
 			}
		}
	}
}

##### Harvesters #####
ship_event = {
	id = distar.1090
	title = "distar.1090.name"
	desc = "distar.1090.desc"
	picture = {
		trigger = {
			from = {
				OR = {
					is_planet_class = pc_tropical
					is_planet_class = pc_hajungle 
				}
			}
		}
		picture = GFX_evt_tropical
	}
	picture = {
		trigger = {
			from = {
				is_planet_class = pc_continental
			}
		}
		picture = GFX_evt_continental
	}

	picture = {
		trigger = {
			from = {
				NOR = {
					is_planet_class = pc_continental
					is_planet_class = pc_tropical
					is_planet_class = pc_hajungle 
				}
			}
		}
		picture = GFX_evt_animal_wildlife
	}

	show_sound = event_construction
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		owner = { country_event = { id = story.5 days = 30 } } 
		From = {
			add_deposit = d_harvester_fields
			add_modifier = { modifier = ancient_harvesters days = -1 }
		}
	}

	option = {
		name = distar.1090.a
	}

	option = {
		name = distar.1090.b
	}
}

##### LOCUSTS #####
ship_event = {
	id = distar.1095
	title = "distar.1095.name"
	desc = "distar.1095.desc"
	picture = GFX_evt_warm_barren
	show_sound = event_ghost_town
	location = FROM
	
	is_triggered_only = yes

	immediate = {
		set_global_flag = spaceborn_locusts_spawned
		owner = {
			country_event = { id = story.1 days = 30 }
			set_country_flag = seen_space_locusts
		}
		From = {
			change_pc = pc_barren
			add_modifier = {
				modifier = "terraforming_candidate"
				days = -1
			}
			solar_system = {
				set_star_flag = space_locusts_current_location
			}
		}
	}

	option = {
		name = distar.1095.a
		hidden_effect = {
			From = {
				random_system = {
					limit = {
						OR = {
							NOT = { exists = space_owner }
							AND = {
								exists = space_owner
								space_owner = { is_country_type = default }
							}
						}
						any_neighbor_system = { has_star_flag = space_locusts_current_location }
					}
					random_system_planet = {
						limit = { is_star = yes }
						planet_event = { id = anomalymod.120 days = 10800 random = 10800 }
					}
				}
			}
		}
	}
}

##### PRIMORDIAL SOUP #####
ship_event = {
	id = distar.2015
	title = "distar.2015.name"
	desc = "distar.2015.desc"
	picture = GFX_evt_microscopic_life
	show_sound = event_alien_nature
	location = from
	
	is_triggered_only = yes

	immediate = {
		from = {
			clear_deposits = yes
		}
	}

	option = {
		name = FASCINATING
		from = {
			add_deposit = d_society_3
 		}
		if = {
			limit = {
				from = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
					planet_size > 9
					planet_size < 26
				}
			}
			custom_tooltip = TERRAFORMING_CANDIDATE_EFFECT
			hidden_effect = {
				from = {
					add_modifier = {
						modifier = "terraforming_candidate"
						days = -1
					}
				}		
			}
		}
	}
}

#################################
#
# Anomaly Events
# by Linus Dilén
# anomaly.3000 - 3999
#
#################################

# ROOT = ship scope
# FROM = planet scope

### Trojan Asteroid ###
ship_event = {
	id = distar.3001
	title = "trojan_asteroid_title"
	desc = {
		text = "distar.3001.desc"
		trigger = {
			owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
		}
	}
	desc = {
		text = "distar.3001.gc.desc"
		trigger = {
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	picture = GFX_evt_asteroid_field
	show_sound = event_scanner
	location = event_target:trojan_asteroid
	
	is_triggered_only = yes

	option = {
		name = EXCELLENT

		event_target:trojan_asteroid = {
			set_deposit = d_energy_4
		}
	}
}

country_event = {
	id = distar.3003
	title = "trojan_asteroid_title"
	desc = {
		text = "distar.3003.desc"
		trigger = {
			owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
		}
	}
	desc = {
		text = "distar.3003.gc.desc"
		trigger = {
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	picture = GFX_evt_small_space_battle
	show_sound = event_scanner
	location = event_target:trojan_asteroid
	trackable = yes
	
	is_triggered_only = yes

	option = {
		name = OK
		event_target:trojan_asteroid = {
			enable_special_project = {
				name = "trojan_asteroid_project"
				location = event_target:trojan_asteroid
				owner = root.owner
			}
		}
	}
}

ship_event = {
	id = distar.3005
	title = "trojan_asteroid_title"
	desc = {
		text = "distar.3005.desc"
		trigger = {
			owner = { NOT = { has_ethic = ethic_gestalt_consciousness } }
		}
	}
	desc = {
		text = "distar.3005.gc.desc"
		trigger = {
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	picture = GFX_evt_asteroid_field
	show_sound = event_scanner
	location = event_target:trojan_asteroid

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		event_target:trojan_asteroid = {
			set_deposit = d_minerals_3
		}
	}
}


### Impossible Organism ###
country_event = { # Planetfall on planet X after being shoot into deep space. Recalls our earlier disregard for their survival
	id = distar.3014
	title = "distar.3015.name"
	desc = "distar.3015.desc"
	picture = GFX_evt_alien_city
	show_sound = event_scanner
	location = event_target:nivlac_planet

	is_triggered_only = yes

	trigger = {
		any_system = {
			any_system_planet = {
				is_colonizable = yes
				has_owner = no
				is_colony = no
				habitable_planet = yes
				has_anomaly = no
				NOR = {
					has_modifier = "holy_planet"
					solar_system = {
						has_star_flag = hostile_system
					}
				}
				distance = {
					source = root.owner.capital_scope
					max_distance <= 300
					min_distance >= 50
				}
				solar_system = {
					NOT = { exists = starbase }
				}
			}
		}
	}

	immediate = {
		random_planet = {
			limit = {
				is_colonizable = yes
				has_owner = no
				is_colony = no
				habitable_planet = yes
				has_anomaly = no
				NOR = {
					has_modifier = "holy_planet"
					solar_system = {
						has_star_flag = hostile_system
					}
				}
				distance = {
					source = root.owner.capital_scope
					max_distance <= 300
					min_distance >= 50
				}
				solar_system = {
					NOT = { exists = starbase }
				}
			}
			save_global_event_target_as = nivlac_planet
		}
		create_species = {
			name = "NAME_Nivlac"
			plural = "NAME_Nivlacs"
			class = FUN
			portrait = "fun15"
			namelist = "FUN4"
			traits = {
				trait = "trait_nivlac"
				trait = "trait_quick_learners"
			}
			homeworld = event_target:nivlac_planet
			effect = {
				save_global_event_target_as = nivlac_species
			}
		}
		create_country = {
			name = NAME_Nivlac_Circle
			authority = random
			civics = random
			species = event_target:nivlac_species
			ignore_initial_colony_error = yes
			type = nivlacs
			ethos = random
			flag = random
			type = default
			effect = {
				save_global_event_target_as = nivlac_country
				add_resource = { minerals = 2000 }
				add_resource = { energy = 2000 }
				add_resource = { alloys = 2000 }
				add_resource = { food = 200 }
				add_resource = { influence = 400 }
			}
		}
		event_target:nivlac_planet = {
			solar_system = {
				create_starbase = {
					size = starbase_starport
					owner = event_target:nivlac_country
					module = shipyard
					building = crew_quarters
					effect = {
						set_starbase_module = {
							slot = 1
							module = trading_hub
						}
					}
				}
			}
			set_owner = event_target:nivlac_country
			set_capital = yes
			clear_blockers = yes
			solar_system = {
				every_system_planet = {
					surveyed = {
						set_surveyed = yes
						surveyor = root.owner
					}
				}
			}
			while = {
				count = 22
				create_pop = {
					species = event_target:nivlac_species
				}					
			}
			add_district = district_city
			add_district = district_city
			add_district = district_city
			add_district = district_city
			add_district = district_farming
			add_district = district_farming
			add_district = district_farming
			add_district = district_mining
			add_district = district_mining
			add_district = district_generator
			add_district = district_generator
			add_building = building_capital
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_factory_1
			while = {
				count = 2
				create_army = {
					name = random
					owner = event_target:nivlac_country
					species = event_target:nivlac_species
					type = defense_army
				}
			}
		}

		event_target:nivlac_country = {
			if = {
				limit = {
					is_militarist = no
					is_pacifist = no
				}
				random_list = {
					2 = { }
					1 = {
						shift_ethic = ethic_militarist
						random_owned_pop = { pop_change_ethic = ethic_militarist }
						random_owned_pop = { pop_change_ethic = ethic_militarist }
						random_owned_pop = { pop_change_ethic = ethic_militarist }
						random_owned_pop = { pop_change_ethic = ethic_militarist }
					}
				}
			}
			if = {
				limit = {
					is_xenophobe = no
				}
				shift_ethic = ethic_xenophobe
				random_owned_pop = { pop_change_ethic = ethic_xenophobe }
				random_owned_pop = { pop_change_ethic = ethic_xenophobe }
				random_owned_pop = { pop_change_ethic = ethic_xenophobe }
				random_owned_pop = { pop_change_ethic = ethic_xenophobe }
			}
			create_fleet = {
				effect = {
					set_owner = prev

					create_ship = {
						name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					#set_location = prev.capital_star
					set_location = prev.capital_scope.star
					
					owner = {
						create_leader = {
							class = scientist
							species = owner_main_species
							name = random
							skill = 2
						}
					}
					set_leader = last_created_leader
				}			
			}
				
			#constructor
			create_fleet = {
				effect = {
					set_owner = prev
					
					create_ship = {
						name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = prev.capital_star
				}
			}
			
			#military
			create_fleet = {
				set_take_point = yes
				effect = {
					set_owner = prev
					
					while = {
						count = 2
						create_ship = {
							name = random
							random_existing_design = corvette
						}
					}
					
					set_location = prev.capital_star
				}
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = governor
				species = owner_main_species
				name = random
				skill = 2
			}
			establish_communications_no_message = root
			add_opinion_modifier = {
				who = root
				modifier = opinion_discarded
			}
		}
	}

	option = {
		name = OOPS
	}
}

country_event = { # Helpful relocation was a success
	id = distar.3016
	title = "distar.3016.name"
	desc = "distar.3016.desc"
	picture = GFX_evt_alien_city
	show_sound = event_scanner
	location = event_target:nivlac_planet

	is_triggered_only = yes

	trigger = {
		any_system = {
			any_system_planet = {
				is_colonizable = yes
				has_owner = no
				is_colony = no
				habitable_planet = yes
				has_anomaly = no
				NOR = {
					has_modifier = "holy_planet"
					solar_system = {
						has_star_flag = hostile_system
					}
				}
				distance = {
					source = root.owner.capital_scope
					max_distance <= 300
					min_distance >= 50
				}
				solar_system = {
					NOT = { exists = starbase }
				}
			}
		}
	}

	immediate = {
		random_planet = {
			limit = {
				is_colonizable = yes
				has_owner = no
				is_colony = no
				habitable_planet = yes
				has_anomaly = no
				NOR = {
					has_modifier = "holy_planet"
					solar_system = {
						has_star_flag = hostile_system
					}
				}
				distance = {
					source = root.owner.capital_scope
					max_distance <= 300
					min_distance >= 50
				}
				solar_system = {
					NOT = { exists = starbase }
				}
			}
			save_global_event_target_as = nivlac_planet
		}
		create_species = {
			name = "NAME_Nivlac"
			plural = "NAME_Nivlacs"
			class = FUN
			portrait = "fun15"
			namelist = "FUN4"
			traits = {
				trait = "trait_nivlac"
				trait = "trait_quick_learners"
			}
			homeworld = event_target:nivlac_planet
			effect = {
				save_global_event_target_as = nivlac_species
			}
		}
		create_country = {
			name = NAME_Nivlac_Circle
			authority = random
			civics = random
			species = event_target:nivlac_species
			ignore_initial_colony_error = yes
			type = nivlacs
			ethos = random
			flag = random
			type = default
			effect = {
				save_global_event_target_as = nivlac_country
				add_resource = { minerals = 2000 }
				add_resource = { energy = 2000 }
				add_resource = { alloys = 2000 }
				add_resource = { food = 200 }
				add_resource = { influence = 100 }
				establish_communications_no_message = root
			}
		}
		event_target:nivlac_planet = {
			solar_system = {
				create_starbase = {
					size = starbase_starport
					owner = event_target:nivlac_country
					module = shipyard
					building = crew_quarters
					effect = {
						set_starbase_module = {
							slot = 1
							module = trading_hub
						}
					}
				}
			}
			set_owner = event_target:nivlac_country
			set_capital = yes
			clear_blockers = yes
			while = {
				count = 22
				create_pop = {
					species = event_target:nivlac_species
				}					
			}
			add_district = district_city
			add_district = district_city
			add_district = district_city
			add_district = district_city
			add_district = district_farming
			add_district = district_farming
			add_district = district_farming
			add_district = district_mining
			add_district = district_mining
			add_district = district_generator
			add_district = district_generator
			add_building = building_capital
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_factory_1
			while = {
				count = 2
				create_army = {
					name = random
					owner = event_target:nivlac_country
					species = event_target:nivlac_species
					type = defense_army
				}
			}
			solar_system = {
				every_system_planet = {
					surveyed = {
						set_surveyed = yes
						surveyor = root.owner
					}
				}
			}
		}
		event_target:nivlac_country = {
			if = {
				limit = {
					is_materialist = no
					is_spiritualist = no
					ROOT = { is_materialist = yes }
				}
				random_list = {
					2 = { }
					1 = {
						shift_ethic = ethic_materialist
						random_owned_pop = { pop_change_ethic = ethic_materialist }
						random_owned_pop = { pop_change_ethic = ethic_materialist }
						random_owned_pop = { pop_change_ethic = ethic_materialist }
						random_owned_pop = { pop_change_ethic = ethic_materialist }
					}
				}
			}
			if = {
				limit = {
					is_materialist = no
					is_spiritualist = no
					ROOT = { is_spiritualist = yes }
				}
				random_list = {
					2 = { }
					1 = {
						shift_ethic = ethic_spiritualist
						random_owned_pop = { pop_change_ethic = ethic_spiritualist }
						random_owned_pop = { pop_change_ethic = ethic_spiritualist }
						random_owned_pop = { pop_change_ethic = ethic_spiritualist }
						random_owned_pop = { pop_change_ethic = ethic_spiritualist }
					}
				}
			}
			if = {
				limit = {
					is_egalitarian = no
					ROOT = { is_egalitarian = yes }
				}
				random_list = {
					2 = { }
					1 = {
						shift_ethic = ethic_egalitarian
						random_owned_pop = { pop_change_ethic = ethic_egalitarian }
						random_owned_pop = { pop_change_ethic = ethic_egalitarian }
						random_owned_pop = { pop_change_ethic = ethic_egalitarian }
						random_owned_pop = { pop_change_ethic = ethic_egalitarian }
					}
				}
			}
			if = {
				limit = {
					is_pacifist = no
					ROOT = { is_pacifist = yes }
				}
				random_list = {
					2 = { }
					1 = {
						shift_ethic = ethic_pacifist
						random_owned_pop = { pop_change_ethic = ethic_pacifist }
						random_owned_pop = { pop_change_ethic = ethic_pacifist }
						random_owned_pop = { pop_change_ethic = ethic_pacifist }
						random_owned_pop = { pop_change_ethic = ethic_pacifist }
					}
				}
			}
			if = {
				limit = {
					is_xenophile = no
				}
				shift_ethic = ethic_xenophile
				random_owned_pop = { pop_change_ethic = ethic_xenophile }
				random_owned_pop = { pop_change_ethic = ethic_xenophile }
				random_owned_pop = { pop_change_ethic = ethic_xenophile }
				random_owned_pop = { pop_change_ethic = ethic_xenophile }
			}
			create_fleet = {
				effect = {
					set_owner = prev

					create_ship = {
						name = random
						random_existing_design = science
					}

					set_fleet_stance = evasive				
					#set_location = prev.capital_star
					set_location = prev.capital_scope.star
					
					owner = {
						create_leader = {
							class = scientist
							species = owner_main_species
							name = random
							skill = 2
						}
					}
					set_leader = last_created_leader
				}			
			}
				
			#constructor
			create_fleet = {
				effect = {
					set_owner = prev
					
					create_ship = {
						name = random
						random_existing_design = constructor
					}
					
					set_fleet_stance = evasive
					set_location = prev.capital_star
				}
			}
			
			#military
			create_fleet = {
				set_take_point = yes
				effect = {
					set_owner = prev
					
					while = {
						count = 2
						create_ship = {
							name = random
							random_existing_design = corvette
						}
					}
					
					set_location = prev.capital_star
				}
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = scientist
				species = owner_main_species
				name = random
				skill = 2
			}
			create_leader = {
				class = governor
				species = owner_main_species
				name = random
				skill = 2
			}
			add_opinion_modifier = {
				who = root
				modifier = opinion_nurtured
			}
		}
	}

	option = {
		name = EXCELLENT
	}
}