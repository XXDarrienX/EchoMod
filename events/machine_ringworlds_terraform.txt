namespace = machine_ringworlds

# Decide which model to apply to a terraformed ringworld
planet_event = {
	id = machine_ringworlds.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		this = {
			if = {
				limit = {
					this = {
						is_planet_class = pc_ringworld_habitable
					}
				}
				set_planet_entity = {
					entity = "ringworld_habitable_entity_01_entity"
					graphical_culture = from
				}
			}
			else_if = {
					if = {
						limit = {
							this = {
								is_planet_class = pc_ringworld_machine
							}
						}
						set_planet_entity = {
							entity = "ringworld_machine_entity_01_entity"
							graphical_culture = from
						}
					}
				}
			}
		}
	}

# Clear food tiles on machine ringworlds
planet_event = {
	id = machine_ringworlds.2
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		if = {
			limit = { is_planet_class = pc_ringworld_machine }
			every_tile = {
				limit = {
					OR = {
						has_deposit = d_farmland_deposit
						has_deposit = d_rich_farmland_deposit
						has_deposit = d_vast_farmland_deposit
						has_deposit = d_immense_farmland_deposit
					}
				}
				clear_deposits = yes
			}
			every_tile = {
				limit = {
					has_deposit = d_mineral_food_deposit
				}
				set_deposit = d_mineral_deposit
			}
			every_tile = {
				limit = {
					has_deposit = d_rich_food_mineral_deposit
				}
				set_deposit = d_rich_mineral_deposit
			}
			remove_modifier = "natural_beauty"
			remove_modifier = "atmospheric_aphrodisiac"
			remove_modifier = "atmospheric_hallucinogen"
			remove_modifier = "lush_planet"			
		}
	
		remove_modifier = "bleak_planet"
		remove_modifier = "dangerous_wildlife"
		remove_modifier = "hazardous_weather"
		remove_modifier = "wild_storms"
		remove_modifier = "irradiated_planet"
	}
}