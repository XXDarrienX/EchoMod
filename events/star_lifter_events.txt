namespace = starlifter

# Starlifter Built
country_event = {
	id = starlifter.1
	title = starlifter.1.name
	desc = starlifter.1.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_dyson_sphere_build_start
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = star_lifter_0 }
	}
	
	option = {
		name = starlifter.1.a
	}
}

# Starlifter Frame Built Notification (HIDDEN)
country_event = {
	id = starlifter.2
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = star_lifter_1 }
	}
	
	immediate = {
		FROMFROM = { save_event_target_as = star_lifter_system }
		every_relation = {
			limit = {
				is_ai = no
				has_communications = root
			}
			country_event = { id = starlifter.3 }
		}
		if = {
			limit = {
				NOT = { has_country_flag = started_first_starlifter }
			}
			set_country_flag = started_first_starlifter
		}
	}
}

# Neighbor begins building Dyson Sphere
country_event = {
	id = starlifter.3
	title = starlifter.3.name
	desc = {
		text = starlifter.3.desc.a
		trigger = {
			FROM = { 
				has_country_flag = started_first_starlifter
			}
		}
	}
	picture = GFX_evt_dyson_sphere
	show_sound = event_mega_structure_other_empire_build_start
	location = event_target:dyson_system
	
	is_triggered_only = yes
	
	option = { # has built own Dyson Sphere
		trigger = {
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = star_lifter_0
					is_megastructure_type = star_lifter_1
					is_megastructure_type = star_lifter_2
					is_megastructure_type = star_lifter_3
					is_megastructure_type = star_lifter_4
					is_megastructure_type = star_lifter_5
				}
			}
		}
		name = starlifter.3.a
	}
}

# Starlifter Frame built
country_event = {
	id = starlifter.4
	title = starlifter.4.name
	desc = starlifter.4.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_dyson_sphere_build_upgrade_frame
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = star_lifter_1 }
	}
	
	option = {
		name = starlifter.4.a
	}
}

# Starlifter partially completed
country_event = {
	id = starlifter.5
	title = starlifter.5.name
	desc = starlifter.5.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_dyson_sphere_build_upgrade_panel
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = star_lifter_2 }
	}
	
	option = {
		name = starlifter.5.a
	}
}

# Starlifter completed
country_event = {
	id = starlifter.6
	title = starlifter.6.name
	desc = starlifter.6.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_dyson_sphere_build_complete
	location = FROMFROM
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { is_megastructure_type = star_lifter_5 }
	}

	immediate = {
		set_country_flag = finished_star_lifter
		every_relation = {
			limit = {
				is_ai = no
				has_communications = root
			}
			country_event = { id = starlifter.7 }
		}
	}
	
	option = {
		name = utopia.4005.a
	}
}

# Neighbor notification
country_event = {
	id = starlifter.7
	title = starlifter.7.name
	desc = starlifter.7.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_mega_structure_other_empire_build_complete
	location = FROMFROMFROM

	is_triggered_only = yes

	option = {
		name = OK
	}
}